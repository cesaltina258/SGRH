{
  "version": 3,
  "sources": ["../../emoji-picker-element/database.js", "../../emoji-picker-element/picker.js"],
  "sourcesContent": ["function assertNonEmptyString (str) {\r\n  if (typeof str !== 'string' || !str) {\r\n    throw new Error('expected a non-empty string, got: ' + str)\r\n  }\r\n}\r\n\r\nfunction assertNumber (number) {\r\n  if (typeof number !== 'number') {\r\n    throw new Error('expected a number, got: ' + number)\r\n  }\r\n}\r\n\r\nconst DB_VERSION_CURRENT = 1;\r\nconst DB_VERSION_INITIAL = 1;\r\nconst STORE_EMOJI = 'emoji';\r\nconst STORE_KEYVALUE = 'keyvalue';\r\nconst STORE_FAVORITES = 'favorites';\r\nconst FIELD_TOKENS = 'tokens';\r\nconst INDEX_TOKENS = 'tokens';\r\nconst FIELD_UNICODE = 'unicode';\r\nconst INDEX_COUNT = 'count';\r\nconst FIELD_GROUP = 'group';\r\nconst FIELD_ORDER = 'order';\r\nconst INDEX_GROUP_AND_ORDER = 'group-order';\r\nconst KEY_ETAG = 'eTag';\r\nconst KEY_URL = 'url';\r\nconst KEY_PREFERRED_SKINTONE = 'skinTone';\r\nconst MODE_READONLY = 'readonly';\r\nconst MODE_READWRITE = 'readwrite';\r\nconst INDEX_SKIN_UNICODE = 'skinUnicodes';\r\nconst FIELD_SKIN_UNICODE = 'skinUnicodes';\r\n\r\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\r\nconst DEFAULT_LOCALE = 'en';\r\n\r\n// like lodash's uniqBy but much smaller\r\nfunction uniqBy (arr, func) {\r\n  const set = new Set();\r\n  const res = [];\r\n  for (const item of arr) {\r\n    const key = func(item);\r\n    if (!set.has(key)) {\r\n      set.add(key);\r\n      res.push(item);\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\nfunction uniqEmoji (emojis) {\r\n  return uniqBy(emojis, _ => _.unicode)\r\n}\r\n\r\nfunction initialMigration (db) {\r\n  function createObjectStore (name, keyPath, indexes) {\r\n    const store = keyPath\r\n      ? db.createObjectStore(name, { keyPath })\r\n      : db.createObjectStore(name);\r\n    if (indexes) {\r\n      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {\r\n        store.createIndex(indexName, keyPath, { multiEntry });\r\n      }\r\n    }\r\n    return store\r\n  }\r\n\r\n  createObjectStore(STORE_KEYVALUE);\r\n  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {\r\n    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],\r\n    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],\r\n    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]\r\n  });\r\n  createObjectStore(STORE_FAVORITES, undefined, {\r\n    [INDEX_COUNT]: ['']\r\n  });\r\n}\r\n\r\nconst openIndexedDBRequests = {};\r\nconst databaseCache = {};\r\nconst onCloseListeners = {};\r\n\r\nfunction handleOpenOrDeleteReq (resolve, reject, req) {\r\n  // These things are almost impossible to test with fakeIndexedDB sadly\r\n  /* istanbul ignore next */\r\n  req.onerror = () => reject(req.error);\r\n  /* istanbul ignore next */\r\n  req.onblocked = () => reject(new Error('IDB blocked'));\r\n  req.onsuccess = () => resolve(req.result);\r\n}\r\n\r\nasync function createDatabase (dbName) {\r\n  const db = await new Promise((resolve, reject) => {\r\n    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);\r\n    openIndexedDBRequests[dbName] = req;\r\n    req.onupgradeneeded = e => {\r\n      // Technically there is only one version, so we don't need this `if` check\r\n      // But if an old version of the JS is in another browser tab\r\n      // and it gets upgraded in the future and we have a new DB version, well...\r\n      // better safe than sorry.\r\n      /* istanbul ignore else */\r\n      if (e.oldVersion < DB_VERSION_INITIAL) {\r\n        initialMigration(req.result);\r\n      }\r\n    };\r\n    handleOpenOrDeleteReq(resolve, reject, req);\r\n  });\r\n  // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\r\n  // No need for removeEventListener, because once the DB can no longer\r\n  // fire \"close\" events, it will auto-GC.\r\n  // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50\r\n  /* istanbul ignore next */\r\n  db.onclose = () => closeDatabase(dbName);\r\n  return db\r\n}\r\n\r\nfunction openDatabase (dbName) {\r\n  if (!databaseCache[dbName]) {\r\n    databaseCache[dbName] = createDatabase(dbName);\r\n  }\r\n  return databaseCache[dbName]\r\n}\r\n\r\nfunction dbPromise (db, storeName, readOnlyOrReadWrite, cb) {\r\n  return new Promise((resolve, reject) => {\r\n    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\r\n    // are really irreplaceable data. IndexedDB is just a cache in this case.\r\n    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });\r\n    const store = typeof storeName === 'string'\r\n      ? txn.objectStore(storeName)\r\n      : storeName.map(name => txn.objectStore(name));\r\n    let res;\r\n    cb(store, txn, (result) => {\r\n      res = result;\r\n    });\r\n\r\n    txn.oncomplete = () => resolve(res);\r\n    /* istanbul ignore next */\r\n    txn.onerror = () => reject(txn.error);\r\n  })\r\n}\r\n\r\nfunction closeDatabase (dbName) {\r\n  // close any open requests\r\n  const req = openIndexedDBRequests[dbName];\r\n  const db = req && req.result;\r\n  if (db) {\r\n    db.close();\r\n    const listeners = onCloseListeners[dbName];\r\n    /* istanbul ignore else */\r\n    if (listeners) {\r\n      for (const listener of listeners) {\r\n        listener();\r\n      }\r\n    }\r\n  }\r\n  delete openIndexedDBRequests[dbName];\r\n  delete databaseCache[dbName];\r\n  delete onCloseListeners[dbName];\r\n}\r\n\r\nfunction deleteDatabase (dbName) {\r\n  return new Promise((resolve, reject) => {\r\n    // close any open requests\r\n    closeDatabase(dbName);\r\n    const req = indexedDB.deleteDatabase(dbName);\r\n    handleOpenOrDeleteReq(resolve, reject, req);\r\n  })\r\n}\r\n\r\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\r\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\r\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\r\nfunction addOnCloseListener (dbName, listener) {\r\n  let listeners = onCloseListeners[dbName];\r\n  if (!listeners) {\r\n    listeners = onCloseListeners[dbName] = [];\r\n  }\r\n  listeners.push(listener);\r\n}\r\n\r\n// list of emoticons that don't match a simple \\W+ regex\r\n// extracted using:\r\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\r\nconst irregularEmoticons = new Set([\r\n  ':D', 'XD', \":'D\", 'O:)',\r\n  ':X', ':P', ';P', 'XP',\r\n  ':L', ':Z', ':j', '8D',\r\n  'XO', '8)', ':B', ':O',\r\n  ':S', \":'o\", 'Dx', 'X(',\r\n  'D:', ':C', '>0)', ':3',\r\n  '</3', '<3', '\\\\M/', ':E',\r\n  '8#'\r\n]);\r\n\r\nfunction extractTokens (str) {\r\n  return str\r\n    .split(/[\\s_]+/)\r\n    .map(word => {\r\n      if (!word.match(/\\w/) || irregularEmoticons.has(word)) {\r\n        // for pure emoticons like :) or :-), just leave them as-is\r\n        return word.toLowerCase()\r\n      }\r\n\r\n      return word\r\n        .replace(/[)(:,]/g, '')\r\n        .replace(/’/g, \"'\")\r\n        .toLowerCase()\r\n    }).filter(Boolean)\r\n}\r\n\r\nconst MIN_SEARCH_TEXT_LENGTH = 2;\r\n\r\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\r\n// the input to have already been run through extractTokens(). This is useful for cases like\r\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\r\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\r\n// the user can type ':P' or ':p' and still get the same result.\r\nfunction normalizeTokens (str) {\r\n  return str\r\n    .filter(Boolean)\r\n    .map(_ => _.toLowerCase())\r\n    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)\r\n}\r\n\r\n// Transform emoji data for storage in IDB\r\nfunction transformEmojiData (emojiData) {\r\n  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {\r\n    const tokens = [...new Set(\r\n      normalizeTokens([\r\n        ...(shortcodes || []).map(extractTokens).flat(),\r\n        ...tags.map(extractTokens).flat(),\r\n        ...extractTokens(annotation),\r\n        emoticon\r\n      ])\r\n    )].sort();\r\n    const res = {\r\n      annotation,\r\n      group,\r\n      order,\r\n      tags,\r\n      tokens,\r\n      unicode: emoji,\r\n      version\r\n    };\r\n    if (emoticon) {\r\n      res.emoticon = emoticon;\r\n    }\r\n    if (shortcodes) {\r\n      res.shortcodes = shortcodes;\r\n    }\r\n    if (skins) {\r\n      res.skinTones = [];\r\n      res.skinUnicodes = [];\r\n      res.skinVersions = [];\r\n      for (const { tone, emoji, version } of skins) {\r\n        res.skinTones.push(tone);\r\n        res.skinUnicodes.push(emoji);\r\n        res.skinVersions.push(version);\r\n      }\r\n    }\r\n    return res\r\n  });\r\n  return res\r\n}\r\n\r\n// helper functions that help compress the code better\r\n\r\nfunction callStore (store, method, key, cb) {\r\n  store[method](key).onsuccess = e => (cb && cb(e.target.result));\r\n}\r\n\r\nfunction getIDB (store, key, cb) {\r\n  callStore(store, 'get', key, cb);\r\n}\r\n\r\nfunction getAllIDB (store, key, cb) {\r\n  callStore(store, 'getAll', key, cb);\r\n}\r\n\r\nfunction commit (txn) {\r\n  /* istanbul ignore else */\r\n  if (txn.commit) {\r\n    txn.commit();\r\n  }\r\n}\r\n\r\n// like lodash's minBy\r\nfunction minBy (array, func) {\r\n  let minItem = array[0];\r\n  for (let i = 1; i < array.length; i++) {\r\n    const item = array[i];\r\n    if (func(minItem) > func(item)) {\r\n      minItem = item;\r\n    }\r\n  }\r\n  return minItem\r\n}\r\n\r\n// return an array of results representing all items that are found in each one of the arrays\r\n//\r\n\r\nfunction findCommonMembers (arrays, uniqByFunc) {\r\n  const shortestArray = minBy(arrays, _ => _.length);\r\n  const results = [];\r\n  for (const item of shortestArray) {\r\n    // if this item is included in every array in the intermediate results, add it to the final results\r\n    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {\r\n      results.push(item);\r\n    }\r\n  }\r\n  return results\r\n}\r\n\r\nasync function isEmpty (db) {\r\n  return !(await get(db, STORE_KEYVALUE, KEY_URL))\r\n}\r\n\r\nasync function hasData (db, url, eTag) {\r\n  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]\r\n    .map(key => get(db, STORE_KEYVALUE, key)));\r\n  return (oldETag === eTag && oldUrl === url)\r\n}\r\n\r\nasync function doFullDatabaseScanForSingleResult (db, predicate) {\r\n  // This batching algorithm is just a perf improvement over a basic\r\n  // cursor. The BATCH_SIZE is an estimate of what would give the best\r\n  // perf for doing a full DB scan (worst case).\r\n  //\r\n  // Mini-benchmark for determining the best batch size:\r\n  //\r\n  // PERF=1 yarn build:rollup && yarn test:adhoc\r\n  //\r\n  // (async () => {\r\n  //   performance.mark('start')\r\n  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\r\n  //   performance.measure('total', 'start')\r\n  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\r\n  // })()\r\n  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\r\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\r\n    let lastKey;\r\n\r\n    const processNextBatch = () => {\r\n      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {\r\n        const results = e.target.result;\r\n        for (const result of results) {\r\n          lastKey = result.unicode;\r\n          if (predicate(result)) {\r\n            return cb(result)\r\n          }\r\n        }\r\n        if (results.length < BATCH_SIZE) {\r\n          return cb()\r\n        }\r\n        processNextBatch();\r\n      };\r\n    };\r\n    processNextBatch();\r\n  })\r\n}\r\n\r\nasync function loadData (db, emojiData, url, eTag) {\r\n  try {\r\n    const transformedData = transformEmojiData(emojiData);\r\n    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {\r\n      let oldETag;\r\n      let oldUrl;\r\n      let todo = 0;\r\n\r\n      function checkFetched () {\r\n        if (++todo === 2) { // 2 requests made\r\n          onFetched();\r\n        }\r\n      }\r\n\r\n      function onFetched () {\r\n        if (oldETag === eTag && oldUrl === url) {\r\n          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\r\n          return\r\n        }\r\n        // delete old data\r\n        emojiStore.clear();\r\n        // insert new data\r\n        for (const data of transformedData) {\r\n          emojiStore.put(data);\r\n        }\r\n        metaStore.put(eTag, KEY_ETAG);\r\n        metaStore.put(url, KEY_URL);\r\n        commit(txn);\r\n      }\r\n\r\n      getIDB(metaStore, KEY_ETAG, result => {\r\n        oldETag = result;\r\n        checkFetched();\r\n      });\r\n\r\n      getIDB(metaStore, KEY_URL, result => {\r\n        oldUrl = result;\r\n        checkFetched();\r\n      });\r\n    });\r\n  } finally {\r\n  }\r\n}\r\n\r\nasync function getEmojiByGroup (db, group) {\r\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\r\n    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);\r\n    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);\r\n  })\r\n}\r\n\r\nasync function getEmojiBySearchQuery (db, query) {\r\n  const tokens = normalizeTokens(extractTokens(query));\r\n\r\n  if (!tokens.length) {\r\n    return []\r\n  }\r\n\r\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\r\n    // get all results that contain all tokens (i.e. an AND query)\r\n    const intermediateResults = [];\r\n\r\n    const checkDone = () => {\r\n      if (intermediateResults.length === tokens.length) {\r\n        onDone();\r\n      }\r\n    };\r\n\r\n    const onDone = () => {\r\n      const results = findCommonMembers(intermediateResults, _ => _.unicode);\r\n      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));\r\n    };\r\n\r\n    for (let i = 0; i < tokens.length; i++) {\r\n      const token = tokens[i];\r\n      const range = i === tokens.length - 1\r\n        ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\r\n        : IDBKeyRange.only(token); // treat all other tokens as an exact match\r\n      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {\r\n        intermediateResults.push(result);\r\n        checkDone();\r\n      });\r\n    }\r\n  })\r\n}\r\n\r\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\r\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\r\nasync function getEmojiByShortcode (db, shortcode) {\r\n  const emojis = await getEmojiBySearchQuery(db, shortcode);\r\n\r\n  // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\r\n  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\r\n  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\r\n  // index on shortcodes.\r\n\r\n  if (!emojis.length) {\r\n    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));\r\n    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null\r\n  }\r\n\r\n  return emojis.filter(_ => {\r\n    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());\r\n    return lowerShortcodes.includes(shortcode.toLowerCase())\r\n  })[0] || null\r\n}\r\n\r\nasync function getEmojiByUnicode (db, unicode) {\r\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (\r\n    getIDB(emojiStore, unicode, result => {\r\n      if (result) {\r\n        return cb(result)\r\n      }\r\n      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));\r\n    })\r\n  ))\r\n}\r\n\r\nfunction get (db, storeName, key) {\r\n  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (\r\n    getIDB(store, key, cb)\r\n  ))\r\n}\r\n\r\nfunction set (db, storeName, key, value) {\r\n  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {\r\n    store.put(value, key);\r\n    commit(txn);\r\n  })\r\n}\r\n\r\nfunction incrementFavoriteEmojiCount (db, unicode) {\r\n  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (\r\n    getIDB(store, unicode, result => {\r\n      store.put((result || 0) + 1, unicode);\r\n      commit(txn);\r\n    })\r\n  ))\r\n}\r\n\r\nfunction getTopFavoriteEmoji (db, customEmojiIndex, limit) {\r\n  if (limit === 0) {\r\n    return []\r\n  }\r\n  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {\r\n    const results = [];\r\n    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {\r\n      const cursor = e.target.result;\r\n      if (!cursor) { // no more results\r\n        return cb(results)\r\n      }\r\n\r\n      function addResult (result) {\r\n        results.push(result);\r\n        if (results.length === limit) {\r\n          return cb(results) // done, reached the limit\r\n        }\r\n        cursor.continue();\r\n      }\r\n\r\n      const unicodeOrName = cursor.primaryKey;\r\n      const custom = customEmojiIndex.byName(unicodeOrName);\r\n      if (custom) {\r\n        return addResult(custom)\r\n      }\r\n      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\r\n      // but my testing suggests it's not actually faster.\r\n      getIDB(emojiStore, unicodeOrName, emoji => {\r\n        if (emoji) {\r\n          return addResult(emoji)\r\n        }\r\n        // emoji not found somehow, ignore (may happen if custom emoji change)\r\n        cursor.continue();\r\n      });\r\n    };\r\n  })\r\n}\r\n\r\n// trie data structure for prefix searches\r\n// loosely based on https://github.com/nolanlawson/substring-trie\r\n\r\nconst CODA_MARKER = ''; // marks the end of the string\r\n\r\nfunction trie (arr, itemToTokens) {\r\n  const map = new Map();\r\n  for (const item of arr) {\r\n    const tokens = itemToTokens(item);\r\n    for (const token of tokens) {\r\n      let currentMap = map;\r\n      for (let i = 0; i < token.length; i++) {\r\n        const char = token.charAt(i);\r\n        let nextMap = currentMap.get(char);\r\n        if (!nextMap) {\r\n          nextMap = new Map();\r\n          currentMap.set(char, nextMap);\r\n        }\r\n        currentMap = nextMap;\r\n      }\r\n      let valuesAtCoda = currentMap.get(CODA_MARKER);\r\n      if (!valuesAtCoda) {\r\n        valuesAtCoda = [];\r\n        currentMap.set(CODA_MARKER, valuesAtCoda);\r\n      }\r\n      valuesAtCoda.push(item);\r\n    }\r\n  }\r\n\r\n  const search = (query, exact) => {\r\n    let currentMap = map;\r\n    for (let i = 0; i < query.length; i++) {\r\n      const char = query.charAt(i);\r\n      const nextMap = currentMap.get(char);\r\n      if (nextMap) {\r\n        currentMap = nextMap;\r\n      } else {\r\n        return []\r\n      }\r\n    }\r\n\r\n    if (exact) {\r\n      const results = currentMap.get(CODA_MARKER);\r\n      return results || []\r\n    }\r\n\r\n    const results = [];\r\n    // traverse\r\n    const queue = [currentMap];\r\n    while (queue.length) {\r\n      const currentMap = queue.shift();\r\n      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);\r\n      for (const [key, value] of entriesSortedByKey) {\r\n        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string\r\n          results.push(...value);\r\n        } else {\r\n          queue.push(value);\r\n        }\r\n      }\r\n    }\r\n    return results\r\n  };\r\n\r\n  return search\r\n}\r\n\r\nconst requiredKeys$1 = [\r\n  'name',\r\n  'url'\r\n];\r\n\r\nfunction assertCustomEmojis (customEmojis) {\r\n  const isArray = customEmojis && Array.isArray(customEmojis);\r\n  const firstItemIsFaulty = isArray &&\r\n    customEmojis.length &&\r\n    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));\r\n  if (!isArray || firstItemIsFaulty) {\r\n    throw new Error('Custom emojis are in the wrong format')\r\n  }\r\n}\r\n\r\nfunction customEmojiIndex (customEmojis) {\r\n  assertCustomEmojis(customEmojis);\r\n\r\n  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\r\n\r\n  //\r\n  // all()\r\n  //\r\n  const all = customEmojis.sort(sortByName);\r\n\r\n  //\r\n  // search()\r\n  //\r\n  const emojiToTokens = emoji => (\r\n    [...new Set((emoji.shortcodes || []).map(shortcode => extractTokens(shortcode)).flat())]\r\n  );\r\n  const searchTrie = trie(customEmojis, emojiToTokens);\r\n  const searchByExactMatch = _ => searchTrie(_, true);\r\n  const searchByPrefix = _ => searchTrie(_, false);\r\n\r\n  // Search by query for custom emoji. Similar to how we do this in IDB, the last token\r\n  // is treated as a prefix search, but every other one is treated as an exact match.\r\n  // Then we AND the results together\r\n  const search = query => {\r\n    const tokens = extractTokens(query);\r\n    const intermediateResults = tokens.map((token, i) => (\r\n      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)\r\n    ));\r\n    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)\r\n  };\r\n\r\n  //\r\n  // byShortcode, byName\r\n  //\r\n  const shortcodeToEmoji = new Map();\r\n  const nameToEmoji = new Map();\r\n  for (const customEmoji of customEmojis) {\r\n    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\r\n    for (const shortcode of (customEmoji.shortcodes || [])) {\r\n      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\r\n    }\r\n  }\r\n\r\n  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());\r\n  const byName = name => nameToEmoji.get(name.toLowerCase());\r\n\r\n  return {\r\n    all,\r\n    search,\r\n    byShortcode,\r\n    byName\r\n  }\r\n}\r\n\r\nconst isFirefoxContentScript = typeof wrappedJSObject !== 'undefined';\r\n\r\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\r\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\r\nfunction cleanEmoji (emoji) {\r\n  if (!emoji) {\r\n    return emoji\r\n  }\r\n  // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\r\n  // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\r\n  /* istanbul ignore if */\r\n  if (isFirefoxContentScript) {\r\n    emoji = structuredClone(emoji);\r\n  }\r\n  delete emoji.tokens;\r\n  if (emoji.skinTones) {\r\n    const len = emoji.skinTones.length;\r\n    emoji.skins = Array(len);\r\n    for (let i = 0; i < len; i++) {\r\n      emoji.skins[i] = {\r\n        tone: emoji.skinTones[i],\r\n        unicode: emoji.skinUnicodes[i],\r\n        version: emoji.skinVersions[i]\r\n      };\r\n    }\r\n    delete emoji.skinTones;\r\n    delete emoji.skinUnicodes;\r\n    delete emoji.skinVersions;\r\n  }\r\n  return emoji\r\n}\r\n\r\nfunction warnETag (eTag) {\r\n  if (!eTag) {\r\n    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\r\n  }\r\n}\r\n\r\nconst requiredKeys = [\r\n  'annotation',\r\n  'emoji',\r\n  'group',\r\n  'order',\r\n  'tags',\r\n  'version'\r\n];\r\n\r\nfunction assertEmojiData (emojiData) {\r\n  if (!emojiData ||\r\n    !Array.isArray(emojiData) ||\r\n    !emojiData[0] ||\r\n    (typeof emojiData[0] !== 'object') ||\r\n    requiredKeys.some(key => (!(key in emojiData[0])))) {\r\n    throw new Error('Emoji data is in the wrong format')\r\n  }\r\n}\r\n\r\nfunction assertStatus (response, dataSource) {\r\n  if (Math.floor(response.status / 100) !== 2) {\r\n    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)\r\n  }\r\n}\r\n\r\nasync function getETag (dataSource) {\r\n  const response = await fetch(dataSource, { method: 'HEAD' });\r\n  assertStatus(response, dataSource);\r\n  const eTag = response.headers.get('etag');\r\n  warnETag(eTag);\r\n  return eTag\r\n}\r\n\r\nasync function getETagAndData (dataSource) {\r\n  const response = await fetch(dataSource);\r\n  assertStatus(response, dataSource);\r\n  const eTag = response.headers.get('etag');\r\n  warnETag(eTag);\r\n  const emojiData = await response.json();\r\n  assertEmojiData(emojiData);\r\n  return [eTag, emojiData]\r\n}\r\n\r\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\r\n// even with --excludePrivate ¯\\_(ツ)_/¯\r\n/** @private */\r\n/**\r\n * Convert an `ArrayBuffer` to a binary string.\r\n *\r\n * Example:\r\n *\r\n * ```js\r\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\r\n * ```\r\n *\r\n * @param buffer - array buffer\r\n * @returns binary string\r\n */\r\nfunction arrayBufferToBinaryString(buffer) {\r\n    var binary = '';\r\n    var bytes = new Uint8Array(buffer);\r\n    var length = bytes.byteLength;\r\n    var i = -1;\r\n    while (++i < length) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return binary;\r\n}\r\n/**\r\n * Convert a binary string to an `ArrayBuffer`.\r\n *\r\n * ```js\r\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\r\n * ```\r\n *\r\n * @param binary - binary string\r\n * @returns array buffer\r\n */\r\nfunction binaryStringToArrayBuffer(binary) {\r\n    var length = binary.length;\r\n    var buf = new ArrayBuffer(length);\r\n    var arr = new Uint8Array(buf);\r\n    var i = -1;\r\n    while (++i < length) {\r\n        arr[i] = binary.charCodeAt(i);\r\n    }\r\n    return buf;\r\n}\r\n\r\n// generate a checksum based on the stringified JSON\r\nasync function jsonChecksum (object) {\r\n  const inString = JSON.stringify(object);\r\n  const inBuffer = binaryStringToArrayBuffer(inString);\r\n  // this does not need to be cryptographically secure, SHA-1 is fine\r\n  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\r\n  const outBinString = arrayBufferToBinaryString(outBuffer);\r\n  const res = btoa(outBinString);\r\n  return res\r\n}\r\n\r\nasync function checkForUpdates (db, dataSource) {\r\n  // just do a simple HEAD request first to see if the eTags match\r\n  let emojiData;\r\n  let eTag = await getETag(dataSource);\r\n  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers\r\n    const eTagAndData = await getETagAndData(dataSource);\r\n    eTag = eTagAndData[0];\r\n    emojiData = eTagAndData[1];\r\n    if (!eTag) {\r\n      eTag = await jsonChecksum(emojiData);\r\n    }\r\n  }\r\n  if (await hasData(db, dataSource, eTag)) ; else {\r\n    if (!emojiData) {\r\n      const eTagAndData = await getETagAndData(dataSource);\r\n      emojiData = eTagAndData[1];\r\n    }\r\n    await loadData(db, emojiData, dataSource, eTag);\r\n  }\r\n}\r\n\r\nasync function loadDataForFirstTime (db, dataSource) {\r\n  let [eTag, emojiData] = await getETagAndData(dataSource);\r\n  if (!eTag) {\r\n    // Handle lack of support for ETag or Access-Control-Expose-Headers\r\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\r\n    eTag = await jsonChecksum(emojiData);\r\n  }\r\n\r\n  await loadData(db, emojiData, dataSource, eTag);\r\n}\r\n\r\nclass Database {\r\n  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {\r\n    this.dataSource = dataSource;\r\n    this.locale = locale;\r\n    this._dbName = `emoji-picker-element-${this.locale}`;\r\n    this._db = undefined;\r\n    this._lazyUpdate = undefined;\r\n    this._custom = customEmojiIndex(customEmoji);\r\n\r\n    this._clear = this._clear.bind(this);\r\n    this._ready = this._init();\r\n  }\r\n\r\n  async _init () {\r\n    const db = this._db = await openDatabase(this._dbName);\r\n\r\n    addOnCloseListener(this._dbName, this._clear);\r\n    const dataSource = this.dataSource;\r\n    const empty = await isEmpty(db);\r\n\r\n    if (empty) {\r\n      await loadDataForFirstTime(db, dataSource);\r\n    } else { // offline-first - do an update asynchronously\r\n      this._lazyUpdate = checkForUpdates(db, dataSource);\r\n    }\r\n  }\r\n\r\n  async ready () {\r\n    const checkReady = async () => {\r\n      if (!this._ready) {\r\n        this._ready = this._init();\r\n      }\r\n      return this._ready\r\n    };\r\n    await checkReady();\r\n    // There's a possibility of a race condition where the element gets added, removed, and then added again\r\n    // with a particular timing, which would set the _db to undefined.\r\n    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\r\n    if (!this._db) {\r\n      await checkReady();\r\n    }\r\n  }\r\n\r\n  async getEmojiByGroup (group) {\r\n    assertNumber(group);\r\n    await this.ready();\r\n    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)\r\n  }\r\n\r\n  async getEmojiBySearchQuery (query) {\r\n    assertNonEmptyString(query);\r\n    await this.ready();\r\n    const customs = this._custom.search(query);\r\n    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);\r\n    return [\r\n      ...customs,\r\n      ...natives\r\n    ]\r\n  }\r\n\r\n  async getEmojiByShortcode (shortcode) {\r\n    assertNonEmptyString(shortcode);\r\n    await this.ready();\r\n    const custom = this._custom.byShortcode(shortcode);\r\n    if (custom) {\r\n      return custom\r\n    }\r\n    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))\r\n  }\r\n\r\n  async getEmojiByUnicodeOrName (unicodeOrName) {\r\n    assertNonEmptyString(unicodeOrName);\r\n    await this.ready();\r\n    const custom = this._custom.byName(unicodeOrName);\r\n    if (custom) {\r\n      return custom\r\n    }\r\n    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))\r\n  }\r\n\r\n  async getPreferredSkinTone () {\r\n    await this.ready();\r\n    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0\r\n  }\r\n\r\n  async setPreferredSkinTone (skinTone) {\r\n    assertNumber(skinTone);\r\n    await this.ready();\r\n    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)\r\n  }\r\n\r\n  async incrementFavoriteEmojiCount (unicodeOrName) {\r\n    assertNonEmptyString(unicodeOrName);\r\n    await this.ready();\r\n    return incrementFavoriteEmojiCount(this._db, unicodeOrName)\r\n  }\r\n\r\n  async getTopFavoriteEmoji (limit) {\r\n    assertNumber(limit);\r\n    await this.ready();\r\n    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)\r\n  }\r\n\r\n  set customEmoji (customEmojis) {\r\n    this._custom = customEmojiIndex(customEmojis);\r\n  }\r\n\r\n  get customEmoji () {\r\n    return this._custom.all\r\n  }\r\n\r\n  async _shutdown () {\r\n    await this.ready(); // reopen if we've already been closed/deleted\r\n    try {\r\n      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\r\n    } catch (err) { /* ignore network errors (offline-first) */ }\r\n  }\r\n\r\n  // clear references to IDB, e.g. during a close event\r\n  _clear () {\r\n    // We don't need to call removeEventListener or remove the manual \"close\" listeners.\r\n    // The memory leak tests prove this is unnecessary. It's because:\r\n    // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\r\n    // 2) we clear the manual close listeners in databaseLifecycle.js.\r\n    this._db = this._ready = this._lazyUpdate = undefined;\r\n  }\r\n\r\n  async close () {\r\n    await this._shutdown();\r\n    await closeDatabase(this._dbName);\r\n  }\r\n\r\n  async delete () {\r\n    await this._shutdown();\r\n    await deleteDatabase(this._dbName);\r\n  }\r\n}\r\n\r\nexport { Database as default };\r\n", "import Database from './database.js';\r\n\r\n/** @returns {void} */\r\nfunction noop() {}\r\n\r\nfunction run(fn) {\r\n\treturn fn();\r\n}\r\n\r\nfunction blank_object() {\r\n\treturn Object.create(null);\r\n}\r\n\r\n/**\r\n * @param {Function[]} fns\r\n * @returns {void}\r\n */\r\nfunction run_all(fns) {\r\n\tfns.forEach(run);\r\n}\r\n\r\n/**\r\n * @param {any} thing\r\n * @returns {thing is Function}\r\n */\r\nfunction is_function(thing) {\r\n\treturn typeof thing === 'function';\r\n}\r\n\r\n/** @returns {boolean} */\r\nfunction safe_not_equal(a, b) {\r\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\r\n}\r\n\r\nlet src_url_equal_anchor;\r\n\r\n/**\r\n * @param {string} element_src\r\n * @param {string} url\r\n * @returns {boolean}\r\n */\r\nfunction src_url_equal(element_src, url) {\r\n\tif (element_src === url) return true;\r\n\tif (!src_url_equal_anchor) {\r\n\t\tsrc_url_equal_anchor = document.createElement('a');\r\n\t}\r\n\t// This is actually faster than doing URL(..).href\r\n\tsrc_url_equal_anchor.href = url;\r\n\treturn element_src === src_url_equal_anchor.href;\r\n}\r\n\r\n/** @returns {boolean} */\r\nfunction is_empty(obj) {\r\n\treturn Object.keys(obj).length === 0;\r\n}\r\n\r\nfunction action_destroyer(action_result) {\r\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\r\n}\r\n\r\n/** @type {typeof globalThis} */\r\nconst globals =\r\n\ttypeof window !== 'undefined'\r\n\t\t? window\r\n\t\t: typeof globalThis !== 'undefined'\r\n\t\t? globalThis\r\n\t\t: // @ts-ignore Node typings have this\r\n\t\t  global;\r\n\r\n/**\r\n * @param {Node} target\r\n * @param {Node} node\r\n * @returns {void}\r\n */\r\nfunction append(target, node) {\r\n\ttarget.appendChild(node);\r\n}\r\n\r\n/**\r\n * @param {Node} target\r\n * @param {Node} node\r\n * @param {Node} [anchor]\r\n * @returns {void}\r\n */\r\nfunction insert(target, node, anchor) {\r\n\ttarget.insertBefore(node, anchor || null);\r\n}\r\n\r\n/**\r\n * @param {Node} node\r\n * @returns {void}\r\n */\r\nfunction detach(node) {\r\n\tif (node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\n/**\r\n * @template {keyof HTMLElementTagNameMap} K\r\n * @param {K} name\r\n * @returns {HTMLElementTagNameMap[K]}\r\n */\r\nfunction element(name) {\r\n\treturn document.createElement(name);\r\n}\r\n\r\n/**\r\n * @param {string} data\r\n * @returns {Text}\r\n */\r\nfunction text(data) {\r\n\treturn document.createTextNode(data);\r\n}\r\n\r\n/**\r\n * @param {EventTarget} node\r\n * @param {string} event\r\n * @param {EventListenerOrEventListenerObject} handler\r\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\r\n * @returns {() => void}\r\n */\r\nfunction listen(node, event, handler, options) {\r\n\tnode.addEventListener(event, handler, options);\r\n\treturn () => node.removeEventListener(event, handler, options);\r\n}\r\n\r\n/**\r\n * @param {Element} node\r\n * @param {string} attribute\r\n * @param {string} [value]\r\n * @returns {void}\r\n */\r\nfunction attr(node, attribute, value) {\r\n\tif (value == null) node.removeAttribute(attribute);\r\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\r\n}\r\n\r\n/**\r\n * @param {Text} text\r\n * @param {unknown} data\r\n * @returns {void}\r\n */\r\nfunction set_data(text, data) {\r\n\tdata = '' + data;\r\n\tif (text.data === data) return;\r\n\ttext.data = /** @type {string} */ (data);\r\n}\r\n\r\n/**\r\n * @returns {void} */\r\nfunction set_input_value(input, value) {\r\n\tinput.value = value == null ? '' : value;\r\n}\r\n\r\n/**\r\n * @returns {void} */\r\nfunction set_style(node, key, value, important) {\r\n\tif (value == null) {\r\n\t\tnode.style.removeProperty(key);\r\n\t} else {\r\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\r\n\t}\r\n}\r\n\r\n/**\r\n * @typedef {Node & {\r\n * \tclaim_order?: number;\r\n * \thydrate_init?: true;\r\n * \tactual_end_child?: NodeEx;\r\n * \tchildNodes: NodeListOf<NodeEx>;\r\n * }} NodeEx\r\n */\r\n\r\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\r\n\r\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\r\n\r\n/**\r\n * @typedef {ChildNodeEx[] & {\r\n * \tclaim_info?: {\r\n * \t\tlast_index: number;\r\n * \t\ttotal_claimed: number;\r\n * \t};\r\n * }} ChildNodeArray\r\n */\r\n\r\nlet current_component;\r\n\r\n/** @returns {void} */\r\nfunction set_current_component(component) {\r\n\tcurrent_component = component;\r\n}\r\n\r\nconst dirty_components = [];\r\nconst binding_callbacks = [];\r\n\r\nlet render_callbacks = [];\r\n\r\nconst flush_callbacks = [];\r\n\r\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\r\n\r\nlet update_scheduled = false;\r\n\r\n/** @returns {void} */\r\nfunction schedule_update() {\r\n\tif (!update_scheduled) {\r\n\t\tupdate_scheduled = true;\r\n\t\tresolved_promise.then(flush);\r\n\t}\r\n}\r\n\r\n/** @returns {void} */\r\nfunction add_render_callback(fn) {\r\n\trender_callbacks.push(fn);\r\n}\r\n\r\n// flush() calls callbacks in this order:\r\n// 1. All beforeUpdate callbacks, in order: parents before children\r\n// 2. All bind:this callbacks, in reverse order: children before parents.\r\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\r\n//    for afterUpdates called during the initial onMount, which are called in\r\n//    reverse order: children before parents.\r\n// Since callbacks might update component values, which could trigger another\r\n// call to flush(), the following steps guard against this:\r\n// 1. During beforeUpdate, any updated components will be added to the\r\n//    dirty_components array and will cause a reentrant call to flush(). Because\r\n//    the flush index is kept outside the function, the reentrant call will pick\r\n//    up where the earlier call left off and go through all dirty components. The\r\n//    current_component value is saved and restored so that the reentrant call will\r\n//    not interfere with the \"parent\" flush() call.\r\n// 2. bind:this callbacks cannot trigger new flush() calls.\r\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\r\n//    callback called a second time; the seen_callbacks set, outside the flush()\r\n//    function, guarantees this behavior.\r\nconst seen_callbacks = new Set();\r\n\r\nlet flushidx = 0; // Do *not* move this inside the flush() function\r\n\r\n/** @returns {void} */\r\nfunction flush() {\r\n\t// Do not reenter flush while dirty components are updated, as this can\r\n\t// result in an infinite loop. Instead, let the inner flush handle it.\r\n\t// Reentrancy is ok afterwards for bindings etc.\r\n\tif (flushidx !== 0) {\r\n\t\treturn;\r\n\t}\r\n\tconst saved_component = current_component;\r\n\tdo {\r\n\t\t// first, call beforeUpdate functions\r\n\t\t// and update components\r\n\t\ttry {\r\n\t\t\twhile (flushidx < dirty_components.length) {\r\n\t\t\t\tconst component = dirty_components[flushidx];\r\n\t\t\t\tflushidx++;\r\n\t\t\t\tset_current_component(component);\r\n\t\t\t\tupdate(component.$$);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\r\n\t\t\tdirty_components.length = 0;\r\n\t\t\tflushidx = 0;\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\tset_current_component(null);\r\n\t\tdirty_components.length = 0;\r\n\t\tflushidx = 0;\r\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\r\n\t\t// then, once components are updated, call\r\n\t\t// afterUpdate functions. This may cause\r\n\t\t// subsequent updates...\r\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\r\n\t\t\tconst callback = render_callbacks[i];\r\n\t\t\tif (!seen_callbacks.has(callback)) {\r\n\t\t\t\t// ...so guard against infinite loops\r\n\t\t\t\tseen_callbacks.add(callback);\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\t\trender_callbacks.length = 0;\r\n\t} while (dirty_components.length);\r\n\twhile (flush_callbacks.length) {\r\n\t\tflush_callbacks.pop()();\r\n\t}\r\n\tupdate_scheduled = false;\r\n\tseen_callbacks.clear();\r\n\tset_current_component(saved_component);\r\n}\r\n\r\n/** @returns {void} */\r\nfunction update($$) {\r\n\tif ($$.fragment !== null) {\r\n\t\t$$.update();\r\n\t\trun_all($$.before_update);\r\n\t\tconst dirty = $$.dirty;\r\n\t\t$$.dirty = [-1];\r\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\r\n\t\t$$.after_update.forEach(add_render_callback);\r\n\t}\r\n}\r\n\r\n/**\r\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\r\n * @param {Function[]} fns\r\n * @returns {void}\r\n */\r\nfunction flush_render_callbacks(fns) {\r\n\tconst filtered = [];\r\n\tconst targets = [];\r\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\r\n\ttargets.forEach((c) => c());\r\n\trender_callbacks = filtered;\r\n}\r\n\r\nconst outroing = new Set();\r\n\r\n/**\r\n * @param {import('./private.js').Fragment} block\r\n * @param {0 | 1} [local]\r\n * @returns {void}\r\n */\r\nfunction transition_in(block, local) {\r\n\tif (block && block.i) {\r\n\t\toutroing.delete(block);\r\n\t\tblock.i(local);\r\n\t}\r\n}\r\n\r\n/** @typedef {1} INTRO */\r\n/** @typedef {0} OUTRO */\r\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\r\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\r\n\r\n/**\r\n * @typedef {Object} Outro\r\n * @property {number} r\r\n * @property {Function[]} c\r\n * @property {Object} p\r\n */\r\n\r\n/**\r\n * @typedef {Object} PendingProgram\r\n * @property {number} start\r\n * @property {INTRO|OUTRO} b\r\n * @property {Outro} [group]\r\n */\r\n\r\n/**\r\n * @typedef {Object} Program\r\n * @property {number} a\r\n * @property {INTRO|OUTRO} b\r\n * @property {1|-1} d\r\n * @property {number} duration\r\n * @property {number} start\r\n * @property {number} end\r\n * @property {Outro} [group]\r\n */\r\n\r\n// general each functions:\r\n\r\nfunction ensure_array_like(array_like_or_iterator) {\r\n\treturn array_like_or_iterator && array_like_or_iterator.length !== undefined\r\n\t\t? array_like_or_iterator\r\n\t\t: Array.from(array_like_or_iterator);\r\n}\r\n\r\n// keyed each functions:\r\n\r\n/** @returns {void} */\r\nfunction destroy_block(block, lookup) {\r\n\tblock.d(1);\r\n\tlookup.delete(block.key);\r\n}\r\n\r\n/** @returns {any[]} */\r\nfunction update_keyed_each(\r\n\told_blocks,\r\n\tdirty,\r\n\tget_key,\r\n\tdynamic,\r\n\tctx,\r\n\tlist,\r\n\tlookup,\r\n\tnode,\r\n\tdestroy,\r\n\tcreate_each_block,\r\n\tnext,\r\n\tget_context\r\n) {\r\n\tlet o = old_blocks.length;\r\n\tlet n = list.length;\r\n\tlet i = o;\r\n\tconst old_indexes = {};\r\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\r\n\tconst new_blocks = [];\r\n\tconst new_lookup = new Map();\r\n\tconst deltas = new Map();\r\n\tconst updates = [];\r\n\ti = n;\r\n\twhile (i--) {\r\n\t\tconst child_ctx = get_context(ctx, list, i);\r\n\t\tconst key = get_key(child_ctx);\r\n\t\tlet block = lookup.get(key);\r\n\t\tif (!block) {\r\n\t\t\tblock = create_each_block(key, child_ctx);\r\n\t\t\tblock.c();\r\n\t\t} else if (dynamic) {\r\n\t\t\t// defer updates until all the DOM shuffling is done\r\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\r\n\t\t}\r\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\r\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\r\n\t}\r\n\tconst will_move = new Set();\r\n\tconst did_move = new Set();\r\n\t/** @returns {void} */\r\n\tfunction insert(block) {\r\n\t\ttransition_in(block, 1);\r\n\t\tblock.m(node, next);\r\n\t\tlookup.set(block.key, block);\r\n\t\tnext = block.first;\r\n\t\tn--;\r\n\t}\r\n\twhile (o && n) {\r\n\t\tconst new_block = new_blocks[n - 1];\r\n\t\tconst old_block = old_blocks[o - 1];\r\n\t\tconst new_key = new_block.key;\r\n\t\tconst old_key = old_block.key;\r\n\t\tif (new_block === old_block) {\r\n\t\t\t// do nothing\r\n\t\t\tnext = new_block.first;\r\n\t\t\to--;\r\n\t\t\tn--;\r\n\t\t} else if (!new_lookup.has(old_key)) {\r\n\t\t\t// remove old block\r\n\t\t\tdestroy(old_block, lookup);\r\n\t\t\to--;\r\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\r\n\t\t\tinsert(new_block);\r\n\t\t} else if (did_move.has(old_key)) {\r\n\t\t\to--;\r\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\r\n\t\t\tdid_move.add(new_key);\r\n\t\t\tinsert(new_block);\r\n\t\t} else {\r\n\t\t\twill_move.add(old_key);\r\n\t\t\to--;\r\n\t\t}\r\n\t}\r\n\twhile (o--) {\r\n\t\tconst old_block = old_blocks[o];\r\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\r\n\t}\r\n\twhile (n) insert(new_blocks[n - 1]);\r\n\trun_all(updates);\r\n\treturn new_blocks;\r\n}\r\n\r\n/** @returns {void} */\r\nfunction mount_component(component, target, anchor) {\r\n\tconst { fragment, after_update } = component.$$;\r\n\tfragment && fragment.m(target, anchor);\r\n\t// onMount happens before the initial afterUpdate\r\n\tadd_render_callback(() => {\r\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\r\n\t\t// if the component was destroyed immediately\r\n\t\t// it will update the `$$.on_destroy` reference to `null`.\r\n\t\t// the destructured on_destroy may still reference to the old array\r\n\t\tif (component.$$.on_destroy) {\r\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\r\n\t\t} else {\r\n\t\t\t// Edge case - component was destroyed immediately,\r\n\t\t\t// most likely as a result of a binding initialising\r\n\t\t\trun_all(new_on_destroy);\r\n\t\t}\r\n\t\tcomponent.$$.on_mount = [];\r\n\t});\r\n\tafter_update.forEach(add_render_callback);\r\n}\r\n\r\n/** @returns {void} */\r\nfunction destroy_component(component, detaching) {\r\n\tconst $$ = component.$$;\r\n\tif ($$.fragment !== null) {\r\n\t\tflush_render_callbacks($$.after_update);\r\n\t\trun_all($$.on_destroy);\r\n\t\t$$.fragment && $$.fragment.d(detaching);\r\n\t\t// TODO null out other refs, including component.$$ (but need to\r\n\t\t// preserve final state?)\r\n\t\t$$.on_destroy = $$.fragment = null;\r\n\t\t$$.ctx = [];\r\n\t}\r\n}\r\n\r\n/** @returns {void} */\r\nfunction make_dirty(component, i) {\r\n\tif (component.$$.dirty[0] === -1) {\r\n\t\tdirty_components.push(component);\r\n\t\tschedule_update();\r\n\t\tcomponent.$$.dirty.fill(0);\r\n\t}\r\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\r\n}\r\n\r\n// TODO: Document the other params\r\n/**\r\n * @param {SvelteComponent} component\r\n * @param {import('./public.js').ComponentConstructorOptions} options\r\n *\r\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\r\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\r\n * This will be the `add_css` function from the compiled component.\r\n *\r\n * @returns {void}\r\n */\r\nfunction init(\r\n\tcomponent,\r\n\toptions,\r\n\tinstance,\r\n\tcreate_fragment,\r\n\tnot_equal,\r\n\tprops,\r\n\tappend_styles = null,\r\n\tdirty = [-1]\r\n) {\r\n\tconst parent_component = current_component;\r\n\tset_current_component(component);\r\n\t/** @type {import('./private.js').T$$} */\r\n\tconst $$ = (component.$$ = {\r\n\t\tfragment: null,\r\n\t\tctx: [],\r\n\t\t// state\r\n\t\tprops,\r\n\t\tupdate: noop,\r\n\t\tnot_equal,\r\n\t\tbound: blank_object(),\r\n\t\t// lifecycle\r\n\t\ton_mount: [],\r\n\t\ton_destroy: [],\r\n\t\ton_disconnect: [],\r\n\t\tbefore_update: [],\r\n\t\tafter_update: [],\r\n\t\tcontext: new Map((parent_component ? parent_component.$$.context : [])),\r\n\t\t// everything else\r\n\t\tcallbacks: blank_object(),\r\n\t\tdirty,\r\n\t\tskip_bound: false,\r\n\t\troot: options.target || parent_component.$$.root\r\n\t});\r\n\tappend_styles && append_styles($$.root);\r\n\tlet ready = false;\r\n\t$$.ctx = instance\r\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\r\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\r\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\r\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\r\n\t\t\t\t\tif (ready) make_dirty(component, i);\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t  })\r\n\t\t: [];\r\n\t$$.update();\r\n\tready = true;\r\n\trun_all($$.before_update);\r\n\t// `false` as a special case of no DOM component\r\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\r\n\tif (options.target) {\r\n\t\t{\r\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n\t\t\t$$.fragment && $$.fragment.c();\r\n\t\t}\r\n\t\tmount_component(component, options.target, undefined);\r\n\t\tflush();\r\n\t}\r\n\tset_current_component(parent_component);\r\n}\r\n\r\n/**\r\n * Base class for Svelte components. Used when dev=false.\r\n *\r\n * @template {Record<string, any>} [Props=any]\r\n * @template {Record<string, any>} [Events=any]\r\n */\r\nclass SvelteComponent {\r\n\t/**\r\n\t * ### PRIVATE API\r\n\t *\r\n\t * Do not use, may change at any time\r\n\t *\r\n\t * @type {any}\r\n\t */\r\n\t\r\n\t/**\r\n\t * ### PRIVATE API\r\n\t *\r\n\t * Do not use, may change at any time\r\n\t *\r\n\t * @type {any}\r\n\t */\r\n\t\r\n\r\n\t/** @returns {void} */\r\n\t$destroy() {\r\n\t\tdestroy_component(this, 1);\r\n\t\tthis.$destroy = noop;\r\n\t}\r\n\r\n\t/**\r\n\t * @template {Extract<keyof Events, string>} K\r\n\t * @param {K} type\r\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\r\n\t * @returns {() => void}\r\n\t */\r\n\t$on(type, callback) {\r\n\t\tif (!is_function(callback)) {\r\n\t\t\treturn noop;\r\n\t\t}\r\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\r\n\t\tcallbacks.push(callback);\r\n\t\treturn () => {\r\n\t\t\tconst index = callbacks.indexOf(callback);\r\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Partial<Props>} props\r\n\t * @returns {void}\r\n\t */\r\n\t$set(props) {\r\n\t\tif (this.$$set && !is_empty(props)) {\r\n\t\t\tthis.$$.skip_bound = true;\r\n\t\t\tthis.$$set(props);\r\n\t\t\tthis.$$.skip_bound = false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @typedef {Object} CustomElementPropDefinition\r\n * @property {string} [attribute]\r\n * @property {boolean} [reflect]\r\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\r\n */\r\n\r\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\r\nconst allGroups = [\r\n  [-1, '✨', 'custom'],\r\n  [0, '😀', 'smileys-emotion'],\r\n  [1, '👋', 'people-body'],\r\n  [3, '🐱', 'animals-nature'],\r\n  [4, '🍎', 'food-drink'],\r\n  [5, '🏠️', 'travel-places'],\r\n  [6, '⚽', 'activities'],\r\n  [7, '📝', 'objects'],\r\n  [8, '⛔️', 'symbols'],\r\n  [9, '🏁', 'flags']\r\n].map(([id, emoji, name]) => ({ id, emoji, name }));\r\n\r\nconst groups = allGroups.slice(1);\r\nconst customGroup = allGroups[0];\r\n\r\nconst MIN_SEARCH_TEXT_LENGTH = 2;\r\nconst NUM_SKIN_TONES = 6;\r\n\r\n/* istanbul ignore next */\r\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\r\n\r\n// check for ZWJ (zero width joiner) character\r\nfunction hasZwj (emoji) {\r\n  return emoji.unicode.includes('\\u200d')\r\n}\r\n\r\n// Find one good representative emoji from each version to test by checking its color.\r\n// Ideally it should have color in the center. For some inspiration, see:\r\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\r\n//\r\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\r\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\r\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\r\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\r\n// which happens in checkZwjSupport.js.\r\nconst versionsAndTestEmoji = {\r\n  '🫨': 15,\r\n  '🫠': 14,\r\n  '🥲': 13.1, // smiling face with tear, technically from v13 but see note above\r\n  '🥻': 12.1, // sari, technically from v12 but see note above\r\n  '🥰': 11,\r\n  '🤩': 5,\r\n  '👱‍♀️': 4,\r\n  '🤣': 3,\r\n  '👁️‍🗨️': 2,\r\n  '😀': 1,\r\n  '😐️': 0.7,\r\n  '😃': 0.6\r\n};\r\n\r\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\r\nconst DEFAULT_SKIN_TONE_EMOJI = '🖐️';\r\nconst DEFAULT_NUM_COLUMNS = 8;\r\n\r\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\r\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\r\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\r\n// https://emojipedia.org/ok-hand/)\r\nconst MOST_COMMONLY_USED_EMOJI = [\r\n  '😊',\r\n  '😒',\r\n  '♥️',\r\n  '👍️',\r\n  '😍',\r\n  '😂',\r\n  '😭',\r\n  '☺️',\r\n  '😔',\r\n  '😩',\r\n  '😏',\r\n  '💕',\r\n  '🙌',\r\n  '😘'\r\n];\r\n\r\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\r\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\r\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\r\n// newer emoji in another font:\r\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\r\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\r\n  '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\r\n\r\n/* istanbul ignore next */\r\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\r\n\r\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\r\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\r\n// and https://www.npmjs.com/package/if-emoji for inspiration\r\n// This implementation is largely borrowed from if-emoji, adding the font-family\r\n\r\n\r\nconst getTextFeature = (text, color) => {\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = canvas.height = 1;\r\n\r\n  const ctx = canvas.getContext('2d');\r\n  ctx.textBaseline = 'top';\r\n  ctx.font = `100px ${FONT_FAMILY}`;\r\n  ctx.fillStyle = color;\r\n  ctx.scale(0.01, 0.01);\r\n  ctx.fillText(text, 0, 0);\r\n\r\n  return ctx.getImageData(0, 0, 1, 1).data\r\n};\r\n\r\nconst compareFeatures = (feature1, feature2) => {\r\n  const feature1Str = [...feature1].join(',');\r\n  const feature2Str = [...feature2].join(',');\r\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\r\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\r\n  // 0,0,0,61 - there is a transparency here.\r\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\r\n};\r\n\r\nfunction testColorEmojiSupported (text) {\r\n  // Render white and black and then compare them to each other and ensure they're the same\r\n  // color, and neither one is black. This shows that the emoji was rendered in color.\r\n  const feature1 = getTextFeature(text, '#000');\r\n  const feature2 = getTextFeature(text, '#fff');\r\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\r\n}\r\n\r\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\r\n// different emoji releases to determine what the font supports\r\n\r\nfunction determineEmojiSupportLevel () {\r\n  const entries = Object.entries(versionsAndTestEmoji);\r\n  try {\r\n    // start with latest emoji and work backwards\r\n    for (const [emoji, version] of entries) {\r\n      if (testColorEmojiSupported(emoji)) {\r\n        return version\r\n      }\r\n    }\r\n  } catch (e) { // canvas error\r\n  } finally {\r\n  }\r\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\r\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\r\n  return entries[0][1] // first one in the list is the most recent version\r\n}\r\n\r\n// Check which emojis we know for sure aren't supported, based on Unicode version level\r\nlet promise;\r\nconst detectEmojiSupportLevel = () => {\r\n  if (!promise) {\r\n    // Delay so it can run while the IDB database is being created by the browser (on another thread).\r\n    // This helps especially with first load – we want to start pre-populating the database on the main thread,\r\n    // and then wait for IDB to commit everything, and while waiting we run this check.\r\n    promise = new Promise(resolve => (\r\n      rIC(() => (\r\n        resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\r\n      ))\r\n    ));\r\n  }\r\n  return promise\r\n};\r\n// determine which emojis containing ZWJ (zero width joiner) characters\r\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\r\nconst supportedZwjEmojis = new Map();\r\n\r\nconst VARIATION_SELECTOR = '\\ufe0f';\r\nconst SKINTONE_MODIFIER = '\\ud83c';\r\nconst ZWJ = '\\u200d';\r\nconst LIGHT_SKIN_TONE = 0x1F3FB;\r\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\r\n\r\n// TODO: this is a naive implementation, we can improve it later\r\n// It's only used for the skintone picker, so as long as people don't customize with\r\n// really exotic emoji then it should work fine\r\nfunction applySkinTone (str, skinTone) {\r\n  if (skinTone === 0) {\r\n    return str\r\n  }\r\n  const zwjIndex = str.indexOf(ZWJ);\r\n  if (zwjIndex !== -1) {\r\n    return str.substring(0, zwjIndex) +\r\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\r\n      str.substring(zwjIndex)\r\n  }\r\n  if (str.endsWith(VARIATION_SELECTOR)) {\r\n    str = str.substring(0, str.length - 1);\r\n  }\r\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\r\n}\r\n\r\nfunction halt (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n}\r\n\r\n// Implementation left/right or up/down navigation, circling back when you\r\n// reach the start/end of the list\r\nfunction incrementOrDecrement (decrement, val, arr) {\r\n  val += (decrement ? -1 : 1);\r\n  if (val < 0) {\r\n    val = arr.length - 1;\r\n  } else if (val >= arr.length) {\r\n    val = 0;\r\n  }\r\n  return val\r\n}\r\n\r\n// like lodash's uniqBy but much smaller\r\nfunction uniqBy (arr, func) {\r\n  const set = new Set();\r\n  const res = [];\r\n  for (const item of arr) {\r\n    const key = func(item);\r\n    if (!set.has(key)) {\r\n      set.add(key);\r\n      res.push(item);\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\n// We don't need all the data on every emoji, and there are specific things we need\r\n// for the UI, so build a \"view model\" from the emoji object we got from the database\r\n\r\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\r\n  const toSimpleSkinsMap = skins => {\r\n    const res = {};\r\n    for (const skin of skins) {\r\n      // ignore arrays like [1, 2] with multiple skin tones\r\n      // also ignore variants that are in an unsupported emoji version\r\n      // (these do exist - variants from a different version than their base emoji)\r\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\r\n        res[skin.tone] = skin.unicode;\r\n      }\r\n    }\r\n    return res\r\n  };\r\n\r\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category, annotation }) => ({\r\n    unicode,\r\n    name,\r\n    shortcodes,\r\n    url,\r\n    category,\r\n    annotation,\r\n    id: unicode || name,\r\n    skins: skins && toSimpleSkinsMap(skins)\r\n  }))\r\n}\r\n\r\n// import rAF from one place so that the bundle size is a bit smaller\r\nconst rAF = requestAnimationFrame;\r\n\r\n// Svelte action to calculate the width of an element and auto-update\r\n// using ResizeObserver. If ResizeObserver is unsupported, we just use rAF once\r\n// and don't bother to update.\r\n\r\n\r\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\r\n\r\nfunction calculateWidth (node, onUpdate) {\r\n  let resizeObserver;\r\n  if (resizeObserverSupported) {\r\n    resizeObserver = new ResizeObserver(entries => (\r\n      onUpdate(entries[0].contentRect.width)\r\n    ));\r\n    resizeObserver.observe(node);\r\n  } else { // just set the width once, don't bother trying to track it\r\n    rAF(() => (\r\n      onUpdate(node.getBoundingClientRect().width)\r\n    ));\r\n  }\r\n\r\n  // cleanup function (called on destroy)\r\n  return {\r\n    destroy () {\r\n      if (resizeObserver) {\r\n        resizeObserver.disconnect();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\r\nfunction calculateTextWidth (node) {\r\n  /* istanbul ignore else */\r\n  {\r\n    const range = document.createRange();\r\n    range.selectNode(node.firstChild);\r\n    return range.getBoundingClientRect().width\r\n  }\r\n}\r\n\r\nlet baselineEmojiWidth;\r\n\r\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\r\n  for (const emoji of zwjEmojisToCheck) {\r\n    const domNode = emojiToDomNode(emoji);\r\n    const emojiWidth = calculateTextWidth(domNode);\r\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\r\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\r\n    }\r\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\r\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\r\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\r\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\r\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\r\n    supportedZwjEmojis.set(emoji.unicode, supported);\r\n  }\r\n}\r\n\r\n// Measure after style/layout are complete\r\n// See https://github.com/andrewiggins/afterframe\r\n\r\n\r\nconst requestPostAnimationFrame = callback => {\r\n  rAF(() => {\r\n    setTimeout(callback);\r\n  });\r\n};\r\n\r\n// like lodash's uniq\r\n\r\nfunction uniq (arr) {\r\n  return uniqBy(arr, _ => _)\r\n}\r\n\r\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\r\n// At best the invalidation is useless, at worst it can cause infinite loops:\r\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\r\n// https://github.com/sveltejs/svelte/issues/6521\r\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\r\nfunction resetScrollTopIfPossible (element) {\r\n  if (element) {\r\n    element.scrollTop = 0;\r\n  }\r\n}\r\n\r\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v4.2.3 */\r\n\r\nconst { Map: Map_1 } = globals;\r\n\r\nfunction get_each_context(ctx, list, i) {\r\n\tconst child_ctx = ctx.slice();\r\n\tchild_ctx[66] = list[i];\r\n\tchild_ctx[68] = i;\r\n\treturn child_ctx;\r\n}\r\n\r\nfunction get_each_context_1(ctx, list, i) {\r\n\tconst child_ctx = ctx.slice();\r\n\tchild_ctx[69] = list[i];\r\n\tchild_ctx[68] = i;\r\n\treturn child_ctx;\r\n}\r\n\r\nfunction get_each_context_2(ctx, list, i) {\r\n\tconst child_ctx = ctx.slice();\r\n\tchild_ctx[66] = list[i];\r\n\tchild_ctx[68] = i;\r\n\treturn child_ctx;\r\n}\r\n\r\nfunction get_each_context_3(ctx, list, i) {\r\n\tconst child_ctx = ctx.slice();\r\n\tchild_ctx[72] = list[i];\r\n\treturn child_ctx;\r\n}\r\n\r\nfunction get_each_context_4(ctx, list, i) {\r\n\tconst child_ctx = ctx.slice();\r\n\tchild_ctx[75] = list[i];\r\n\tchild_ctx[68] = i;\r\n\treturn child_ctx;\r\n}\r\n\r\n// (50:38) {#each skinTones as skinTone, i (skinTone)}\r\nfunction create_each_block_4(key_1, ctx) {\r\n\tlet div;\r\n\tlet t_value = /*skinTone*/ ctx[75] + \"\";\r\n\tlet t;\r\n\tlet div_id_value;\r\n\tlet div_class_value;\r\n\tlet div_aria_selected_value;\r\n\tlet div_title_value;\r\n\tlet div_aria_label_value;\r\n\r\n\treturn {\r\n\t\tkey: key_1,\r\n\t\tfirst: null,\r\n\t\tc() {\r\n\t\t\tdiv = element(\"div\");\r\n\t\t\tt = text(t_value);\r\n\t\t\tattr(div, \"id\", div_id_value = \"skintone-\" + /*i*/ ctx[68]);\r\n\r\n\t\t\tattr(div, \"class\", div_class_value = \"emoji \" + (/*i*/ ctx[68] === /*activeSkinTone*/ ctx[20]\r\n\t\t\t? 'active'\r\n\t\t\t: ''));\r\n\r\n\t\t\tattr(div, \"aria-selected\", div_aria_selected_value = /*i*/ ctx[68] === /*activeSkinTone*/ ctx[20]);\r\n\t\t\tattr(div, \"role\", \"option\");\r\n\t\t\tattr(div, \"title\", div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[68]]);\r\n\t\t\tattr(div, \"aria-label\", div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[68]]);\r\n\t\t\tthis.first = div;\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, div, anchor);\r\n\t\t\tappend(div, t);\r\n\t\t},\r\n\t\tp(new_ctx, dirty) {\r\n\t\t\tctx = new_ctx;\r\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && t_value !== (t_value = /*skinTone*/ ctx[75] + \"\")) set_data(t, t_value);\r\n\r\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && div_id_value !== (div_id_value = \"skintone-\" + /*i*/ ctx[68])) {\r\n\t\t\t\tattr(div, \"id\", div_id_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_class_value !== (div_class_value = \"emoji \" + (/*i*/ ctx[68] === /*activeSkinTone*/ ctx[20]\r\n\t\t\t? 'active'\r\n\t\t\t: ''))) {\r\n\t\t\t\tattr(div, \"class\", div_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_aria_selected_value !== (div_aria_selected_value = /*i*/ ctx[68] === /*activeSkinTone*/ ctx[20])) {\r\n\t\t\t\tattr(div, \"aria-selected\", div_aria_selected_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_title_value !== (div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[68]])) {\r\n\t\t\t\tattr(div, \"title\", div_title_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_aria_label_value !== (div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[68]])) {\r\n\t\t\t\tattr(div, \"aria-label\", div_aria_label_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(div);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (59:33) {#each groups as group (group.id)}\r\nfunction create_each_block_3(key_1, ctx) {\r\n\tlet button;\r\n\tlet div;\r\n\tlet t_value = /*group*/ ctx[72].emoji + \"\";\r\n\tlet t;\r\n\tlet button_aria_controls_value;\r\n\tlet button_aria_label_value;\r\n\tlet button_aria_selected_value;\r\n\tlet button_title_value;\r\n\tlet mounted;\r\n\tlet dispose;\r\n\r\n\tfunction click_handler() {\r\n\t\treturn /*click_handler*/ ctx[51](/*group*/ ctx[72]);\r\n\t}\r\n\r\n\treturn {\r\n\t\tkey: key_1,\r\n\t\tfirst: null,\r\n\t\tc() {\r\n\t\t\tbutton = element(\"button\");\r\n\t\t\tdiv = element(\"div\");\r\n\t\t\tt = text(t_value);\r\n\t\t\tattr(div, \"class\", \"nav-emoji emoji\");\r\n\t\t\tattr(button, \"role\", \"tab\");\r\n\t\t\tattr(button, \"class\", \"nav-button\");\r\n\t\t\tattr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" + /*group*/ ctx[72].id);\r\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[72].name]);\r\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[72].id);\r\n\t\t\tattr(button, \"title\", button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[72].name]);\r\n\t\t\tthis.first = button;\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, button, anchor);\r\n\t\t\tappend(button, div);\r\n\t\t\tappend(div, t);\r\n\r\n\t\t\tif (!mounted) {\r\n\t\t\t\tdispose = listen(button, \"click\", click_handler);\r\n\t\t\t\tmounted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tp(new_ctx, dirty) {\r\n\t\t\tctx = new_ctx;\r\n\t\t\tif (dirty[0] & /*groups*/ 4096 && t_value !== (t_value = /*group*/ ctx[72].emoji + \"\")) set_data(t, t_value);\r\n\r\n\t\t\tif (dirty[0] & /*groups*/ 4096 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" + /*group*/ ctx[72].id)) {\r\n\t\t\t\tattr(button, \"aria-controls\", button_aria_controls_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_aria_label_value !== (button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[72].name])) {\r\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentGroup, groups*/ 12304 && button_aria_selected_value !== (button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[72].id)) {\r\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_title_value !== (button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[72].name])) {\r\n\t\t\t\tattr(button, \"title\", button_title_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(button);\r\n\t\t\t}\r\n\r\n\t\t\tmounted = false;\r\n\t\t\tdispose();\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (100:100) {:else}\r\nfunction create_else_block_1(ctx) {\r\n\tlet img;\r\n\tlet img_src_value;\r\n\r\n\treturn {\r\n\t\tc() {\r\n\t\t\timg = element(\"img\");\r\n\t\t\tattr(img, \"class\", \"custom-emoji\");\r\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[66].url)) attr(img, \"src\", img_src_value);\r\n\t\t\tattr(img, \"alt\", \"\");\r\n\t\t\tattr(img, \"loading\", \"lazy\");\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, img, anchor);\r\n\t\t},\r\n\t\tp(ctx, dirty) {\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[66].url)) {\r\n\t\t\t\tattr(img, \"src\", img_src_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(img);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (100:40) {#if emoji.unicode}\r\nfunction create_if_block_1(ctx) {\r\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]) + \"\";\r\n\tlet t;\r\n\r\n\treturn {\r\n\t\tc() {\r\n\t\t\tt = text(t_value);\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, t, anchor);\r\n\t\t},\r\n\t\tp(ctx, dirty) {\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (95:53) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\r\nfunction create_each_block_2(key_1, ctx) {\r\n\tlet button;\r\n\tlet button_role_value;\r\n\tlet button_aria_selected_value;\r\n\tlet button_aria_label_value;\r\n\tlet button_title_value;\r\n\tlet button_class_value;\r\n\tlet button_id_value;\r\n\r\n\tfunction select_block_type(ctx, dirty) {\r\n\t\tif (/*emoji*/ ctx[66].unicode) return create_if_block_1;\r\n\t\treturn create_else_block_1;\r\n\t}\r\n\r\n\tlet current_block_type = select_block_type(ctx);\r\n\tlet if_block = current_block_type(ctx);\r\n\r\n\treturn {\r\n\t\tkey: key_1,\r\n\t\tfirst: null,\r\n\t\tc() {\r\n\t\t\tbutton = element(\"button\");\r\n\t\t\tif_block.c();\r\n\t\t\tattr(button, \"role\", button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem');\r\n\r\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = /*searchMode*/ ctx[4]\r\n\t\t\t? /*i*/ ctx[68] == /*activeSearchItem*/ ctx[5]\r\n\t\t\t: '');\r\n\r\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]));\r\n\t\t\tattr(button, \"title\", button_title_value = /*titleForEmoji*/ ctx[29](/*emoji*/ ctx[66]));\r\n\r\n\t\t\tattr(button, \"class\", button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[68] === /*activeSearchItem*/ ctx[5]\r\n\t\t\t? 'active'\r\n\t\t\t: ''));\r\n\r\n\t\t\tattr(button, \"id\", button_id_value = \"emo-\" + /*emoji*/ ctx[66].id);\r\n\t\t\tthis.first = button;\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, button, anchor);\r\n\t\t\tif_block.m(button, null);\r\n\t\t},\r\n\t\tp(new_ctx, dirty) {\r\n\t\t\tctx = new_ctx;\r\n\r\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\r\n\t\t\t\tif_block.p(ctx, dirty);\r\n\t\t\t} else {\r\n\t\t\t\tif_block.d(1);\r\n\t\t\t\tif_block = current_block_type(ctx);\r\n\r\n\t\t\t\tif (if_block) {\r\n\t\t\t\t\tif_block.c();\r\n\t\t\t\t\tif_block.m(button, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && button_role_value !== (button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem')) {\r\n\t\t\t\tattr(button, \"role\", button_role_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_aria_selected_value !== (button_aria_selected_value = /*searchMode*/ ctx[4]\r\n\t\t\t? /*i*/ ctx[68] == /*activeSearchItem*/ ctx[5]\r\n\t\t\t: '')) {\r\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]))) {\r\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_title_value !== (button_title_value = /*titleForEmoji*/ ctx[29](/*emoji*/ ctx[66]))) {\r\n\t\t\t\tattr(button, \"title\", button_title_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_class_value !== (button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[68] === /*activeSearchItem*/ ctx[5]\r\n\t\t\t? 'active'\r\n\t\t\t: ''))) {\r\n\t\t\t\tattr(button, \"class\", button_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_id_value !== (button_id_value = \"emo-\" + /*emoji*/ ctx[66].id)) {\r\n\t\t\t\tattr(button, \"id\", button_id_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(button);\r\n\t\t\t}\r\n\r\n\t\t\tif_block.d();\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (76:36) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\r\nfunction create_each_block_1(key_1, ctx) {\r\n\tlet div0;\r\n\r\n\tlet t_value = (/*searchMode*/ ctx[4]\r\n\t? /*i18n*/ ctx[0].searchResultsLabel\r\n\t: /*emojiWithCategory*/ ctx[69].category\r\n\t\t? /*emojiWithCategory*/ ctx[69].category\r\n\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\r\n\t\t\t? /*i18n*/ ctx[0].categories.custom\r\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\";\r\n\r\n\tlet t;\r\n\tlet div0_id_value;\r\n\tlet div0_class_value;\r\n\tlet div1;\r\n\tlet each_blocks = [];\r\n\tlet each_1_lookup = new Map_1();\r\n\tlet div1_role_value;\r\n\tlet div1_aria_labelledby_value;\r\n\tlet div1_id_value;\r\n\tlet each_value_2 = ensure_array_like(/*emojiWithCategory*/ ctx[69].emojis);\r\n\tconst get_key = ctx => /*emoji*/ ctx[66].id;\r\n\r\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\r\n\t\tlet child_ctx = get_each_context_2(ctx, each_value_2, i);\r\n\t\tlet key = get_key(child_ctx);\r\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\r\n\t}\r\n\r\n\treturn {\r\n\t\tkey: key_1,\r\n\t\tfirst: null,\r\n\t\tc() {\r\n\t\t\tdiv0 = element(\"div\");\r\n\t\t\tt = text(t_value);\r\n\t\t\tdiv1 = element(\"div\");\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\teach_blocks[i].c();\r\n\t\t\t}\r\n\r\n\t\t\tattr(div0, \"id\", div0_id_value = \"menu-label-\" + /*i*/ ctx[68]);\r\n\r\n\t\t\tattr(div0, \"class\", div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\r\n\t\t\t? 'gone'\r\n\t\t\t: ''));\r\n\r\n\t\t\tattr(div0, \"aria-hidden\", \"true\");\r\n\t\t\tattr(div1, \"class\", \"emoji-menu\");\r\n\t\t\tattr(div1, \"role\", div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu');\r\n\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[68]);\r\n\t\t\tattr(div1, \"id\", div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '');\r\n\t\t\tthis.first = div0;\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, div0, anchor);\r\n\t\t\tappend(div0, t);\r\n\t\t\tinsert(target, div1, anchor);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\tif (each_blocks[i]) {\r\n\t\t\t\t\teach_blocks[i].m(div1, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tp(new_ctx, dirty) {\r\n\t\t\tctx = new_ctx;\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/ 40977 && t_value !== (t_value = (/*searchMode*/ ctx[4]\r\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\r\n\t\t\t: /*emojiWithCategory*/ ctx[69].category\r\n\t\t\t\t? /*emojiWithCategory*/ ctx[69].category\r\n\t\t\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\r\n\t\t\t\t\t? /*i18n*/ ctx[0].categories.custom\r\n\t\t\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\")) set_data(t, t_value);\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_id_value !== (div0_id_value = \"menu-label-\" + /*i*/ ctx[68])) {\r\n\t\t\t\tattr(div0, \"id\", div0_id_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_class_value !== (div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\r\n\t\t\t? 'gone'\r\n\t\t\t: ''))) {\r\n\t\t\t\tattr(div0, \"class\", div0_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, titleForEmoji, unicodeWithSkin*/ 939557168) {\r\n\t\t\t\teach_value_2 = ensure_array_like(/*emojiWithCategory*/ ctx[69].emojis);\r\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_role_value !== (div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu')) {\r\n\t\t\t\tattr(div1, \"role\", div1_role_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[68])) {\r\n\t\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_id_value !== (div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '')) {\r\n\t\t\t\tattr(div1, \"id\", div1_id_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(div0);\r\n\t\t\t\tdetach(div1);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\teach_blocks[i].d();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (109:94) {:else}\r\nfunction create_else_block(ctx) {\r\n\tlet img;\r\n\tlet img_src_value;\r\n\r\n\treturn {\r\n\t\tc() {\r\n\t\t\timg = element(\"img\");\r\n\t\t\tattr(img, \"class\", \"custom-emoji\");\r\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[66].url)) attr(img, \"src\", img_src_value);\r\n\t\t\tattr(img, \"alt\", \"\");\r\n\t\t\tattr(img, \"loading\", \"lazy\");\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, img, anchor);\r\n\t\t},\r\n\t\tp(ctx, dirty) {\r\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[66].url)) {\r\n\t\t\t\tattr(img, \"src\", img_src_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(img);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (109:34) {#if emoji.unicode}\r\nfunction create_if_block(ctx) {\r\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]) + \"\";\r\n\tlet t;\r\n\r\n\treturn {\r\n\t\tc() {\r\n\t\t\tt = text(t_value);\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, t, anchor);\r\n\t\t},\r\n\t\tp(ctx, dirty) {\r\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// (105:102) {#each currentFavorites as emoji, i (emoji.id)}\r\nfunction create_each_block(key_1, ctx) {\r\n\tlet button;\r\n\tlet button_aria_label_value;\r\n\tlet button_title_value;\r\n\tlet button_id_value;\r\n\r\n\tfunction select_block_type_1(ctx, dirty) {\r\n\t\tif (/*emoji*/ ctx[66].unicode) return create_if_block;\r\n\t\treturn create_else_block;\r\n\t}\r\n\r\n\tlet current_block_type = select_block_type_1(ctx);\r\n\tlet if_block = current_block_type(ctx);\r\n\r\n\treturn {\r\n\t\tkey: key_1,\r\n\t\tfirst: null,\r\n\t\tc() {\r\n\t\t\tbutton = element(\"button\");\r\n\t\t\tif_block.c();\r\n\t\t\tattr(button, \"role\", \"menuitem\");\r\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]));\r\n\t\t\tattr(button, \"title\", button_title_value = /*titleForEmoji*/ ctx[29](/*emoji*/ ctx[66]));\r\n\t\t\tattr(button, \"class\", \"emoji\");\r\n\t\t\tattr(button, \"id\", button_id_value = \"fav-\" + /*emoji*/ ctx[66].id);\r\n\t\t\tthis.first = button;\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, button, anchor);\r\n\t\t\tif_block.m(button, null);\r\n\t\t},\r\n\t\tp(new_ctx, dirty) {\r\n\t\t\tctx = new_ctx;\r\n\r\n\t\t\tif (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\r\n\t\t\t\tif_block.p(ctx, dirty);\r\n\t\t\t} else {\r\n\t\t\t\tif_block.d(1);\r\n\t\t\t\tif_block = current_block_type(ctx);\r\n\r\n\t\t\t\tif (if_block) {\r\n\t\t\t\t\tif_block.c();\r\n\t\t\t\t\tif_block.m(button, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[66], /*currentSkinTone*/ ctx[8]))) {\r\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_title_value !== (button_title_value = /*titleForEmoji*/ ctx[29](/*emoji*/ ctx[66]))) {\r\n\t\t\t\tattr(button, \"title\", button_title_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_id_value !== (button_id_value = \"fav-\" + /*emoji*/ ctx[66].id)) {\r\n\t\t\t\tattr(button, \"id\", button_id_value);\r\n\t\t\t}\r\n\t\t},\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(button);\r\n\t\t\t}\r\n\r\n\t\t\tif_block.d();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction create_fragment(ctx) {\r\n\tlet section;\r\n\tlet div0;\r\n\tlet div4;\r\n\tlet div1;\r\n\tlet input;\r\n\tlet input_placeholder_value;\r\n\tlet input_aria_expanded_value;\r\n\tlet input_aria_activedescendant_value;\r\n\tlet label;\r\n\tlet t0_value = /*i18n*/ ctx[0].searchLabel + \"\";\r\n\tlet t0;\r\n\tlet span0;\r\n\tlet t1_value = /*i18n*/ ctx[0].searchDescription + \"\";\r\n\tlet t1;\r\n\tlet div2;\r\n\tlet button0;\r\n\tlet t2;\r\n\tlet button0_class_value;\r\n\tlet div2_class_value;\r\n\tlet span1;\r\n\tlet t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\";\r\n\tlet t3;\r\n\tlet div3;\r\n\tlet each_blocks_3 = [];\r\n\tlet each0_lookup = new Map_1();\r\n\tlet div3_class_value;\r\n\tlet div3_aria_label_value;\r\n\tlet div3_aria_activedescendant_value;\r\n\tlet div3_aria_hidden_value;\r\n\tlet div5;\r\n\tlet each_blocks_2 = [];\r\n\tlet each1_lookup = new Map_1();\r\n\tlet div5_aria_label_value;\r\n\tlet div7;\r\n\tlet div6;\r\n\tlet div8;\r\n\tlet t4;\r\n\tlet div8_class_value;\r\n\tlet div10;\r\n\tlet div9;\r\n\tlet each_blocks_1 = [];\r\n\tlet each2_lookup = new Map_1();\r\n\tlet div10_class_value;\r\n\tlet div10_role_value;\r\n\tlet div10_aria_label_value;\r\n\tlet div10_id_value;\r\n\tlet div11;\r\n\tlet each_blocks = [];\r\n\tlet each3_lookup = new Map_1();\r\n\tlet div11_class_value;\r\n\tlet div11_aria_label_value;\r\n\tlet button1;\r\n\tlet section_aria_label_value;\r\n\tlet mounted;\r\n\tlet dispose;\r\n\tlet each_value_4 = ensure_array_like(/*skinTones*/ ctx[9]);\r\n\tconst get_key = ctx => /*skinTone*/ ctx[75];\r\n\r\n\tfor (let i = 0; i < each_value_4.length; i += 1) {\r\n\t\tlet child_ctx = get_each_context_4(ctx, each_value_4, i);\r\n\t\tlet key = get_key(child_ctx);\r\n\t\teach0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\r\n\t}\r\n\r\n\tlet each_value_3 = ensure_array_like(/*groups*/ ctx[12]);\r\n\tconst get_key_1 = ctx => /*group*/ ctx[72].id;\r\n\r\n\tfor (let i = 0; i < each_value_3.length; i += 1) {\r\n\t\tlet child_ctx = get_each_context_3(ctx, each_value_3, i);\r\n\t\tlet key = get_key_1(child_ctx);\r\n\t\teach1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\r\n\t}\r\n\r\n\tlet each_value_1 = ensure_array_like(/*currentEmojisWithCategories*/ ctx[15]);\r\n\tconst get_key_2 = ctx => /*emojiWithCategory*/ ctx[69].category;\r\n\r\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\r\n\t\tlet child_ctx = get_each_context_1(ctx, each_value_1, i);\r\n\t\tlet key = get_key_2(child_ctx);\r\n\t\teach2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\r\n\t}\r\n\r\n\tlet each_value = ensure_array_like(/*currentFavorites*/ ctx[10]);\r\n\tconst get_key_3 = ctx => /*emoji*/ ctx[66].id;\r\n\r\n\tfor (let i = 0; i < each_value.length; i += 1) {\r\n\t\tlet child_ctx = get_each_context(ctx, each_value, i);\r\n\t\tlet key = get_key_3(child_ctx);\r\n\t\teach3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\r\n\t}\r\n\r\n\treturn {\r\n\t\tc() {\r\n\t\t\tsection = element(\"section\");\r\n\t\t\tdiv0 = element(\"div\");\r\n\t\t\tdiv4 = element(\"div\");\r\n\t\t\tdiv1 = element(\"div\");\r\n\t\t\tinput = element(\"input\");\r\n\t\t\tlabel = element(\"label\");\r\n\t\t\tt0 = text(t0_value);\r\n\t\t\tspan0 = element(\"span\");\r\n\t\t\tt1 = text(t1_value);\r\n\t\t\tdiv2 = element(\"div\");\r\n\t\t\tbutton0 = element(\"button\");\r\n\t\t\tt2 = text(/*skinToneButtonText*/ ctx[21]);\r\n\t\t\tspan1 = element(\"span\");\r\n\t\t\tt3 = text(t3_value);\r\n\t\t\tdiv3 = element(\"div\");\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\r\n\t\t\t\teach_blocks_3[i].c();\r\n\t\t\t}\r\n\r\n\t\t\tdiv5 = element(\"div\");\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\r\n\t\t\t\teach_blocks_2[i].c();\r\n\t\t\t}\r\n\r\n\t\t\tdiv7 = element(\"div\");\r\n\t\t\tdiv6 = element(\"div\");\r\n\t\t\tdiv8 = element(\"div\");\r\n\t\t\tt4 = text(/*message*/ ctx[18]);\r\n\t\t\tdiv10 = element(\"div\");\r\n\t\t\tdiv9 = element(\"div\");\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\r\n\t\t\t\teach_blocks_1[i].c();\r\n\t\t\t}\r\n\r\n\t\t\tdiv11 = element(\"div\");\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\teach_blocks[i].c();\r\n\t\t\t}\r\n\r\n\t\t\tbutton1 = element(\"button\");\r\n\t\t\tbutton1.textContent = \"😀\";\r\n\t\t\tattr(div0, \"class\", \"pad-top\");\r\n\t\t\tattr(input, \"id\", \"search\");\r\n\t\t\tattr(input, \"class\", \"search\");\r\n\t\t\tattr(input, \"type\", \"search\");\r\n\t\t\tattr(input, \"role\", \"combobox\");\r\n\t\t\tattr(input, \"enterkeyhint\", \"search\");\r\n\t\t\tattr(input, \"placeholder\", input_placeholder_value = /*i18n*/ ctx[0].searchLabel);\r\n\t\t\tattr(input, \"autocapitalize\", \"none\");\r\n\t\t\tattr(input, \"autocomplete\", \"off\");\r\n\t\t\tattr(input, \"spellcheck\", \"true\");\r\n\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length));\r\n\t\t\tattr(input, \"aria-controls\", \"search-results\");\r\n\t\t\tattr(input, \"aria-describedby\", \"search-description\");\r\n\t\t\tattr(input, \"aria-autocomplete\", \"list\");\r\n\r\n\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\r\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\r\n\t\t\t: '');\r\n\r\n\t\t\tattr(label, \"class\", \"sr-only\");\r\n\t\t\tattr(label, \"for\", \"search\");\r\n\t\t\tattr(span0, \"id\", \"search-description\");\r\n\t\t\tattr(span0, \"class\", \"sr-only\");\r\n\t\t\tattr(div1, \"class\", \"search-wrapper\");\r\n\t\t\tattr(button0, \"id\", \"skintone-button\");\r\n\t\t\tattr(button0, \"class\", button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''));\r\n\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\r\n\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\r\n\t\t\tattr(button0, \"aria-describedby\", \"skintone-description\");\r\n\t\t\tattr(button0, \"aria-haspopup\", \"listbox\");\r\n\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\r\n\t\t\tattr(button0, \"aria-controls\", \"skintone-list\");\r\n\r\n\t\t\tattr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\r\n\t\t\t? 'expanded'\r\n\t\t\t: ''));\r\n\r\n\t\t\tattr(span1, \"id\", \"skintone-description\");\r\n\t\t\tattr(span1, \"class\", \"sr-only\");\r\n\t\t\tattr(div3, \"id\", \"skintone-list\");\r\n\r\n\t\t\tattr(div3, \"class\", div3_class_value = \"skintone-list hide-focus \" + (/*skinTonePickerExpanded*/ ctx[6]\r\n\t\t\t? ''\r\n\t\t\t: 'hidden no-animate'));\r\n\r\n\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\r\n\t\t\t? 0\r\n\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\r\n\r\n\t\t\tattr(div3, \"role\", \"listbox\");\r\n\t\t\tattr(div3, \"aria-label\", div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel);\r\n\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20]);\r\n\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6]);\r\n\t\t\tattr(div3, \"tabindex\", \"-1\");\r\n\t\t\tattr(div4, \"class\", \"search-row\");\r\n\t\t\tattr(div5, \"class\", \"nav\");\r\n\t\t\tattr(div5, \"role\", \"tablist\");\r\n\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\r\n\t\t\tattr(div5, \"aria-label\", div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel);\r\n\t\t\tattr(div6, \"class\", \"indicator\");\r\n\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\r\n\t\t\tattr(div7, \"class\", \"indicator-wrapper\");\r\n\t\t\tattr(div8, \"class\", div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'));\r\n\t\t\tattr(div8, \"role\", \"alert\");\r\n\t\t\tattr(div8, \"aria-live\", \"polite\");\r\n\r\n\t\t\tattr(div10, \"class\", div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\r\n\t\t\t? 'gone'\r\n\t\t\t: ''));\r\n\r\n\t\t\tattr(div10, \"role\", div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel');\r\n\r\n\t\t\tattr(div10, \"aria-label\", div10_aria_label_value = /*searchMode*/ ctx[4]\r\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\r\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]);\r\n\r\n\t\t\tattr(div10, \"id\", div10_id_value = /*searchMode*/ ctx[4]\r\n\t\t\t? ''\r\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`);\r\n\r\n\t\t\tattr(div10, \"tabindex\", \"0\");\r\n\t\t\tattr(div11, \"class\", div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''));\r\n\t\t\tattr(div11, \"role\", \"menu\");\r\n\t\t\tattr(div11, \"aria-label\", div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel);\r\n\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\r\n\t\t\tattr(button1, \"aria-hidden\", \"true\");\r\n\t\t\tattr(button1, \"tabindex\", \"-1\");\r\n\t\t\tattr(button1, \"class\", \"abs-pos hidden emoji\");\r\n\t\t\tattr(section, \"class\", \"picker\");\r\n\t\t\tattr(section, \"aria-label\", section_aria_label_value = /*i18n*/ ctx[0].regionLabel);\r\n\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\r\n\t\t},\r\n\t\tm(target, anchor) {\r\n\t\t\tinsert(target, section, anchor);\r\n\t\t\tappend(section, div0);\r\n\t\t\tappend(section, div4);\r\n\t\t\tappend(div4, div1);\r\n\t\t\tappend(div1, input);\r\n\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\r\n\t\t\tappend(div1, label);\r\n\t\t\tappend(label, t0);\r\n\t\t\tappend(div1, span0);\r\n\t\t\tappend(span0, t1);\r\n\t\t\tappend(div4, div2);\r\n\t\t\tappend(div2, button0);\r\n\t\t\tappend(button0, t2);\r\n\t\t\tappend(div4, span1);\r\n\t\t\tappend(span1, t3);\r\n\t\t\tappend(div4, div3);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\r\n\t\t\t\tif (each_blocks_3[i]) {\r\n\t\t\t\t\teach_blocks_3[i].m(div3, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*div3_binding*/ ctx[50](div3);\r\n\t\t\tappend(section, div5);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\r\n\t\t\t\tif (each_blocks_2[i]) {\r\n\t\t\t\t\teach_blocks_2[i].m(div5, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tappend(section, div7);\r\n\t\t\tappend(div7, div6);\r\n\t\t\tappend(section, div8);\r\n\t\t\tappend(div8, t4);\r\n\t\t\tappend(section, div10);\r\n\t\t\tappend(div10, div9);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\r\n\t\t\t\tif (each_blocks_1[i]) {\r\n\t\t\t\t\teach_blocks_1[i].m(div9, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*div10_binding*/ ctx[52](div10);\r\n\t\t\tappend(section, div11);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\tif (each_blocks[i]) {\r\n\t\t\t\t\teach_blocks[i].m(div11, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tappend(section, button1);\r\n\t\t\t/*button1_binding*/ ctx[53](button1);\r\n\t\t\t/*section_binding*/ ctx[54](section);\r\n\r\n\t\t\tif (!mounted) {\r\n\t\t\t\tdispose = [\r\n\t\t\t\t\tlisten(input, \"input\", /*input_input_handler*/ ctx[49]),\r\n\t\t\t\t\tlisten(input, \"keydown\", /*onSearchKeydown*/ ctx[31]),\r\n\t\t\t\t\tlisten(button0, \"click\", /*onClickSkinToneButton*/ ctx[36]),\r\n\t\t\t\t\tlisten(div3, \"focusout\", /*onSkinToneOptionsFocusOut*/ ctx[39]),\r\n\t\t\t\t\tlisten(div3, \"click\", /*onSkinToneOptionsClick*/ ctx[35]),\r\n\t\t\t\t\tlisten(div3, \"keydown\", /*onSkinToneOptionsKeydown*/ ctx[37]),\r\n\t\t\t\t\tlisten(div3, \"keyup\", /*onSkinToneOptionsKeyup*/ ctx[38]),\r\n\t\t\t\t\tlisten(div5, \"keydown\", /*onNavKeydown*/ ctx[33]),\r\n\t\t\t\t\taction_destroyer(/*calculateEmojiGridStyle*/ ctx[30].call(null, div9)),\r\n\t\t\t\t\tlisten(div10, \"click\", /*onEmojiClick*/ ctx[34]),\r\n\t\t\t\t\tlisten(div11, \"click\", /*onEmojiClick*/ ctx[34])\r\n\t\t\t\t];\r\n\r\n\t\t\t\tmounted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tp(ctx, dirty) {\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && input_placeholder_value !== (input_placeholder_value = /*i18n*/ ctx[0].searchLabel)) {\r\n\t\t\t\tattr(input, \"placeholder\", input_placeholder_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentEmojis*/ 18 && input_aria_expanded_value !== (input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length))) {\r\n\t\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*activeSearchItemId*/ 67108864 && input_aria_activedescendant_value !== (input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\r\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\r\n\t\t\t: '')) {\r\n\t\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*rawSearchText*/ 4 && input.value !== /*rawSearchText*/ ctx[2]) {\r\n\t\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t0_value !== (t0_value = /*i18n*/ ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t1_value !== (t1_value = /*i18n*/ ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\r\n\t\t\tif (dirty[0] & /*skinToneButtonText*/ 2097152) set_data(t2, /*skinToneButtonText*/ ctx[21]);\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && button0_class_value !== (button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''))) {\r\n\t\t\t\tattr(button0, \"class\", button0_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\r\n\t\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\r\n\t\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\r\n\t\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpandedAfterAnimation*/ 524288 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\r\n\t\t\t? 'expanded'\r\n\t\t\t: ''))) {\r\n\t\t\t\tattr(div2, \"class\", div2_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t3_value !== (t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\r\n\r\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone, i18n*/ 1049089) {\r\n\t\t\t\teach_value_4 = ensure_array_like(/*skinTones*/ ctx[9]);\r\n\t\t\t\teach_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_class_value !== (div3_class_value = \"skintone-list hide-focus \" + (/*skinTonePickerExpanded*/ ctx[6]\r\n\t\t\t? ''\r\n\t\t\t: 'hidden no-animate'))) {\r\n\t\t\t\tattr(div3, \"class\", div3_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\r\n\t\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\r\n\t\t\t\t? 0\r\n\t\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div3_aria_label_value !== (div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel)) {\r\n\t\t\t\tattr(div3, \"aria-label\", div3_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*activeSkinTone*/ 1048576 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20])) {\r\n\t\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_aria_hidden_value !== (div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6])) {\r\n\t\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*groups, i18n, searchMode, currentGroup*/ 12305 | dirty[1] & /*onNavClick*/ 2) {\r\n\t\t\t\teach_value_3 = ensure_array_like(/*groups*/ ctx[12]);\r\n\t\t\t\teach_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*groups*/ 4096) {\r\n\t\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div5_aria_label_value !== (div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel)) {\r\n\t\t\t\tattr(div5, \"aria-label\", div5_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*isRtl, currentGroupIndex*/ 16779264) {\r\n\t\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*message*/ 262144) set_data(t4, /*message*/ ctx[18]);\r\n\r\n\t\t\tif (dirty[0] & /*message*/ 262144 && div8_class_value !== (div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'))) {\r\n\t\t\t\tattr(div8, \"class\", div8_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, titleForEmoji, unicodeWithSkin, i18n, currentGroup*/ 939565361) {\r\n\t\t\t\teach_value_1 = ensure_array_like(/*currentEmojisWithCategories*/ ctx[15]);\r\n\t\t\t\teach_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*databaseLoaded, message*/ 278528 && div10_class_value !== (div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\r\n\t\t\t? 'gone'\r\n\t\t\t: ''))) {\r\n\t\t\t\tattr(div10, \"class\", div10_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div10_role_value !== (div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel')) {\r\n\t\t\t\tattr(div10, \"role\", div10_role_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentGroup*/ 8209 && div10_aria_label_value !== (div10_aria_label_value = /*searchMode*/ ctx[4]\r\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\r\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name])) {\r\n\t\t\t\tattr(div10, \"aria-label\", div10_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*searchMode, currentGroup*/ 8208 && div10_id_value !== (div10_id_value = /*searchMode*/ ctx[4]\r\n\t\t\t? ''\r\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`)) {\r\n\t\t\t\tattr(div10, \"id\", div10_id_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*labelWithSkin, currentFavorites, currentSkinTone, titleForEmoji, unicodeWithSkin*/ 939525376) {\r\n\t\t\t\teach_value = ensure_array_like(/*currentFavorites*/ ctx[10]);\r\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div11, destroy_block, create_each_block, null, get_each_context);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*message*/ 262144 && div11_class_value !== (div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''))) {\r\n\t\t\t\tattr(div11, \"class\", div11_class_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div11_aria_label_value !== (div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel)) {\r\n\t\t\t\tattr(div11, \"aria-label\", div11_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*scrollbarWidth*/ 33554432) {\r\n\t\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*i18n*/ 1 && section_aria_label_value !== (section_aria_label_value = /*i18n*/ ctx[0].regionLabel)) {\r\n\t\t\t\tattr(section, \"aria-label\", section_aria_label_value);\r\n\t\t\t}\r\n\r\n\t\t\tif (dirty[0] & /*pickerStyle*/ 4194304) {\r\n\t\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\r\n\t\t\t}\r\n\t\t},\r\n\t\ti: noop,\r\n\t\to: noop,\r\n\t\td(detaching) {\r\n\t\t\tif (detaching) {\r\n\t\t\t\tdetach(section);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\r\n\t\t\t\teach_blocks_3[i].d();\r\n\t\t\t}\r\n\r\n\t\t\t/*div3_binding*/ ctx[50](null);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\r\n\t\t\t\teach_blocks_2[i].d();\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\r\n\t\t\t\teach_blocks_1[i].d();\r\n\t\t\t}\r\n\r\n\t\t\t/*div10_binding*/ ctx[52](null);\r\n\r\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\r\n\t\t\t\teach_blocks[i].d();\r\n\t\t\t}\r\n\r\n\t\t\t/*button1_binding*/ ctx[53](null);\r\n\t\t\t/*section_binding*/ ctx[54](null);\r\n\t\t\tmounted = false;\r\n\t\t\trun_all(dispose);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction instance($$self, $$props, $$invalidate) {\r\n\tlet { skinToneEmoji } = $$props;\r\n\tlet { i18n } = $$props;\r\n\tlet { database } = $$props;\r\n\tlet { customEmoji } = $$props;\r\n\tlet { customCategorySorting } = $$props;\r\n\tlet { emojiVersion } = $$props;\r\n\r\n\t// private\r\n\tlet initialLoad = true;\r\n\r\n\tlet currentEmojis = [];\r\n\tlet currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\r\n\tlet rawSearchText = '';\r\n\tlet searchText = '';\r\n\tlet rootElement;\r\n\tlet baselineEmoji;\r\n\tlet tabpanelElement;\r\n\tlet searchMode = false; // eslint-disable-line no-unused-vars\r\n\tlet activeSearchItem = -1;\r\n\tlet message; // eslint-disable-line no-unused-vars\r\n\tlet skinTonePickerExpanded = false;\r\n\tlet skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\r\n\tlet skinToneDropdown;\r\n\tlet currentSkinTone = 0;\r\n\tlet activeSkinTone = 0;\r\n\tlet skinToneButtonText; // eslint-disable-line no-unused-vars\r\n\tlet pickerStyle; // eslint-disable-line no-unused-vars\r\n\tlet skinToneButtonLabel = ''; // eslint-disable-line no-unused-vars\r\n\tlet skinTones = [];\r\n\tlet currentFavorites = []; // eslint-disable-line no-unused-vars\r\n\tlet defaultFavoriteEmojis;\r\n\tlet numColumns = DEFAULT_NUM_COLUMNS;\r\n\tlet isRtl = false; // eslint-disable-line no-unused-vars\r\n\tlet scrollbarWidth = 0; // eslint-disable-line no-unused-vars\r\n\tlet currentGroupIndex = 0;\r\n\tlet groups$1 = groups;\r\n\tlet currentGroup;\r\n\tlet databaseLoaded = false; // eslint-disable-line no-unused-vars\r\n\tlet activeSearchItemId; // eslint-disable-line no-unused-vars\r\n\r\n\t// constants\r\n\tconst EMPTY_ARRAY = [];\r\n\r\n\t//\r\n\t// Utils/helpers\r\n\t//\r\n\tconst focus = id => {\r\n\t\trootElement.getRootNode().getElementById(id).focus();\r\n\t};\r\n\r\n\t// fire a custom event that crosses the shadow boundary\r\n\tconst fireEvent = (name, detail) => {\r\n\t\trootElement.dispatchEvent(new CustomEvent(name, { detail, bubbles: true, composed: true }));\r\n\t};\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst unicodeWithSkin = (emoji, currentSkinTone) => currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst labelWithSkin = (emoji, currentSkinTone) => uniq([\r\n\t\temoji.name || unicodeWithSkin(emoji, currentSkinTone),\r\n\t\temoji.annotation,\r\n\t\t...emoji.shortcodes || EMPTY_ARRAY\r\n\t].filter(Boolean)).join(', ');\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tconst titleForEmoji = emoji => emoji.annotation || (emoji.shortcodes || EMPTY_ARRAY).join(', ');\r\n\r\n\t//\r\n\t// Calculate the width of the emoji grid. This serves two purposes:\r\n\t// 1) Re-calculate the --num-columns var because it may have changed\r\n\t// 2) Re-calculate the scrollbar width because it may have changed\r\n\t//   (i.e. because the number of items changed)\r\n\t// 3) Re-calculate whether we're in RTL mode or not.\r\n\t//\r\n\t// The benefit of doing this in one place is to align with rAF/ResizeObserver\r\n\t// and do all the calculations in one go. RTL vs LTR is not strictly width-related,\r\n\t// but since we're already reading the style here, and since it's already aligned with\r\n\t// the rAF loop, this is the most appropriate place to do it perf-wise.\r\n\t//\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction calculateEmojiGridStyle(node) {\r\n\t\treturn calculateWidth(node, width => {\r\n\t\t\t/* istanbul ignore next */\r\n\t\t\tif (\"production\" !== 'test') {\r\n\t\t\t\t// jsdom throws errors for this kind of fancy stuff\r\n\t\t\t\t// read all the style/layout calculations we need to make\r\n\t\t\t\tconst style = getComputedStyle(rootElement);\r\n\r\n\t\t\t\tconst newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\r\n\t\t\t\tconst newIsRtl = style.getPropertyValue('direction') === 'rtl';\r\n\t\t\t\tconst parentWidth = node.parentElement.getBoundingClientRect().width;\r\n\t\t\t\tconst newScrollbarWidth = parentWidth - width;\r\n\r\n\t\t\t\t// write to Svelte variables\r\n\t\t\t\t$$invalidate(48, numColumns = newNumColumns);\r\n\r\n\t\t\t\t$$invalidate(25, scrollbarWidth = newScrollbarWidth); // eslint-disable-line no-unused-vars\r\n\t\t\t\t$$invalidate(24, isRtl = newIsRtl); // eslint-disable-line no-unused-vars\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction checkZwjSupportAndUpdate(zwjEmojisToCheck) {\r\n\t\tconst rootNode = rootElement.getRootNode();\r\n\t\tconst emojiToDomNode = emoji => rootNode.getElementById(`emo-${emoji.id}`);\r\n\t\tcheckZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode);\r\n\r\n\t\t// force update\r\n\t\t((((((((((($$invalidate(1, currentEmojis), $$invalidate(14, databaseLoaded)), $$invalidate(46, searchText)), $$invalidate(13, currentGroup)), $$invalidate(44, emojiVersion)), $$invalidate(3, tabpanelElement)), $$invalidate(0, i18n)), $$invalidate(40, database)), $$invalidate(2, rawSearchText)), $$invalidate(12, groups$1)), $$invalidate(11, currentGroupIndex)), $$invalidate(42, customEmoji));\r\n\t}\r\n\r\n\tfunction isZwjSupported(emoji) {\r\n\t\treturn !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\r\n\t}\r\n\r\n\tasync function filterEmojisByVersion(emojis) {\r\n\t\tconst emojiSupportLevel = emojiVersion || await detectEmojiSupportLevel();\r\n\r\n\t\t// !version corresponds to custom emoji\r\n\t\treturn emojis.filter(({ version }) => !version || version <= emojiSupportLevel);\r\n\t}\r\n\r\n\tasync function summarizeEmojis(emojis) {\r\n\t\treturn summarizeEmojisForUI(emojis, emojiVersion || await detectEmojiSupportLevel());\r\n\t}\r\n\r\n\tasync function getEmojisByGroup(group) {\r\n\r\n\t\t// -1 is custom emoji\r\n\t\tconst emoji = group === -1\r\n\t\t? customEmoji\r\n\t\t: await database.getEmojiByGroup(group);\r\n\r\n\t\treturn summarizeEmojis(await filterEmojisByVersion(emoji));\r\n\t}\r\n\r\n\tasync function getEmojisBySearchQuery(query) {\r\n\t\treturn summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onSearchKeydown(event) {\r\n\t\tif (!searchMode || !currentEmojis.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst goToNextOrPrevious = previous => {\r\n\t\t\thalt(event);\r\n\t\t\t$$invalidate(5, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\r\n\t\t};\r\n\r\n\t\tswitch (event.key) {\r\n\t\t\tcase 'ArrowDown':\r\n\t\t\t\treturn goToNextOrPrevious(false);\r\n\t\t\tcase 'ArrowUp':\r\n\t\t\t\treturn goToNextOrPrevious(true);\r\n\t\t\tcase 'Enter':\r\n\t\t\t\tif (activeSearchItem !== -1) {\r\n\t\t\t\t\thalt(event);\r\n\t\t\t\t\treturn clickEmoji(currentEmojis[activeSearchItem].id);\r\n\t\t\t\t} else if (currentEmojis.length) {\r\n\t\t\t\t\t$$invalidate(5, activeSearchItem = 0);\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\t// Handle user input on nav\r\n\t//\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onNavClick(group) {\r\n\t\t$$invalidate(2, rawSearchText = '');\r\n\t\t$$invalidate(46, searchText = '');\r\n\t\t$$invalidate(5, activeSearchItem = -1);\r\n\t\t$$invalidate(11, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onNavKeydown(event) {\r\n\t\tconst { target, key } = event;\r\n\r\n\t\tconst doFocus = el => {\r\n\t\t\tif (el) {\r\n\t\t\t\thalt(event);\r\n\t\t\t\tel.focus();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tswitch (key) {\r\n\t\t\tcase 'ArrowLeft':\r\n\t\t\t\treturn doFocus(target.previousSibling);\r\n\t\t\tcase 'ArrowRight':\r\n\t\t\t\treturn doFocus(target.nextSibling);\r\n\t\t\tcase 'Home':\r\n\t\t\t\treturn doFocus(target.parentElement.firstChild);\r\n\t\t\tcase 'End':\r\n\t\t\t\treturn doFocus(target.parentElement.lastChild);\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\t// Handle user input on an emoji\r\n\t//\r\n\tasync function clickEmoji(unicodeOrName) {\r\n\t\tconst emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\r\n\t\tconst emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\r\n\t\tconst skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\r\n\t\tawait database.incrementFavoriteEmojiCount(unicodeOrName);\r\n\r\n\t\tfireEvent('emoji-click', {\r\n\t\t\temoji,\r\n\t\t\tskinTone: currentSkinTone,\r\n\t\t\t...skinTonedUnicode && { unicode: skinTonedUnicode },\r\n\t\t\t...emojiSummary.name && { name: emojiSummary.name }\r\n\t\t});\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tasync function onEmojiClick(event) {\r\n\t\tconst { target } = event;\r\n\r\n\t\tif (!target.classList.contains('emoji')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thalt(event);\r\n\t\tconst id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\r\n\r\n\t\t/* no await */\r\n\t\tclickEmoji(id);\r\n\t}\r\n\r\n\t//\r\n\t// Handle user input on the skintone picker\r\n\t//\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction changeSkinTone(skinTone) {\r\n\t\t$$invalidate(8, currentSkinTone = skinTone);\r\n\t\t$$invalidate(6, skinTonePickerExpanded = false);\r\n\t\tfocus('skintone-button');\r\n\t\tfireEvent('skin-tone-change', { skinTone });\r\n\r\n\t\t/* no await */\r\n\t\tdatabase.setPreferredSkinTone(skinTone);\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onSkinToneOptionsClick(event) {\r\n\t\tconst { target: { id } } = event;\r\n\t\tconst match = id && id.match(/^skintone-(\\d)/); // skintone option format\r\n\r\n\t\tif (!match) {\r\n\t\t\t// not a skintone option\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thalt(event);\r\n\t\tconst skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\r\n\t\tchangeSkinTone(skinTone);\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onClickSkinToneButton(event) {\r\n\t\t$$invalidate(6, skinTonePickerExpanded = !skinTonePickerExpanded);\r\n\t\t$$invalidate(20, activeSkinTone = currentSkinTone);\r\n\r\n\t\tif (skinTonePickerExpanded) {\r\n\t\t\thalt(event);\r\n\t\t\trAF(() => focus('skintone-list'));\r\n\t\t}\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onSkinToneOptionsKeydown(event) {\r\n\t\tif (!skinTonePickerExpanded) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst changeActiveSkinTone = async nextSkinTone => {\r\n\t\t\thalt(event);\r\n\t\t\t$$invalidate(20, activeSkinTone = nextSkinTone);\r\n\t\t};\r\n\r\n\t\tswitch (event.key) {\r\n\t\t\tcase 'ArrowUp':\r\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\r\n\t\t\tcase 'ArrowDown':\r\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\r\n\t\t\tcase 'Home':\r\n\t\t\t\treturn changeActiveSkinTone(0);\r\n\t\t\tcase 'End':\r\n\t\t\t\treturn changeActiveSkinTone(skinTones.length - 1);\r\n\t\t\tcase 'Enter':\r\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\r\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\r\n\t\t\t\thalt(event);\r\n\t\t\t\treturn changeSkinTone(activeSkinTone);\r\n\t\t\tcase 'Escape':\r\n\t\t\t\thalt(event);\r\n\t\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\r\n\t\t\t\treturn focus('skintone-button');\r\n\t\t}\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction onSkinToneOptionsKeyup(event) {\r\n\t\tif (!skinTonePickerExpanded) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch (event.key) {\r\n\t\t\tcase ' ':\r\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\r\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\r\n\t\t\t\thalt(event);\r\n\t\t\t\treturn changeSkinTone(activeSkinTone);\r\n\t\t}\r\n\t}\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tasync function onSkinToneOptionsFocusOut(event) {\r\n\t\t// On blur outside of the skintone listbox, collapse the skintone picker.\r\n\t\tconst { relatedTarget } = event;\r\n\r\n\t\tif (!relatedTarget || relatedTarget.id !== 'skintone-list') {\r\n\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction input_input_handler() {\r\n\t\trawSearchText = this.value;\r\n\t\t$$invalidate(2, rawSearchText);\r\n\t}\r\n\r\n\tfunction div3_binding($$value) {\r\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\r\n\t\t\tskinToneDropdown = $$value;\r\n\t\t\t$$invalidate(7, skinToneDropdown);\r\n\t\t});\r\n\t}\r\n\r\n\tconst click_handler = group => onNavClick(group);\r\n\r\n\tfunction div10_binding($$value) {\r\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\r\n\t\t\ttabpanelElement = $$value;\r\n\t\t\t$$invalidate(3, tabpanelElement);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction button1_binding($$value) {\r\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\r\n\t\t\tbaselineEmoji = $$value;\r\n\t\t\t$$invalidate(17, baselineEmoji);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction section_binding($$value) {\r\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\r\n\t\t\trootElement = $$value;\r\n\t\t\t$$invalidate(16, rootElement);\r\n\t\t});\r\n\t}\r\n\r\n\t$$self.$$set = $$props => {\r\n\t\tif ('skinToneEmoji' in $$props) $$invalidate(41, skinToneEmoji = $$props.skinToneEmoji);\r\n\t\tif ('i18n' in $$props) $$invalidate(0, i18n = $$props.i18n);\r\n\t\tif ('database' in $$props) $$invalidate(40, database = $$props.database);\r\n\t\tif ('customEmoji' in $$props) $$invalidate(42, customEmoji = $$props.customEmoji);\r\n\t\tif ('customCategorySorting' in $$props) $$invalidate(43, customCategorySorting = $$props.customCategorySorting);\r\n\t\tif ('emojiVersion' in $$props) $$invalidate(44, emojiVersion = $$props.emojiVersion);\r\n\t};\r\n\r\n\t$$self.$$.update = () => {\r\n\t\tif ($$self.$$.dirty[1] & /*customEmoji, database*/ 2560) {\r\n\t\t\t/* eslint-enable no-unused-vars */\r\n\t\t\t//\r\n\t\t\t// Set or update the customEmoji\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tif (customEmoji && database) {\r\n\t\t\t\t\t$$invalidate(40, database.customEmoji = customEmoji, database);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*i18n*/ 1 | $$self.$$.dirty[1] & /*database*/ 512) {\r\n\t\t\t//\r\n\t\t\t// Set or update the database object\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\t// show a Loading message if it takes a long time, or show an error if there's a network/IDB error\r\n\t\t\t\tasync function handleDatabaseLoading() {\r\n\t\t\t\t\tlet showingLoadingMessage = false;\r\n\r\n\t\t\t\t\tconst timeoutHandle = setTimeout(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tshowingLoadingMessage = true;\r\n\t\t\t\t\t\t\t$$invalidate(18, message = i18n.loadingMessage);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tTIMEOUT_BEFORE_LOADING_MESSAGE\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait database.ready();\r\n\t\t\t\t\t\t$$invalidate(14, databaseLoaded = true); // eslint-disable-line no-unused-vars\r\n\t\t\t\t\t} catch(err) {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t$$invalidate(18, message = i18n.networkErrorMessage);\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tclearTimeout(timeoutHandle);\r\n\r\n\t\t\t\t\t\tif (showingLoadingMessage) {\r\n\t\t\t\t\t\t\t// Seems safer than checking the i18n string, which may change\r\n\t\t\t\t\t\t\tshowingLoadingMessage = false;\r\n\r\n\t\t\t\t\t\t\t$$invalidate(18, message = ''); // eslint-disable-line no-unused-vars\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (database) {\r\n\t\t\t\t\t/* no await */\r\n\t\t\t\t\thandleDatabaseLoading();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/ 6144 | $$self.$$.dirty[1] & /*customEmoji*/ 2048) {\r\n\t\t\t{\r\n\t\t\t\tif (customEmoji && customEmoji.length) {\r\n\t\t\t\t\t$$invalidate(12, groups$1 = [customGroup, ...groups]);\r\n\t\t\t\t} else if (groups$1 !== groups) {\r\n\t\t\t\t\tif (currentGroupIndex) {\r\n\t\t\t\t\t\t// If the current group is anything other than \"custom\" (which is first), decrement.\r\n\t\t\t\t\t\t// This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\r\n\t\t\t\t\t\t$$invalidate(11, currentGroupIndex--, currentGroupIndex);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$$invalidate(12, groups$1 = groups);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*rawSearchText*/ 4) {\r\n\t\t\t/* eslint-enable no-unused-vars */\r\n\t\t\t//\r\n\t\t\t// Handle user input on the search input\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\trIC(() => {\r\n\t\t\t\t\t$$invalidate(46, searchText = (rawSearchText || '').trim()); // defer to avoid input delays, plus we can trim here\r\n\t\t\t\t\t$$invalidate(5, activeSearchItem = -1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/ 6144) {\r\n\t\t\t//\r\n\t\t\t// Update the current group based on the currentGroupIndex\r\n\t\t\t//\r\n\t\t\t$$invalidate(13, currentGroup = groups$1[currentGroupIndex]);\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded, currentGroup*/ 24576 | $$self.$$.dirty[1] & /*searchText*/ 32768) {\r\n\t\t\t//\r\n\t\t\t// Set or update the currentEmojis. Check for invalid ZWJ renderings\r\n\t\t\t// (i.e. double emoji).\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tasync function updateEmojis() {\r\n\r\n\t\t\t\t\tif (!databaseLoaded) {\r\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = []);\r\n\t\t\t\t\t\t$$invalidate(4, searchMode = false);\r\n\t\t\t\t\t} else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\r\n\t\t\t\t\t\tconst currentSearchText = searchText;\r\n\t\t\t\t\t\tconst newEmojis = await getEmojisBySearchQuery(currentSearchText);\r\n\r\n\t\t\t\t\t\tif (currentSearchText === searchText) {\r\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\r\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\r\n\r\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (currentGroup) {\r\n\t\t\t\t\t\tconst currentGroupId = currentGroup.id;\r\n\t\t\t\t\t\tconst newEmojis = await getEmojisByGroup(currentGroupId);\r\n\r\n\t\t\t\t\t\tif (currentGroupId === currentGroup.id) {\r\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\r\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\r\n\r\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* no await */\r\n\t\t\t\tupdateEmojis();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*groups, searchMode*/ 4112) {\r\n\t\t\t//\r\n\t\t\t// Global styles for the entire picker\r\n\t\t\t//\r\n\t\t\t/* eslint-disable no-unused-vars */\r\n\t\t\t$$invalidate(22, pickerStyle = `\r\n  --num-groups: ${groups$1.length}; \r\n  --indicator-opacity: ${searchMode ? 0 : 1}; \r\n  --num-skintones: ${NUM_SKIN_TONES};`);\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 512) {\r\n\t\t\t//\r\n\t\t\t// Set or update the preferred skin tone\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tasync function updatePreferredSkinTone() {\r\n\t\t\t\t\tif (databaseLoaded) {\r\n\t\t\t\t\t\t$$invalidate(8, currentSkinTone = await database.getPreferredSkinTone());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* no await */\r\n\t\t\t\tupdatePreferredSkinTone();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[1] & /*skinToneEmoji*/ 1024) {\r\n\t\t\t$$invalidate(9, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*skinTones, currentSkinTone*/ 768) {\r\n\t\t\t/* eslint-disable no-unused-vars */\r\n\t\t\t$$invalidate(21, skinToneButtonText = skinTones[currentSkinTone]);\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*i18n, currentSkinTone*/ 257) {\r\n\t\t\t$$invalidate(23, skinToneButtonLabel = i18n.skinToneLabel.replace('{skinTone}', i18n.skinTones[currentSkinTone]));\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 512) {\r\n\t\t\t/* eslint-enable no-unused-vars */\r\n\t\t\t//\r\n\t\t\t// Set or update the favorites emojis\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tasync function updateDefaultFavoriteEmojis() {\r\n\t\t\t\t\t$$invalidate(47, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (databaseLoaded) {\r\n\t\t\t\t\t/* no await */\r\n\t\t\t\t\tupdateDefaultFavoriteEmojis();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database, numColumns, defaultFavoriteEmojis*/ 197120) {\r\n\t\t\t{\r\n\t\t\t\tasync function updateFavorites() {\r\n\t\t\t\t\tconst dbFavorites = await database.getTopFavoriteEmoji(numColumns);\r\n\t\t\t\t\tconst favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\r\n\t\t\t\t\t$$invalidate(10, currentFavorites = favorites);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (databaseLoaded && defaultFavoriteEmojis) {\r\n\t\t\t\t\t/* no await */\r\n\t\t\t\t\tupdateFavorites();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, tabpanelElement*/ 10 | $$self.$$.dirty[1] & /*emojiVersion*/ 8192) {\r\n\t\t\t// Some emojis have their ligatures rendered as two or more consecutive emojis\r\n\t\t\t// We want to treat these the same as unsupported emojis, so we compare their\r\n\t\t\t// widths against the baseline widths and remove them as necessary\r\n\t\t\t{\r\n\t\t\t\tconst zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(\r\n\t\t\t\t\temoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (!emojiVersion && zwjEmojisToCheck.length) {\r\n\t\t\t\t\t// render now, check their length later\r\n\t\t\t\t\trAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$$invalidate(1, currentEmojis = emojiVersion\r\n\t\t\t\t\t? currentEmojis\r\n\t\t\t\t\t: currentEmojis.filter(isZwjSupported));\r\n\r\n\t\t\t\t\t// Reset scroll top to 0 when emojis change\r\n\t\t\t\t\trAF(() => resetScrollTopIfPossible(tabpanelElement));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, currentFavorites*/ 1026 | $$self.$$.dirty[1] & /*initialLoad*/ 16384) {\r\n\t\t\t{\r\n\t\t\t\t// consider initialLoad to be complete when the first tabpanel and favorites are rendered\r\n\t\t\t\t/* istanbul ignore next */\r\n\t\t\t\tif (\"production\" !== 'production' || false) {\r\n\t\t\t\t\tif (currentEmojis.length && currentFavorites.length && initialLoad) {\r\n\t\t\t\t\t\t$$invalidate(45, initialLoad = false);\r\n\t\t\t\t\t\trequestPostAnimationFrame(() => (void 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*searchMode, currentEmojis*/ 18 | $$self.$$.dirty[1] & /*customCategorySorting*/ 4096) {\r\n\t\t\t//\r\n\t\t\t// Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\r\n\t\t\t// are no categories, because it's just easier to code the HTML this way.\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tfunction calculateCurrentEmojisWithCategories() {\r\n\t\t\t\t\tif (searchMode) {\r\n\t\t\t\t\t\treturn [{ category: '', emojis: currentEmojis }];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst categoriesToEmoji = new Map();\r\n\r\n\t\t\t\t\tfor (const emoji of currentEmojis) {\r\n\t\t\t\t\t\tconst category = emoji.category || '';\r\n\t\t\t\t\t\tlet emojis = categoriesToEmoji.get(category);\r\n\r\n\t\t\t\t\t\tif (!emojis) {\r\n\t\t\t\t\t\t\temojis = [];\r\n\t\t\t\t\t\t\tcategoriesToEmoji.set(category, emojis);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\temojis.push(emoji);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn [...categoriesToEmoji.entries()].map(([category, emojis]) => ({ category, emojis })).sort((a, b) => customCategorySorting(a.category, b.category));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// eslint-disable-next-line no-unused-vars\r\n\t\t\t\t$$invalidate(15, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*activeSearchItem, currentEmojis*/ 34) {\r\n\t\t\t//\r\n\t\t\t// Handle active search item (i.e. pressing up or down while searching)\r\n\t\t\t//\r\n\t\t\t/* eslint-disable no-unused-vars */\r\n\t\t\t$$invalidate(26, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\r\n\t\t}\r\n\r\n\t\tif ($$self.$$.dirty[0] & /*skinTonePickerExpanded, skinToneDropdown*/ 192) {\r\n\t\t\t// To make the animation nicer, change the z-index of the skintone picker button\r\n\t\t\t// *after* the animation has played. This makes it appear that the picker box\r\n\t\t\t// is expanding \"below\" the button\r\n\t\t\t{\r\n\t\t\t\tif (skinTonePickerExpanded) {\r\n\t\t\t\t\tskinToneDropdown.addEventListener(\r\n\t\t\t\t\t\t'transitionend',\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = true); // eslint-disable-line no-unused-vars\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ once: true }\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = false); // eslint-disable-line no-unused-vars\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn [\r\n\t\ti18n,\r\n\t\tcurrentEmojis,\r\n\t\trawSearchText,\r\n\t\ttabpanelElement,\r\n\t\tsearchMode,\r\n\t\tactiveSearchItem,\r\n\t\tskinTonePickerExpanded,\r\n\t\tskinToneDropdown,\r\n\t\tcurrentSkinTone,\r\n\t\tskinTones,\r\n\t\tcurrentFavorites,\r\n\t\tcurrentGroupIndex,\r\n\t\tgroups$1,\r\n\t\tcurrentGroup,\r\n\t\tdatabaseLoaded,\r\n\t\tcurrentEmojisWithCategories,\r\n\t\trootElement,\r\n\t\tbaselineEmoji,\r\n\t\tmessage,\r\n\t\tskinTonePickerExpandedAfterAnimation,\r\n\t\tactiveSkinTone,\r\n\t\tskinToneButtonText,\r\n\t\tpickerStyle,\r\n\t\tskinToneButtonLabel,\r\n\t\tisRtl,\r\n\t\tscrollbarWidth,\r\n\t\tactiveSearchItemId,\r\n\t\tunicodeWithSkin,\r\n\t\tlabelWithSkin,\r\n\t\ttitleForEmoji,\r\n\t\tcalculateEmojiGridStyle,\r\n\t\tonSearchKeydown,\r\n\t\tonNavClick,\r\n\t\tonNavKeydown,\r\n\t\tonEmojiClick,\r\n\t\tonSkinToneOptionsClick,\r\n\t\tonClickSkinToneButton,\r\n\t\tonSkinToneOptionsKeydown,\r\n\t\tonSkinToneOptionsKeyup,\r\n\t\tonSkinToneOptionsFocusOut,\r\n\t\tdatabase,\r\n\t\tskinToneEmoji,\r\n\t\tcustomEmoji,\r\n\t\tcustomCategorySorting,\r\n\t\temojiVersion,\r\n\t\tinitialLoad,\r\n\t\tsearchText,\r\n\t\tdefaultFavoriteEmojis,\r\n\t\tnumColumns,\r\n\t\tinput_input_handler,\r\n\t\tdiv3_binding,\r\n\t\tclick_handler,\r\n\t\tdiv10_binding,\r\n\t\tbutton1_binding,\r\n\t\tsection_binding\r\n\t];\r\n}\r\n\r\nclass Picker extends SvelteComponent {\r\n\tconstructor(options) {\r\n\t\tsuper();\r\n\r\n\t\tinit(\r\n\t\t\tthis,\r\n\t\t\toptions,\r\n\t\t\tinstance,\r\n\t\t\tcreate_fragment,\r\n\t\t\tsafe_not_equal,\r\n\t\t\t{\r\n\t\t\t\tskinToneEmoji: 41,\r\n\t\t\t\ti18n: 0,\r\n\t\t\t\tdatabase: 40,\r\n\t\t\t\tcustomEmoji: 42,\r\n\t\t\t\tcustomCategorySorting: 43,\r\n\t\t\t\temojiVersion: 44\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t\t[-1, -1, -1]\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\r\nconst DEFAULT_LOCALE = 'en';\r\n\r\nvar enI18n = {\r\n  categoriesLabel: 'Categories',\r\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\r\n  favoritesLabel: 'Favorites',\r\n  loadingMessage: 'Loading…',\r\n  networkErrorMessage: 'Could not load emoji.',\r\n  regionLabel: 'Emoji picker',\r\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\r\n  searchLabel: 'Search',\r\n  searchResultsLabel: 'Search results',\r\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\r\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\r\n  skinTonesLabel: 'Skin tones',\r\n  skinTones: [\r\n    'Default',\r\n    'Light',\r\n    'Medium-Light',\r\n    'Medium',\r\n    'Medium-Dark',\r\n    'Dark'\r\n  ],\r\n  categories: {\r\n    custom: 'Custom',\r\n    'smileys-emotion': 'Smileys and emoticons',\r\n    'people-body': 'People and body',\r\n    'animals-nature': 'Animals and nature',\r\n    'food-drink': 'Food and drink',\r\n    'travel-places': 'Travel and places',\r\n    activities: 'Activities',\r\n    objects: 'Objects',\r\n    symbols: 'Symbols',\r\n    flags: 'Flags'\r\n  }\r\n};\r\n\r\nconst PROPS = [\r\n  'customEmoji',\r\n  'customCategorySorting',\r\n  'database',\r\n  'dataSource',\r\n  'i18n',\r\n  'locale',\r\n  'skinToneEmoji',\r\n  'emojiVersion'\r\n];\r\n\r\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\r\nconst EXTRA_STYLES = `:host{--emoji-font-family:${FONT_FAMILY}}`;\r\n\r\nclass PickerElement extends HTMLElement {\r\n  constructor (props) {\r\n    super();\r\n    this.attachShadow({ mode: 'open' });\r\n    const style = document.createElement('style');\r\n    style.textContent = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\" + EXTRA_STYLES;\r\n    this.shadowRoot.appendChild(style);\r\n    this._ctx = {\r\n      // Set defaults\r\n      locale: DEFAULT_LOCALE,\r\n      dataSource: DEFAULT_DATA_SOURCE,\r\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\r\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\r\n      customEmoji: null,\r\n      i18n: enI18n,\r\n      emojiVersion: null,\r\n      ...props\r\n    };\r\n    // Handle properties set before the element was upgraded\r\n    for (const prop of PROPS) {\r\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\r\n        this._ctx[prop] = this[prop];\r\n        delete this[prop];\r\n      }\r\n    }\r\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\r\n  }\r\n\r\n  connectedCallback () {\r\n    // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\r\n    // do nothing (preserve the state)\r\n    if (!this._cmp) {\r\n      this._cmp = new Picker({\r\n        target: this.shadowRoot,\r\n        props: this._ctx\r\n      });\r\n    }\r\n  }\r\n\r\n  disconnectedCallback () {\r\n    // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\r\n    // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\r\n    Promise.resolve().then(() => {\r\n      // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\r\n      if (!this.isConnected && this._cmp) {\r\n        this._cmp.$destroy();\r\n        this._cmp = undefined;\r\n\r\n        const { database } = this._ctx;\r\n        database.close()\r\n          // only happens if the database failed to load in the first place, so we don't care\r\n          .catch(err => console.error(err));\r\n      }\r\n    });\r\n  }\r\n\r\n  static get observedAttributes () {\r\n    return ['locale', 'data-source', 'skin-tone-emoji', 'emoji-version'] // complex objects aren't supported, also use kebab-case\r\n  }\r\n\r\n  attributeChangedCallback (attrName, oldValue, newValue) {\r\n    this._set(\r\n      // convert from kebab-case to camelcase\r\n      // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\r\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\r\n      // convert string attribute to float if necessary\r\n      attrName === 'emoji-version' ? parseFloat(newValue) : newValue\r\n    );\r\n  }\r\n\r\n  _set (prop, newValue) {\r\n    this._ctx[prop] = newValue;\r\n    if (this._cmp) {\r\n      this._cmp.$set({ [prop]: newValue });\r\n    }\r\n    if (['locale', 'dataSource'].includes(prop)) {\r\n      this._dbFlush();\r\n    }\r\n  }\r\n\r\n  _dbCreate () {\r\n    const { locale, dataSource, database } = this._ctx;\r\n    // only create a new database if we really need to\r\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\r\n      this._set('database', new Database({ locale, dataSource }));\r\n    }\r\n  }\r\n\r\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\r\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\r\n  _dbFlush () {\r\n    Promise.resolve().then(() => (\r\n      this._dbCreate()\r\n    ));\r\n  }\r\n}\r\n\r\nconst definitions = {};\r\n\r\nfor (const prop of PROPS) {\r\n  definitions[prop] = {\r\n    get () {\r\n      if (prop === 'database') {\r\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\r\n        // now if the user is asking for it\r\n        this._dbCreate();\r\n      }\r\n      return this._ctx[prop]\r\n    },\r\n    set (val) {\r\n      if (prop === 'database') {\r\n        throw new Error('database is read-only')\r\n      }\r\n      this._set(prop, val);\r\n    }\r\n  };\r\n}\r\n\r\nObject.defineProperties(PickerElement.prototype, definitions);\r\n\r\n/* istanbul ignore else */\r\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\r\n  customElements.define('emoji-picker', PickerElement);\r\n}\r\n\r\nexport { PickerElement as default };\r\n"],
  "mappings": "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",
  "names": ["set", "keyPath", "res", "emoji", "version", "_", "result", "customEmojiIndex", "results", "currentMap", "text", "create_each_block", "insert", "instance", "create_fragment", "MIN_SEARCH_TEXT_LENGTH", "uniqBy", "set", "uniqBy", "element", "ctx", "currentSkinTone", "$$props", "MIN_SEARCH_TEXT_LENGTH", "DEFAULT_DATA_SOURCE", "DEFAULT_LOCALE"]
}
