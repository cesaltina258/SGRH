import{d as w,J as P,K as T,L as F,l as c,c as E,M as R,b as y,f as h,x as a,w as o,D as q,G as C,N as z,O as H,Q,I as i,C as j,g as d,R as G,F as $,E as J,i as s,S as K,H as M,U as W,W as X,X as Y,e as Z,B as ee}from"./index-1db35709.js";import{u as te}from"./employeeStore-f577474d.js";import{D as le}from"./DataTableServer-f256364c.js";import{_ as ae}from"./TableAction.vue_vue_type_script_setup_true_lang-6eb16471.js";const se=[{title:"employees",disabled:!1},{title:"list-view",disabled:!0}],D=[{title:"employee-number",key:"employeeNumber",sortable:!0},{title:"employee-name",key:"firstName",sortable:!0},{title:"phone-number",key:"phone",sortable:!0},{title:"email",key:"email",sortable:!0},{title:"action",sortable:!1}],oe=s("i",{class:"ph-plus-circle"},null,-1),ne=["onClick"],re=["colspan"],ie=s("i",{class:"ph-magnifying-glass",style:{"font-size":"30px"}},null,-1),de={class:"text-subtitle-1 font-weight-bold mt-3"},ue="firstName,lastName,email,employeeNumber,phone",me=w({__name:"Listing",setup(N){const{t:f}=P(),v=T(),p=F(),u=te(),g=c(""),_=c(!1),b=c(null),V=c(!1),k=c(10),n=c([]),O=E(()=>u.loading),S=E(()=>u.pagination.totalElements);R(n,e=>{console.log("FuncionÃ¡rios selecionados:",e)},{deep:!0});const B=async({page:e,itemsPerPage:r,sortBy:t,search:l})=>{var m,x;await u.fetchEmployees(e-1,r,((m=t[0])==null?void 0:m.key)||"createdAt",((x=t[0])==null?void 0:x.order)||"asc",ue,l)},I=e=>{p.push(`/employee/view/${e}`)},L=e=>{b.value=e,_.value=!0},U=async()=>{if(b.value){V.value=!0;try{await Y.deleteEmployee(b.value),v.success(f("t-toast-message-deleted")),await u.fetchEmployees(0,k.value)}catch{v.error(f("t-toast-message-deleted-error"))}finally{V.value=!1,_.value=!1}}},A=e=>{n.value.findIndex(t=>t.id===e.id)===-1?n.value=[...n.value,e]:n.value=n.value.filter(t=>t.id!==e.id)};return(e,r)=>(y(),h($,null,[a(W,{title:e.$t("t-employee-list"),class:"mt-7"},{"title-action":o(()=>[a(q,{justify:"end",align:"center","no-gutters":""},{default:o(()=>[a(C,{cols:"12",sm:"6",md:"4"},{default:o(()=>[a(z,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=t=>g.value=t),placeholder:e.$t("t-search-employee")},null,8,["modelValue","placeholder"])]),_:1}),a(C,{cols:"12",sm:"6",md:"auto",class:"ms-sm-3 mt-sm-0 mt-2"},{default:o(()=>[a(H,{color:"secondary",to:"/employee/create",block:""},{default:o(()=>[oe,Q(" "+i(e.$t("t-add-employee")),1)]),_:1})]),_:1})]),_:1})]),default:o(()=>[a(j,null,{default:o(()=>[a(le,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=t=>n.value=t),headers:d(D).map(t=>({...t,title:e.$t(`t-${t.title}`)})),items:d(u).employees,"items-per-page":k.value,"total-items":S.value,loading:O.value,"search-query":g.value,onLoadItems:B,"item-value":"id","show-select":""},G({body:o(({items:t})=>[(y(!0),h($,null,J(t,l=>(y(),h("tr",{key:l.id},[s("td",null,[a(K,{"model-value":n.value.some(m=>m.id===l.id),"onUpdate:modelValue":m=>A(l),"hide-details":"",density:"compact"},null,8,["model-value","onUpdate:modelValue"])]),s("td",{class:"text-primary cursor-pointer",onClick:m=>I(l.id)}," #"+i(l.employeeNumber||"N/A"),9,ne),s("td",null,i(l.firstName)+" "+i(l.lastName),1),s("td",null,i(l.phone||"N/A"),1),s("td",null,i(l.email||"N/A"),1),s("td",null,[a(ae,{onOnView:()=>d(p).push(`/employee/view/${l.id}`),onOnEdit:()=>d(p).push(`/employee/edit/${l.id}`),onOnDelete:()=>L(l.id)},null,8,["onOnView","onOnEdit","onOnDelete"])])]))),128))]),_:2},[d(u).employees.length===0?{name:"body",fn:o(()=>[s("tr",null,[s("td",{colspan:d(D).length,class:"text-center py-10"},[a(M,{size:"80",color:"primary",variant:"tonal"},{default:o(()=>[ie]),_:1}),s("div",de,i(e.$t("t-search-not-found-message")),1)],8,re)])]),key:"0"}:void 0]),1032,["modelValue","headers","items","items-per-page","total-items","loading","search-query"])]),_:1})]),_:1},8,["title"]),a(X,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=t=>_.value=t),onOnConfirm:U,loading:V.value},null,8,["modelValue","loading"])],64))}}),ce=w({__name:"index",setup(N){return(f,v)=>(y(),Z(me,{class:"mt-5"}))}}),_e=w({__name:"List",setup(N){return(f,v)=>{const p=ee("Breadcrumb");return y(),h($,null,[a(p,{title:"employee-list",items:d(se)},null,8,["items"]),a(ce)],64)}}});export{_e as default};
