import{d as K,l as n,cK as b,c as k,m as R,M as g,B as J,b as d,f as P,x as u,w as c,C as Q,e as A,cL as X,h as D,O as Y,F as T,aF as Z,i as s,T as B,bP as ee,S as le,D as te,aG as ae,g as U,cM as se,E as ne,W as ue,H as N,bh as oe,I as v,ag as re,cN as ce}from"./index-96068b83.js";const ie=s("i",{class:"ph-plus-circle mx-1"},null,-1),de={class:"d-flex align-center"},ve={class:"font-weight-bold"},fe=s("i",{class:"bx bxs-star mx-1"},null,-1),me={key:0,class:"text-center pa-7"},ge={class:"mb-3"},pe=s("i",{class:"ph-magnifying-glass ph-lg"},null,-1),he=s("div",{class:"text-subtitle-1 font-weight-bold"}," Sorry! No Result Found ",-1),_e=s("div",{class:"text-muted mt-1"}," We've searched more than 150+ products We did not find any products for you search. ",-1),Ce=K({__name:"Listing",props:{filters:{type:Object,default:()=>{}}},setup(w){const I=w,i=n(!1),p=n(null),h=n(!1),V=n(null),O=n(!1),M=b.map(e=>({...e,isChecked:!1})),a=n(M),f=n(a.value),x=n(1),S=k(()=>f.value.length),_=n([]),y=n(!1),o=n({page:x.value,start:0,end:0,noOfItems:S.value,itemsPerPage:10}),L=()=>{const{itemsPerPage:e,page:t}=o.value,r=(t-1)*e;let l=r+e;l=l<=S.value?l:S.value,o.value={...o.value,start:r,end:l};const C=a.value.slice(o.value.start,o.value.end);y.value=!0,_.value=[],setTimeout(()=>{_.value=C,y.value=!1},200)};R(()=>{L()}),g(x,e=>{o.value.page=e,L()});const W=k(()=>I.filters.query);g(W,e=>{a.value=f.value.filter(t=>{const r=e.toLowerCase();if(t.title.toLowerCase().includes(r)||t.price.includes(r))return t}),m(a.value)});const F=k(()=>I.filters.category);g(F,e=>{e?a.value=f.value.filter(t=>t.category===e):a.value=b,m(a.value)});const E=k(()=>I.filters.discount);g(E,e=>{e?a.value=f.value.filter(t=>t.discount===e):a.value=b,m(a.value)});const $=()=>{O.value=!O.value,a.value=a.value.map(e=>({...e,isChecked:O.value}))},j=(e,t)=>{e==="edit"?(p.value=t,i.value=!0):e==="remove"&&(h.value=!0,V.value=t)};g(i,e=>{e||(p.value=null)}),g(h,e=>{e||(V.value=null)});const q=e=>{a.value=a.value.map(t=>t.id===e.id?{...t,...e}:{...t}),i.value=!1,f.value=a.value,m(a.value)},z=e=>{a.value.unshift(e),f.value=a.value,m(a.value),i.value=!1},H=()=>{p.value={img:null,img_alt:"",title:"",category:"",stock:"",price:"",discount:"",orders:"",ratings:"",publish:"",id:-1},i.value=!0},G=()=>{a.value=b.filter(e=>{var t;return e.id!==((t=V.value)==null?void 0:t.id)}),h.value=!1,m(a.value)},m=e=>{y.value=!0;const{itemsPerPage:t}=o.value,r=1;let l=r+t;l=l<=e.length?l:e.length,_.value=[],setTimeout(()=>{_.value=e,o.value={...o.value,start:r,end:l,noOfItems:e.length},y.value=!1},200)};return(e,t)=>{const r=J("ListMenuWithIcon");return d(),P(T,null,[u(Q,null,{default:c(()=>[u(Z,{class:"text-subtitle-1 font-weight-bold d-flex justify-space-between align-center"},{default:c(()=>[s("div",null,[B(" Products "),u(ee,{content:"254",inline:"",color:"light",rounded:"sm"})]),u(le,{color:"primary",elevation:"0",class:"mt-2",onClick:H},{default:c(()=>[ie,B(" Add Product ")]),_:1})]),_:1}),u(te,null,{default:c(()=>[u(ae,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=l=>x.value=l),config:o.value,headerItems:U(se),"is-pagination":"",loading:y.value,onOnSelectAll:$},{body:c(()=>[(d(!0),P(T,null,ne(_.value,l=>(d(),P("tr",{key:l.title},[s("td",null,[u(ue,{modelValue:l.isChecked,"onUpdate:modelValue":C=>l.isChecked=C,color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),s("td",null,[s("div",de,[u(N,{color:"light",class:"pa-2 mx-1",rounded:""},{default:c(()=>[l.img?(d(),A(oe,{key:0,src:l.img[0]},null,8,["src"])):D("",!0)]),_:2},1024),s("span",ve,v(l.title),1)])]),s("td",null,v(l.category),1),s("td",null,v(l.stock),1),s("td",null,v(l.price),1),s("td",null,v(l.orders),1),s("td",null,[u(re,{color:"warning",rounded:"sm ",size:"x-small"},{default:c(()=>[fe,B(" "+v(l.ratings),1)]),_:2},1024)]),s("td",null,v(l.publish),1),s("td",null,[u(r,{menuItems:U(ce),onOnSelect:C=>j(C,l)},null,8,["menuItems","onOnSelect"])])]))),128))]),_:1},8,["modelValue","config","headerItems","loading"]),a.value.length?D("",!0):(d(),P("div",me,[s("div",ge,[u(N,{color:"primary",variant:"tonal",size:"x-large"},{default:c(()=>[pe]),_:1})]),he,_e]))]),_:1})]),_:1}),p.value?(d(),A(X,{key:0,modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),productDetail:p.value,onOnUpdate:q,onOnCreate:z},null,8,["modelValue","productDetail"])):D("",!0),V.value?(d(),A(Y,{key:1,modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=l=>h.value=l),onOnConfirm:G},null,8,["modelValue"])):D("",!0)],64)}}});export{Ce as _};
