import{d as q,l as u,c as Q,B as L,b as c,e as O,w as s,x as t,O as B,aD as Z,a1 as de,h as N,C as ne,i as a,I as T,f as x,E as X,H as W,br as oe,Q as _,g as U,dT as J,F as E,D as Y,G as S,a2 as K,dU as re,dV as ce,a3 as ve,ab as me,L as pe,dW as ee,m as fe,M,N as ge,aG as _e,dX as he,S as ke,q as te,dd as le,T as ae,W as Ve,dY as xe,dZ as ye}from"./index-1db35709.js";import{_ as Ce}from"./TableAction.vue_vue_type_script_setup_true_lang-6eb16471.js";import{_ as se}from"./Status.vue_vue_type_script_setup_true_lang-8d758673.js";const be=a("div",{class:"font-weight-bold mb-2"},[_(" Client Name "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Te={class:"font-weight-bold"},De={"data-simplebar":"",style:{"max-height":"200px"},class:"mb-4"},$e={class:"d-flex align-center"},we={class:"font-weight-bold"},Ue=a("div",{class:"font-weight-bold mb-2"},[_(" Ticket Title "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Pe=a("div",{class:"font-weight-bold mb-2"},[_(" Create Date "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ne=a("div",{class:"font-weight-bold mb-2"},[_(" Due Date "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Oe=a("div",{class:"font-weight-bold mb-2 mt-4"},[_(" Priority "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ee=a("div",{class:"font-weight-bold mb-2 mt-4"},[_(" Status "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ae=q({__name:"CreateEditDialog",props:{modelValue:{type:Boolean,default:!1},data:{type:Object,required:!0}},emits:["update:modelValue","onCreateUpdate"],setup(z,{emit:A}){const h=A,p=z,D=p.data.id===-1,d=u(""),f=u(p.data),F=Q(()=>f.value.assignedTo.map(v=>v.id)),i=u(f.value.clientName||""),y=u(F.value),k=u(f.value.ticketTitle||""),C=u(f.value.createDate||""),m=u(f.value.dueDate||""),g=u(f.value.priority||""),r=u(f.value.status||""),$=Q({get(){return p.modelValue},set(v){h("update:modelValue",v)}}),I=v=>{if(w(v.id)){const n=y.value.indexOf(v.id);n>-1&&y.value.splice(n,1)}else y.value.push(v.id)},w=v=>y.value.includes(v),R=()=>{if(i.value?y.value.length?k.value?C.value?m.value?g.value?r.value||(d.value="Please Enter status"):d.value="Please Enter priority":d.value="Please Enter dueDate":d.value="Please Enter createDate":d.value="Please Enter ticketTitle":d.value="Please Enter assignedTo":d.value="Please Enter clientName",setTimeout(()=>{d.value=""},3e3),!i.value||!y.value.length||!k.value||!C.value||!m.value||!g.value||!r.value)return;d.value="";const v=J.filter(P=>w(P.id)),n={...p.data,clientName:i.value,assignedTo:v,ticketTitle:k.value,createDate:C.value,dueDate:m.value,priority:g.value,status:r.value};h("onCreateUpdate",n)};return(v,n)=>{const P=L("TextField"),j=L("VueDatePicker"),G=L("Card");return c(),O(me,{modelValue:$.value,"onUpdate:modelValue":n[8]||(n[8]=e=>$.value=e),width:"550",scrollable:!1,persistent:""},{default:s(()=>[t(G,{title:D?"Add Ticket":"Edit Ticket","title-class":"py-0",style:{overflow:"hidden"}},{"title-action":s(()=>[t(B,{icon:"ph-x",variant:"plain",onClick:n[0]||(n[0]=e=>$.value=!1)})]),default:s(()=>[t(Z),d.value?(c(),O(de,{key:0,text:d.value,variant:"tonal",color:"danger",class:"mx-5 mt-3",density:"compact"},null,8,["text"])):N("",!0),t(ne,{"data-simplebar":"",style:{"max-height":"calc(100vh - 500px)"}},{default:s(()=>[be,t(P,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=e=>i.value=e),placeholder:"Enter Client name"},null,8,["modelValue"]),a("div",Te,"Assigned To : "+T(y.value),1),a("div",De,[(c(!0),x(E,null,X(U(J),e=>(c(),x("div",{key:e.id,class:"my-3 d-flex justify-space-between"},[a("div",$e,[t(W,{size:"small",class:"me-2"},{default:s(()=>[t(oe,{src:e.assigneeImg},null,8,["src"])]),_:2},1024),a("div",we,T(e.assigneeName),1)]),t(B,{color:"light",density:"compact",onClick:o=>I(e)},{default:s(()=>[_(T(w(e.id)?"remove":"Add"),1)]),_:2},1032,["onClick"])]))),128))]),Ue,t(P,{modelValue:k.value,"onUpdate:modelValue":n[2]||(n[2]=e=>k.value=e),placeholder:"Ticket Title"},null,8,["modelValue"]),t(Y,null,{default:s(()=>[t(S,{cols:"12",lg:"6"},{default:s(()=>[Pe,t(j,{modelValue:C.value,"onUpdate:modelValue":n[3]||(n[3]=e=>C.value=e),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"])]),_:1}),t(S,{cols:"12",lg:"6"},{default:s(()=>[Ne,t(j,{modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=e=>m.value=e),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"])]),_:1})]),_:1}),Oe,t(K,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=e=>g.value=e),items:U(re)},null,8,["modelValue","items"]),Ee,t(K,{modelValue:r.value,"onUpdate:modelValue":n[6]||(n[6]=e=>r.value=e),items:U(ce)},null,8,["modelValue","items"])]),_:1}),t(Z),t(ve,null,{default:s(()=>[t(Y,{justify:"end"},{default:s(()=>[t(S,{class:"text-right"},{default:s(()=>[t(B,{color:"danger",onClick:n[7]||(n[7]=e=>$.value=!1)},{default:s(()=>[_(" Close")]),_:1}),t(B,{color:"primary",variant:"elevated",onClick:R},{default:s(()=>[_(T(D?"Create Ticket":"Update Ticket"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),Ie=a("i",{class:"ph-plus-circle me-1"},null,-1),Be={class:"text-primary font-weight-bold"},Le={class:"d-flex"},Se={key:0,class:"text-center my-10"},ze=a("i",{class:"ph-magnifying-glass",style:{"font-size":"30px"},color:"primary"},null,-1),Fe=a("div",{class:"font-weight-bold text-subtitle-1 mb-1"}," Sorry! No Result Found ",-1),je=a("div",{class:"text-muted"}," We've searched more than 6k+ tickets We did not find any tickets for you search. ",-1),Me=q({__name:"Listing",setup(z){const A=pe(),h=u(!1),p=u(null),D=u(!1),d=u(null),f=u(!1),F=ee.map(e=>({...e,isChecked:!1})),i=u(F),y=u(i.value),k=u(1),C=Q(()=>y.value.length),m=u([]),g=u(!1),r=u({page:k.value,start:0,end:0,noOfItems:C.value,itemsPerPage:10}),$=()=>{const{itemsPerPage:e,page:o}=r.value,V=(o-1)*e;let l=V+e;l=l<=C.value?l:C.value,r.value={...r.value,start:V,end:l};const H=i.value.slice(r.value.start,r.value.end);g.value=!0,m.value=[],setTimeout(()=>{m.value=H,g.value=!1},200)},I=e=>{g.value=!0;const{itemsPerPage:o}=r.value,V=1;let l=V+o;l=l<=e.length?l:e.length,m.value=[],setTimeout(()=>{m.value=e,r.value={...r.value,start:V,end:l,noOfItems:e.length},g.value=!1},200)};fe(()=>{$()}),M(k,e=>{r.value.page=e,$()});const w=u("");M(w,e=>{i.value=F.filter(o=>{const V=e.toLowerCase();if(o.ticketTitle.toLowerCase().includes(V)||o.clientName.toLowerCase().includes(V))return o}),I(i.value)}),M(h,e=>{e||(p.value=null)}),M(D,e=>{e||(d.value=null)});const R=()=>{f.value=!f.value,m.value=m.value.map(e=>({...e,isChecked:f.value}))},v=e=>{e?p.value=e:p.value={id:-1,ticketTitle:"",clientName:"",createDate:"",dueDate:"",priority:"",status:"",assignedTo:[]},h.value=!0},n=()=>{A.push({path:"/tickets/overview"})},P=e=>{e.id===-1?i.value.unshift({...e,id:ee.length+1,isChecked:!1}):i.value=i.value.map(o=>e.id===o.id?{...o,...e}:o),I(i.value),h.value=!1},j=e=>{d.value=e,D.value=!0},G=()=>{i.value=i.value.filter(e=>e.id!==d.value),D.value=!1,I(i.value)};return(e,o)=>{const V=L("Card");return c(),x(E,null,[t(V,{title:"Tickets List",class:"mt-5"},{"title-action":s(()=>[t(Y,{justify:"end",align:"center"},{default:s(()=>[t(S,{lg:"3"},{default:s(()=>[t(ge,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=l=>w.value=l),placeholder:"Search for tickets, date, client or something..."},null,8,["modelValue"])]),_:1}),t(S,{cols:"auto"},{default:s(()=>[t(B,{color:"secondary",onClick:o[1]||(o[1]=l=>v(null))},{default:s(()=>[Ie,_(" Add Ticket ")]),_:1})]),_:1})]),_:1})]),default:s(()=>[t(ne,null,{default:s(()=>[t(_e,{modelValue:k.value,"onUpdate:modelValue":o[2]||(o[2]=l=>k.value=l),"is-pagination":"",config:r.value,loading:g.value,headerItems:U(he),onOnSelectAll:R},{body:s(()=>[(c(!0),x(E,null,X(m.value,(l,H)=>(c(),x("tr",{key:"ticket-list-item-"+H,height:"50"},[a("td",null,[t(ke,{modelValue:l.isChecked,"onUpdate:modelValue":b=>l.isChecked=b,"hide-details":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",Be," #TBS"+T(243019+l.id),1),a("td",null,[a("div",Le,[(c(!0),x(E,null,X(l.assignedTo,(b,ue)=>(c(),x("div",{class:"position-relative",key:b.assigneeName},[ue<3?(c(),O(le,{key:0,text:b.assigneeName,location:"top"},{activator:s(({props:ie})=>[t(W,te(ie,{size:"30",class:"avatar-group-item curser-pointer"}),{default:s(()=>[t(oe,{src:b.assigneeImg},null,8,["src"])]),_:2},1040)]),_:2},1032,["text"])):N("",!0)]))),128)),l.assignedTo.length>3?(c(),O(le,{key:0,text:`+${l.assignedTo.length-3} more`,location:"top"},{activator:s(({props:b})=>[t(W,te(b,{size:"30",class:"avatar-group-item curser-pointer",color:"primary"}),{default:s(()=>[_(" +1 ")]),_:2},1040)]),_:2},1032,["text"])):N("",!0)])]),a("td",null,T(l.ticketTitle),1),a("td",null,T(l.clientName),1),a("td",null,T(U(ae)(l.createDate)),1),a("td",null,T(U(ae)(l.dueDate)),1),a("td",null,[t(se,{status:l.priority,variant:"elevated"},null,8,["status"])]),a("td",null,[t(se,{status:l.status},null,8,["status"])]),a("td",null,[t(Ce,{onOnView:n,onOnEdit:b=>v(l),onOnDelete:b=>j(l.id)},null,8,["onOnEdit","onOnDelete"])])]))),128))]),_:1},8,["modelValue","config","loading","headerItems"]),i.value.length?N("",!0):(c(),x("div",Se,[t(W,{size:"80",color:"primary",variant:"tonal",class:"mb-3"},{default:s(()=>[ze]),_:1}),Fe,je]))]),_:1})]),_:1}),p.value?(c(),O(Ae,{key:0,data:p.value,modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=l=>h.value=l),onOnCreateUpdate:P},null,8,["data","modelValue"])):N("",!0),d.value?(c(),O(Ve,{key:1,modelValue:D.value,"onUpdate:modelValue":o[4]||(o[4]=l=>D.value=l),onOnConfirm:G},null,8,["modelValue"])):N("",!0)],64)}}}),We=q({__name:"index",setup(z){return(A,h)=>(c(),x(E,null,[t(xe),t(Me)],64))}}),He=q({__name:"List",setup(z){return(A,h)=>{const p=L("Breadcrumb");return c(),x(E,null,[t(p,{title:"List View",items:U(ye)},null,8,["items"]),t(We)],64)}}});export{He as default};
