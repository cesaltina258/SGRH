import{d as Y,c as x,b as M,f as ve,x as t,w as s,G as p,O as R,Q as $,I as i,D as I,J as K,K as Q,L as ae,l as P,m as X,M as J,B as A,e as F,a0 as H,a1 as W,h as j,C as Z,i as r,g as a,a2 as B,a3 as oe,a4 as se,a5 as ne,a6 as de,a7 as ee,Y as ye,ad as be,X as q,af as ge,ag as he,aa as le}from"./index-1db35709.js";import{g as Ve,m as _e,a as $e,V as L,n as Ce,u as re,c as ie}from"./positionStore-89368d45.js";import{u as ue}from"./employeeStore-f577474d.js";import{u as we,a as me}from"./countryStore-b737b676.js";import{V as pe}from"./VForm-e699bf82.js";import{u as ce}from"./institutionStore-ddfd69e4.js";const De={class:"d-flex justify-space-between align-center"},ke=Y({__name:"ButtonNav",props:{modelValue:{type:Number,default:1},employeeId:{type:[String],default:null},basicDataValidated:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(C,{emit:O}){const u=O,U=C,k=x({get(){return U.modelValue},set(h){u("update:modelValue",h)}}),w=h=>U.employeeId?!1:h>1&&!U.basicDataValidated;return(h,D)=>(M(),ve("div",De,[t(I,{"no-gutters":""},{default:s(()=>[t(p,{cols:"6"},{default:s(()=>[t(R,{rounded:"0",color:"primary",block:"",variant:k.value===1?"elevated":"tonal",onClick:D[0]||(D[0]=g=>k.value=1),disabled:w(1)},{default:s(()=>[$(i(h.$t("t-general-information")),1)]),_:1},8,["variant","disabled"])]),_:1}),t(p,{cols:"6"},{default:s(()=>[t(R,{rounded:"0",color:"primary",block:"",variant:k.value===2?"elevated":"tonal",onClick:D[1]||(D[1]=g=>k.value=2),disabled:w(2)},{default:s(()=>[$(i(h.$t("t-institution-and-classification")),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]))}}),T=C=>(ne("data-v-30490503"),C=C(),de(),C),Se={class:"font-weight-bold mb-2 mt-5"},Ne=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ue={class:"font-weight-bold mb-2"},Ie=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Pe={class:"font-weight-bold mb-2"},Te={class:"font-weight-bold mb-2"},Ee=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Me={class:"font-weight-bold mb-2"},Be=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Fe={class:"font-weight-bold mb-2"},xe={class:"font-weight-bold mb-2"},Oe={class:"font-weight-bold mb-2"},Ae=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ge={class:"font-weight-bold mb-2"},je={class:"font-weight-bold mb-2"},Re={class:"font-weight-bold mb-2"},ze={class:"font-weight-bold mb-2"},Ye={class:"font-weight-bold mb-2"},qe={class:"font-weight-bold mb-2"},Le={class:"font-weight-bold mb-2"},Je={class:"font-weight-bold mb-2"},Ke={class:"font-weight-bold mb-2"},Qe={class:"font-weight-bold mb-2"},Xe={class:"font-weight-bold mb-2"},He={class:"font-weight-bold mb-2"},We={class:"font-weight-bold mb-2"},Ze={class:"font-weight-bold mb-2"},et=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),tt={class:"font-weight-bold mb-2"},lt=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),at={class:"font-weight-bold mb-2"},ot=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),st={class:"font-weight-bold mb-2"},nt=T(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),dt={class:"font-weight-bold mb-2"},rt={class:"font-weight-bold mb-2"},it={class:"font-weight-bold mb-2"},ut={class:"font-weight-bold mb-2"},mt=T(()=>r("i",{class:"ph-arrow-left ms-2"},null,-1)),pt=T(()=>r("i",{class:"ph-arrow-right ms-2"},null,-1)),ct=Y({__name:"TabGeneralInfo",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:O}){const{t:u}=K(),U=Q(),k=ae(),w=O,h=C;ue();const D=we(),g=me(),N=P(),f=P(),V=P(),_=P(null);let o=x({get(){return h.modelValue},set(e){w("update:modelValue",e)}});const c=P("");let E=null;const S={employeeNumber:[e=>!!e||u("t-please-enter-employee-number"),e=>e&&e.length<=20||u("t-please-enter-maximum-20-characters")],firstName:[e=>!!e||u("t-please-enter-employee-firstname")],lastName:[e=>!!e||u("t-please-enter-lastname")],idCardNumber:[e=>!!e||u("t-please-enter-id-card-number"),e=>e&&e.length<=30||u("t-maximum-30-characters")],gender:[e=>!!e||u("t-please-select-gender")],maritalStatus:[e=>!!e||u("t-please-select-marital-status")],birthDate:[e=>!!e||u("t-please-enter-birth-date"),e=>{if(!e)return!0;const l=e instanceof Date?e:new Date(e),m=new Date;if(m.setFullYear(m.getFullYear()-120),l<m)return u("t-birth-date-too-old");const v=new Date;return v.setFullYear(v.getFullYear()-18),l>v?u("t-must-be-over-18"):!0}],idCardIssuer:[e=>!!e||u("t-please-enter-id-card-issuer"),e=>e&&e.length<=50||u("t-maximum-50-characters")],idCardExpiryDate:[e=>!!e||u("t-please-enter-id-card-expiry-date"),e=>e?new Date(e)>=new Date||u("t-invalid-id-card-expiry-date"):!0],idCardIssuanceDate:[e=>!!e||u("t-please-enter-id-card-issuance-date"),e=>e?new Date(e)<=new Date||u("t-invalid-id-card-issuance-date"):!0],email:[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||u("t-invalid-email")]},G=x(()=>D.countries.map(e=>({value:e.id,label:e.name,meta:{code:e.iso2Code,phoneCode:e.phoneCode}}))),b=x(()=>g.provincesbyCountry.map(e=>({value:e.id,label:e.name,meta:{code:e.code,country:e.country}})));X(async()=>{try{await D.fetchCountries(),o.value.country&&await g.fetchProvincesbyCountry(o.value.country)}catch(e){console.error("Failed to load countries:",e),c.value="Falha ao carregar países",E=setTimeout(()=>{c.value="",E=null},5e3)}}),J(()=>o.value.country,async(e,l)=>{if(e!==l)if(e)try{await g.fetchProvincesbyCountry(e),o.value.province&&g.provincesbyCountry.find(v=>v.id===o.value.province)||(o.value.province=void 0)}catch(m){console.error("Failed to load provinces:",m),g.provincesbyCountry=[],o.value.province=void 0,c.value="Falha ao carregar províncias",E=setTimeout(()=>{c.value="",E=null},5e3)}else g.clearProvinces(),o.value.province=void 0});const y=()=>{k.push({path:"/employee/list"})},d=async()=>{var e,l,m;if(_.value)try{await((e=N.value)==null?void 0:e.validate()),await((l=f.value)==null?void 0:l.validate()),await((m=V.value)==null?void 0:m.validate());const{valid:v}=await _.value.validate();if(!v){U.error(u("t-validation-error")),c.value=u("t-please-correct-errors"),E=setTimeout(()=>{c.value="",E=null},5e3);return}w("onStepChange",2)}catch(v){console.error("Validation error:",v),c.value=u("t-validation-error")}};return(e,l)=>{const m=A("TextField"),v=A("MazPhoneNumberInput"),te=A("VueDatePicker"),fe=A("Card");return M(),F(pe,{ref_key:"form",ref:_,onSubmit:se(d,["prevent"])},{default:s(()=>[t(fe,{title:e.$t("t-general-information"),elevation:"0","title-class":"pb-0"},{default:s(()=>[t(H,{name:"fade"},{default:s(()=>[c.value?(M(),F(W,{key:0,text:c.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:l[0]||(l[0]=n=>c.value=""),style:{cursor:"pointer"}},null,8,["text"])):j("",!0)]),_:1}),t(Z,{class:"pt-0"},{default:s(()=>[r("div",Se,[$(i(e.$t("t-employeeNumber"))+" ",1),Ne]),t(m,{modelValue:a(o).employeeNumber,"onUpdate:modelValue":l[1]||(l[1]=n=>a(o).employeeNumber=n),placeholder:e.$t("t-enter-employee-number"),rules:S.employeeNumber},null,8,["modelValue","placeholder","rules"]),t(I,{class:"mt-n3"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Ue,[$(i(e.$t("t-firstname"))+" ",1),Ie]),t(m,{modelValue:a(o).firstName,"onUpdate:modelValue":l[2]||(l[2]=n=>a(o).firstName=n),placeholder:e.$t("t-enter-employee-number"),rules:S.firstName},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Pe,i(e.$t("t-middle-name")),1),t(m,{modelValue:a(o).middleName,"onUpdate:modelValue":l[3]||(l[3]=n=>a(o).middleName=n),placeholder:e.$t("t-enter-middle-name")},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Te,[$(i(e.$t("t-lastname"))+" ",1),Ee]),t(m,{modelValue:a(o).lastName,"onUpdate:modelValue":l[4]||(l[4]=n=>a(o).lastName=n),placeholder:e.$t("t-enter-lastname"),rules:S.lastName},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),t(I,{class:"mt-n6"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Me,[$(i(e.$t("t-gender"))+" ",1),Be]),t(B,{modelValue:a(o).gender,"onUpdate:modelValue":l[5]||(l[5]=n=>a(o).gender=n),items:a(Ve),rules:S.gender},null,8,["modelValue","items","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Fe,i(e.$t("t-marital-status")),1),t(B,{modelValue:a(o).maritalStatus,"onUpdate:modelValue":l[6]||(l[6]=n=>a(o).maritalStatus=n),items:a(_e)},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",xe,i(e.$t("t-blood-group")),1),t(B,{modelValue:a(o).bloodGroup,"onUpdate:modelValue":l[7]||(l[7]=n=>a(o).bloodGroup=n),items:a($e)},null,8,["modelValue","items"])]),_:1})]),_:1}),t(I,{class:"mt-n3"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Oe,[$(i(e.$t("t-birth-date"))+" ",1),Ae]),t(L,{ref_key:"birthDatePicker",ref:N,modelValue:a(o).birthDate,"onUpdate:modelValue":l[8]||(l[8]=n=>a(o).birthDate=n),teleport:!0,placeholder:e.$t("t-enter-birth-date"),rules:S.birthDate,format:"dd/MM/yyyy"},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Ge,i(e.$t("t-place-of-birth")),1),t(m,{modelValue:a(o).placeOfBirth,"onUpdate:modelValue":l[9]||(l[9]=n=>a(o).placeOfBirth=n),placeholder:e.$t("t-enter-place-of-birth"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",je,i(e.$t("t-nacionality")),1),t(B,{modelValue:a(o).nationality,"onUpdate:modelValue":l[10]||(l[10]=n=>a(o).nationality=n),items:a(Ce)},null,8,["modelValue","items"])]),_:1})]),_:1}),t(I,{class:"mt-n6"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Re,i(e.$t("t-nuit")),1),t(m,{modelValue:a(o).incomeTaxNumber,"onUpdate:modelValue":l[11]||(l[11]=n=>a(o).incomeTaxNumber=n),placeholder:e.$t("t-enter-nuit"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",ze,i(e.$t("t-social-security-number")),1),t(m,{modelValue:a(o).socialSecurityNumber,"onUpdate:modelValue":l[12]||(l[12]=n=>a(o).socialSecurityNumber=n),placeholder:e.$t("t-enter-social-security-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Ye,i(e.$t("t-address")),1),t(m,{modelValue:a(o).address,"onUpdate:modelValue":l[13]||(l[13]=n=>a(o).address=n),placeholder:e.$t("t-enter-address"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(I,{class:""},{default:s(()=>[t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",qe,i(e.$t("t-country")),1),t(B,{modelValue:a(o).country,"onUpdate:modelValue":l[14]||(l[14]=n=>a(o).country=n),items:G.value,loading:a(D).loading},null,8,["modelValue","items","loading"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",Le,i(e.$t("t-province")),1),t(B,{modelValue:a(o).province,"onUpdate:modelValue":l[15]||(l[15]=n=>a(o).province=n),items:b.value,loading:a(g).loading,disabled:!a(o).country||!Array.isArray(a(g).provincesbyCountry)},null,8,["modelValue","items","loading","disabled"])]),_:1})]),_:1}),t(I,{class:"mt-n6"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Je,i(e.$t("t-postal-code")),1),t(m,{modelValue:a(o).postalCode,"onUpdate:modelValue":l[16]||(l[16]=n=>a(o).postalCode=n),placeholder:e.$t("t-enter-postal-code"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Ke,i(e.$t("t-email")),1),t(m,{modelValue:a(o).email,"onUpdate:modelValue":l[17]||(l[17]=n=>a(o).email=n),placeholder:e.$t("t-enter-email"),"hide-details":"",rules:S.email},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Qe,i(e.$t("t-phone")),1),t(v,{modelValue:a(o).phone,"onUpdate:modelValue":l[18]||(l[18]=n=>a(o).phone=n),size:"sm",fetchCountry:"",placeholder:e.$t("t-enter-phone-number"),class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(I,{class:""},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Xe,i(e.$t("t-mobile")),1),t(v,{modelValue:a(o).mobile,"onUpdate:modelValue":l[19]||(l[19]=n=>a(o).mobile=n),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",He,i(e.$t("t-emergency-contact-name")),1),t(m,{modelValue:a(o).emergencyContactName,"onUpdate:modelValue":l[20]||(l[20]=n=>a(o).emergencyContactName=n),placeholder:e.$t("t-enter-phone-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",We,i(e.$t("t-emergency-contact-phone")),1),t(v,{modelValue:a(o).emergencyContactPhone,"onUpdate:modelValue":l[21]||(l[21]=n=>a(o).emergencyContactPhone=n),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(I,{class:""},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",Ze,[$(i(e.$t("t-id-card-number"))+" ",1),et]),t(m,{modelValue:a(o).idCardNumber,"onUpdate:modelValue":l[22]||(l[22]=n=>a(o).idCardNumber=n),placeholder:e.$t("t-id-card-number"),rules:S.idCardNumber},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",tt,[$(i(e.$t("t-id-card-issuer"))+" ",1),lt]),t(m,{modelValue:a(o).idCardIssuer,"onUpdate:modelValue":l[23]||(l[23]=n=>a(o).idCardIssuer=n),placeholder:e.$t("t-enter-id-card-issuer"),rules:S.idCardIssuer},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",at,[$(i(e.$t("t-id-card-expiry-date"))+" ",1),ot]),t(L,{ref_key:"idCardExpiryDatePicker",ref:V,modelValue:a(o).idCardExpiryDate,"onUpdate:modelValue":l[24]||(l[24]=n=>a(o).idCardExpiryDate=n),teleport:!0,rules:S.idCardExpiryDate,placeholder:e.$t("t-enter-id-card-expiry-date"),format:"dd/MM/yyyy"},null,8,["modelValue","rules","placeholder"])]),_:1})]),_:1}),t(I,{class:"mt-n6"},{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",st,[$(i(e.$t("t-id-card-issuance-date"))+" ",1),nt]),t(L,{ref_key:"idCardIssuanceDatePicker",ref:f,modelValue:a(o).idCardIssuanceDate,"onUpdate:modelValue":l[25]||(l[25]=n=>a(o).idCardIssuanceDate=n),teleport:!0,rules:S.idCardIssuanceDate,placeholder:e.$t("t-enter-id-card-issuance-date"),format:"dd/MM/yyyy"},null,8,["modelValue","rules","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",dt,i(e.$t("t-passport-number")),1),t(m,{modelValue:a(o).passportNumber,"onUpdate:modelValue":l[26]||(l[26]=n=>a(o).passportNumber=n),placeholder:e.$t("t-enter-passport-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:s(()=>[r("div",rt,i(e.$t("t-passport-issuer")),1),t(m,{modelValue:a(o).passportIssuer,"onUpdate:modelValue":l[27]||(l[27]=n=>a(o).passportIssuer=n),placeholder:e.$t("t-enter-passport-issuer"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(I,{class:""},{default:s(()=>[t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",it,i(e.$t("t-passport-issuance-date")),1),t(te,{modelValue:a(o).passportIssuanceDate,"onUpdate:modelValue":l[28]||(l[28]=n=>a(o).passportIssuanceDate=n),teleport:!0,placeholder:e.$t("t-enter-passport-issuance-date"),"enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",ut,i(e.$t("t-id-passport-expiry-date")),1),t(te,{modelValue:a(o).passportExpiryDate,"onUpdate:modelValue":l[29]||(l[29]=n=>a(o).passportExpiryDate=n),teleport:!0,placeholder:e.$t("t-enter-id-passport-expiry-date"),"enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),t(oe,{class:"d-flex justify-space-between mt-3"},{default:s(()=>[t(R,{color:"secondary",variant:"outlined",class:"me-2",onClick:l[30]||(l[30]=n=>y()),disabled:C.loading},{default:s(()=>[$(i(e.$t("t-back"))+" ",1),mt]),_:1},8,["disabled"]),t(R,{color:"success",variant:"elevated",onClick:d,loading:C.loading},{default:s(()=>[$(i(e.$t("t-proceed"))+" ",1),pt]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const ft=ee(ct,[["__scopeId","data-v-30490503"]]),z=C=>(ne("data-v-4f4683ac"),C=C(),de(),C),vt={class:"font-weight-bold mb-2"},yt=z(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),bt={class:"font-weight-bold mb-2"},gt=z(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),ht={class:"font-weight-bold mb-2"},Vt=z(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),_t={class:"font-weight-bold mb-2"},$t=z(()=>r("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ct=z(()=>r("i",{class:"ph-arrow-left ms-2"},null,-1)),wt=Y({__name:"TabInstitution&Classification",props:{modelValue:{},loading:{type:Boolean}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:O}){const{t:u}=K(),U=Q(),k=ce(),w=re(),h=ie(),D=P(null),g=O,N=C;let f=x({get(){return N.modelValue},set(d){g("update:modelValue",d)}});const V=P(""),_={institution:[d=>!!d||u("t-please-select-institution")],department:[d=>!!d||u("t-please-select-department")],position:[d=>!!d||u("t-please-select-position")],salary:[d=>!!d||u("t-please-enter-salary"),d=>d>0||u("t-please-enter-a-valid-salary")]},o=x(()=>k.institutions.map(d=>({value:d.id,label:d.name}))),c=x(()=>w.departments.map(d=>({value:d.id,label:d.name}))),E=x(()=>h.positions.map(d=>({value:d.id,label:d.name})));X(async()=>{try{await k.fetchInstitutions()}catch(d){b("Falha ao carregar instituições",d)}}),J(()=>f.value.company,d=>{d?(w.fetchDepartments(d),f.value.department=void 0,f.value.position=void 0):(w.departments=[],h.positions=[])}),J(()=>f.value.department,d=>{d?(h.fetchPositions(d),f.value.position=void 0):h.positions=[]});const S=()=>{f.value.company&&w.pagination.currentPage<w.pagination.totalPages-1&&w.fetchDepartments(f.value.company,w.pagination.currentPage+1)},G=()=>{f.value.department&&h.pagination.currentPage<h.pagination.totalPages-1&&h.fetchPositions(f.value.department,h.pagination.currentPage+1)},b=(d,e)=>{console.error(d,e),V.value=d,setTimeout(()=>{V.value=""},5e3)},y=async()=>{if(!D.value)return;const{valid:d}=await D.value.validate();if(!d){U.error(u("t-validation-error")),V.value=u("t-please-correct-errors"),setTimeout(()=>{V.value=""},5e3);return}console.log("Dados do funcionário:",f.value);const e={...f.value};g("save",e)};return(d,e)=>{const l=A("TextField"),m=A("Card");return M(),F(pe,{ref_key:"form2",ref:D,onSubmit:se(y,["prevent"])},{default:s(()=>[t(m,{title:d.$t("t-institution-and-classification"),elevation:"0","title-class":"pb-0"},{default:s(()=>[t(H,{name:"fade"},{default:s(()=>[V.value?(M(),F(W,{key:0,text:V.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:e[0]||(e[0]=v=>V.value=""),style:{cursor:"pointer"}},null,8,["text"])):j("",!0)]),_:1}),t(Z,{class:"pt-0 mt-6"},{default:s(()=>[t(I,null,{default:s(()=>[t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",vt,[$(i(d.$t("t-institution"))+" ",1),yt]),t(B,{modelValue:a(f).company,"onUpdate:modelValue":e[1]||(e[1]=v=>a(f).company=v),items:o.value,loading:a(k).loading,placeholder:a(u)("t-select-institution"),clearable:"",rules:_.institution},null,8,["modelValue","items","loading","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",bt,[$(i(d.$t("t-department"))+" ",1),gt]),t(B,{modelValue:a(f).department,"onUpdate:modelValue":e[2]||(e[2]=v=>a(f).department=v),items:c.value,loading:a(w).loading,placeholder:a(u)("t-select-department"),disabled:!a(f).company,rules:_.department,onScrollEnd:S,clearable:""},null,8,["modelValue","items","loading","placeholder","disabled","rules"])]),_:1})]),_:1}),t(I,{class:"mt-n6"},{default:s(()=>[t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",ht,[$(i(d.$t("t-position"))+" ",1),Vt]),t(B,{modelValue:a(f).position,"onUpdate:modelValue":e[3]||(e[3]=v=>a(f).position=v),items:E.value,loading:a(h).loading,rules:_.position,placeholder:a(u)("t-select-position"),disabled:!a(f).department,onScrollEnd:G,clearable:""},null,8,["modelValue","items","loading","rules","placeholder","disabled"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:s(()=>[r("div",_t,[$(i(d.$t("t-base-salary"))+" ",1),$t]),t(l,{modelValue:a(f).salary,"onUpdate:modelValue":e[4]||(e[4]=v=>a(f).salary=v),type:"number",placeholder:a(u)("t-enter-the-employee-base-salary"),rules:_.salary,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),t(oe,{class:"d-flex justify-space-between mt-5"},{default:s(()=>[t(R,{color:"secondary",variant:"outlined",class:"me-2",onClick:e[5]||(e[5]=v=>g("onStepChange",1)),disabled:d.loading},{default:s(()=>[$(i(d.$t("t-back-to-general-info"))+" ",1),Ct]),_:1},8,["disabled"]),t(R,{color:"success",variant:"elevated",onClick:y,loading:d.loading},{default:s(()=>[$(i(d.$t("t-save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const Dt=ee(wt,[["__scopeId","data-v-4f4683ac"]]),kt=Y({__name:"index",props:{cardTitle:{type:String,default:""}},setup(C){me(),ce();const O=re(),u=ie(),{t:U}=K(),k=ye(),w=ae(),h=Q(),D=ue(),g=P(1),N=P(typeof k.params.id=="string"?k.params.id:Array.isArray(k.params.id)?k.params.id[0]:null),f=P(!1),V=P("");let _=null;const o=P(!1);let c=be({employeeNumber:"",firstName:"",middleName:"",lastName:"",gender:"",maritalStatus:void 0,birthDate:void 0,bloodGroup:"",placeOfBirth:"",nationality:"",incomeTaxNumber:null,socialSecurityNumber:null,address:"",country:void 0,province:void 0,postalCode:"",email:"",phone:"",mobile:"",emergencyContactName:"",emergencyContactPhone:"",idCardNumber:null,idCardIssuer:"",idCardExpiryDate:void 0,idCardIssuanceDate:void 0,passportNumber:null,passportIssuer:"",passportIssuanceDate:void 0,passportExpiryDate:void 0,enabled:!0,salary:null,company:void 0,department:void 0,position:void 0});const E=b=>{var d;_&&(clearTimeout(_),_=null);let y=U("t-error-saving-employee");(d=b==null?void 0:b.response)!=null&&d.data?(b.response.data.error&&(V.value=b.response.data.message,_=setTimeout(()=>{V.value="",_=null},5e3)),y=b.response.data.message||y):b.message&&(y=b.message),h.error(y),V.value=y,_=setTimeout(()=>{V.value="",_=null},5e3)};X(async()=>{var b,y,d,e,l;if(N.value)try{f.value=!0;const m=await q.getEmployeeById(N.value);if(!m.data)throw new Error("Dados do funcionário não disponíveis.");const v=m.data;Object.assign(c,v),c.country=(b=v.country)==null?void 0:b.id,c.province=(y=v.province)==null?void 0:y.id,c.company=(d=v.company)==null?void 0:d.id,c.department=(e=v.department)==null?void 0:e.id,c.position=(l=v.position)==null?void 0:l.id,c.company&&await O.fetchDepartments(c.company),c.department&&await u.fetchPositions(c.department)}catch(m){h.error(U("t-error-loading-employee")),console.error("Error loading employee:",m)}finally{f.value=!1}});const S=b=>{if(b<g.value){g.value=b;return}if(N.value||N.value){g.value=b;return}b===g.value+1&&(g.value=b)},G=async(b,y=!1)=>{var d,e;try{f.value=!0,V.value="",Object.assign(c,b);let l;if(N.value)l=await q.updateEmployee(N.value,b);else if(l=await q.createEmployee(b),(d=l==null?void 0:l.data)!=null&&d.id)N.value=l.data.id,D.setCurrentEmployeeId(l.data.id),o.value=!0;else throw new Error(((e=l==null?void 0:l.error)==null?void 0:e.message)||U("t-error-creating-employee"));D.setDraftEmployee(c),h.success(N.value?U("t-employee-updated-success"):U("t-employee-created-success")),y?(await D.fetchEmployees(),w.push("/employee/list")):g.value++}catch(l){console.error("Error saving employee:",l),E(l)}finally{f.value=!1}};return ge(()=>{_&&(clearTimeout(_),_=null)}),(b,y)=>{const d=A("Card");return M(),F(d,null,{default:s(()=>[t(Z,null,{default:s(()=>[t(ke,{modelValue:g.value,"onUpdate:modelValue":y[0]||(y[0]=e=>g.value=e),class:"mb-2","employee-id":N.value,"basic-data-validated":o.value},null,8,["modelValue","employee-id","basic-data-validated"]),f.value?(M(),F(he,{key:0,indeterminate:"",color:"primary",class:"mb-4"})):j("",!0),t(H,{name:"fade"},{default:s(()=>[V.value?(M(),F(W,{key:0,text:V.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:y[1]||(y[1]=e=>V.value=""),style:{cursor:"pointer","white-space":"pre-line"}},null,8,["text"])):j("",!0)]),_:1}),g.value===1?(M(),F(ft,{key:1,onOnStepChange:S,modelValue:a(c),"onUpdate:modelValue":y[2]||(y[2]=e=>le(c)?c.value=e:c=e),onSave:y[3]||(y[3]=e=>G(e,!1)),loading:f.value},null,8,["modelValue","loading"])):j("",!0),g.value===2?(M(),F(Dt,{key:2,onOnStepChange:S,modelValue:a(c),"onUpdate:modelValue":y[4]||(y[4]=e=>le(c)?c.value=e:c=e),onSave:y[5]||(y[5]=e=>G(e,!0)),loading:f.value},null,8,["modelValue","loading"])):j("",!0)]),_:1})]),_:1})}}});const Et=ee(kt,[["__scopeId","data-v-4a5da68c"]]);export{Et as C};
