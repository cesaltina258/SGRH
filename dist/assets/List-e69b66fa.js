import{d as W,l as u,c as Q,B,b as c,e as O,w as s,ab as de,x as t,S,aD as K,a1 as re,h as N,D as ne,i as a,I as T,f as x,E as X,H as M,bh as oe,T as _,g as U,dQ as Y,F as E,V as J,G as L,a2 as Z,dR as ce,dS as ve,a3 as me,L as pe,dT as ee,m as fe,M as j,O as ge,R as _e,aG as he,dU as Ve,W as ke,q as te,da as le,X as ae,dV as xe,dW as ye}from"./index-96068b83.js";import{_ as Ce}from"./TableAction.vue_vue_type_script_setup_true_lang-c138a469.js";import{_ as se}from"./Status.vue_vue_type_script_setup_true_lang-2b6dfc24.js";const be=a("div",{class:"font-weight-bold mb-2"},[_(" Client Name "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Te={class:"font-weight-bold"},De={"data-simplebar":"",style:{"max-height":"200px"},class:"mb-4"},$e={class:"d-flex align-center"},we={class:"font-weight-bold"},Ue=a("div",{class:"font-weight-bold mb-2"},[_(" Ticket Title "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Pe=a("div",{class:"font-weight-bold mb-2"},[_(" Create Date "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ne=a("div",{class:"font-weight-bold mb-2"},[_(" Due Date "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Oe=a("div",{class:"font-weight-bold mb-2 mt-4"},[_(" Priority "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ee=a("div",{class:"font-weight-bold mb-2 mt-4"},[_(" Status "),a("i",{class:"ph-asterisk ph-xs text-danger"})],-1),Ae=W({__name:"CreateEditDialog",props:{modelValue:{type:Boolean,default:!1},data:{type:Object,required:!0}},emits:["update:modelValue","onCreateUpdate"],setup(z,{emit:A}){const h=A,p=z,D=p.data.id===-1,d=u(""),f=u(p.data),F=Q(()=>f.value.assignedTo.map(v=>v.id)),i=u(f.value.clientName||""),y=u(F.value),V=u(f.value.ticketTitle||""),C=u(f.value.createDate||""),m=u(f.value.dueDate||""),g=u(f.value.priority||""),r=u(f.value.status||""),$=Q({get(){return p.modelValue},set(v){h("update:modelValue",v)}}),I=v=>{if(w(v.id)){const n=y.value.indexOf(v.id);n>-1&&y.value.splice(n,1)}else y.value.push(v.id)},w=v=>y.value.includes(v),q=()=>{if(i.value?y.value.length?V.value?C.value?m.value?g.value?r.value||(d.value="Please Enter status"):d.value="Please Enter priority":d.value="Please Enter dueDate":d.value="Please Enter createDate":d.value="Please Enter ticketTitle":d.value="Please Enter assignedTo":d.value="Please Enter clientName",setTimeout(()=>{d.value=""},3e3),!i.value||!y.value.length||!V.value||!C.value||!m.value||!g.value||!r.value)return;d.value="";const v=Y.filter(P=>w(P.id)),n={...p.data,clientName:i.value,assignedTo:v,ticketTitle:V.value,createDate:C.value,dueDate:m.value,priority:g.value,status:r.value};h("onCreateUpdate",n)};return(v,n)=>{const P=B("TextField"),R=B("VueDatePicker"),G=B("Card");return c(),O(de,{modelValue:$.value,"onUpdate:modelValue":n[8]||(n[8]=e=>$.value=e),width:"550",scrollable:!1,persistent:""},{default:s(()=>[t(G,{title:D?"Add Ticket":"Edit Ticket","title-class":"py-0",style:{overflow:"hidden"}},{"title-action":s(()=>[t(S,{icon:"ph-x",variant:"plain",onClick:n[0]||(n[0]=e=>$.value=!1)})]),default:s(()=>[t(K),d.value?(c(),O(re,{key:0,text:d.value,variant:"tonal",color:"danger",class:"mx-5 mt-3",density:"compact"},null,8,["text"])):N("",!0),t(ne,{"data-simplebar":"",style:{"max-height":"calc(100vh - 500px)"}},{default:s(()=>[be,t(P,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=e=>i.value=e),placeholder:"Enter Client name"},null,8,["modelValue"]),a("div",Te,"Assigned To : "+T(y.value),1),a("div",De,[(c(!0),x(E,null,X(U(Y),e=>(c(),x("div",{key:e.id,class:"my-3 d-flex justify-space-between"},[a("div",$e,[t(M,{size:"small",class:"me-2"},{default:s(()=>[t(oe,{src:e.assigneeImg},null,8,["src"])]),_:2},1024),a("div",we,T(e.assigneeName),1)]),t(S,{color:"light",density:"compact",onClick:o=>I(e)},{default:s(()=>[_(T(w(e.id)?"remove":"Add"),1)]),_:2},1032,["onClick"])]))),128))]),Ue,t(P,{modelValue:V.value,"onUpdate:modelValue":n[2]||(n[2]=e=>V.value=e),placeholder:"Ticket Title"},null,8,["modelValue"]),t(J,null,{default:s(()=>[t(L,{cols:"12",lg:"6"},{default:s(()=>[Pe,t(R,{modelValue:C.value,"onUpdate:modelValue":n[3]||(n[3]=e=>C.value=e),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",lg:"6"},{default:s(()=>[Ne,t(R,{modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=e=>m.value=e),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"])]),_:1})]),_:1}),Oe,t(Z,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=e=>g.value=e),items:U(ce)},null,8,["modelValue","items"]),Ee,t(Z,{modelValue:r.value,"onUpdate:modelValue":n[6]||(n[6]=e=>r.value=e),items:U(ve)},null,8,["modelValue","items"])]),_:1}),t(K),t(me,null,{default:s(()=>[t(J,{justify:"end"},{default:s(()=>[t(L,{class:"text-right"},{default:s(()=>[t(S,{color:"danger",onClick:n[7]||(n[7]=e=>$.value=!1)},{default:s(()=>[_(" Close")]),_:1}),t(S,{color:"primary",variant:"elevated",onClick:q},{default:s(()=>[_(T(D?"Create Ticket":"Update Ticket"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),Ie=a("i",{class:"ph-plus-circle me-1"},null,-1),Se={class:"text-primary font-weight-bold"},Be={class:"d-flex"},Le={key:0,class:"text-center my-10"},ze=a("i",{class:"ph-magnifying-glass",style:{"font-size":"30px"},color:"primary"},null,-1),Fe=a("div",{class:"font-weight-bold text-subtitle-1 mb-1"}," Sorry! No Result Found ",-1),Re=a("div",{class:"text-muted"}," We've searched more than 6k+ tickets We did not find any tickets for you search. ",-1),je=W({__name:"Listing",setup(z){const A=pe(),h=u(!1),p=u(null),D=u(!1),d=u(null),f=u(!1),F=ee.map(e=>({...e,isChecked:!1})),i=u(F),y=u(i.value),V=u(1),C=Q(()=>y.value.length),m=u([]),g=u(!1),r=u({page:V.value,start:0,end:0,noOfItems:C.value,itemsPerPage:10}),$=()=>{const{itemsPerPage:e,page:o}=r.value,k=(o-1)*e;let l=k+e;l=l<=C.value?l:C.value,r.value={...r.value,start:k,end:l};const H=i.value.slice(r.value.start,r.value.end);g.value=!0,m.value=[],setTimeout(()=>{m.value=H,g.value=!1},200)},I=e=>{g.value=!0;const{itemsPerPage:o}=r.value,k=1;let l=k+o;l=l<=e.length?l:e.length,m.value=[],setTimeout(()=>{m.value=e,r.value={...r.value,start:k,end:l,noOfItems:e.length},g.value=!1},200)};fe(()=>{$()}),j(V,e=>{r.value.page=e,$()});const w=u("");j(w,e=>{i.value=F.filter(o=>{const k=e.toLowerCase();if(o.ticketTitle.toLowerCase().includes(k)||o.clientName.toLowerCase().includes(k))return o}),I(i.value)}),j(h,e=>{e||(p.value=null)}),j(D,e=>{e||(d.value=null)});const q=()=>{f.value=!f.value,m.value=m.value.map(e=>({...e,isChecked:f.value}))},v=e=>{e?p.value=e:p.value={id:-1,ticketTitle:"",clientName:"",createDate:"",dueDate:"",priority:"",status:"",assignedTo:[]},h.value=!0},n=()=>{A.push({path:"/tickets/overview"})},P=e=>{e.id===-1?i.value.unshift({...e,id:ee.length+1,isChecked:!1}):i.value=i.value.map(o=>e.id===o.id?{...o,...e}:o),I(i.value),h.value=!1},R=e=>{d.value=e,D.value=!0},G=()=>{i.value=i.value.filter(e=>e.id!==d.value),D.value=!1,I(i.value)};return(e,o)=>{const k=B("Card");return c(),x(E,null,[t(k,{title:"Tickets List",class:"mt-5"},{"title-action":s(()=>[t(J,{justify:"end",align:"center"},{default:s(()=>[t(L,{lg:"3"},{default:s(()=>[t(_e,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=l=>w.value=l),placeholder:"Search for tickets, date, client or something..."},null,8,["modelValue"])]),_:1}),t(L,{cols:"auto"},{default:s(()=>[t(S,{color:"secondary",onClick:o[1]||(o[1]=l=>v(null))},{default:s(()=>[Ie,_(" Add Ticket ")]),_:1})]),_:1})]),_:1})]),default:s(()=>[t(ne,null,{default:s(()=>[t(he,{modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=l=>V.value=l),"is-pagination":"",config:r.value,loading:g.value,headerItems:U(Ve),onOnSelectAll:q},{body:s(()=>[(c(!0),x(E,null,X(m.value,(l,H)=>(c(),x("tr",{key:"ticket-list-item-"+H,height:"50"},[a("td",null,[t(ke,{modelValue:l.isChecked,"onUpdate:modelValue":b=>l.isChecked=b,"hide-details":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",Se," #TBS"+T(243019+l.id),1),a("td",null,[a("div",Be,[(c(!0),x(E,null,X(l.assignedTo,(b,ue)=>(c(),x("div",{class:"position-relative",key:b.assigneeName},[ue<3?(c(),O(le,{key:0,text:b.assigneeName,location:"top"},{activator:s(({props:ie})=>[t(M,te(ie,{size:"30",class:"avatar-group-item curser-pointer"}),{default:s(()=>[t(oe,{src:b.assigneeImg},null,8,["src"])]),_:2},1040)]),_:2},1032,["text"])):N("",!0)]))),128)),l.assignedTo.length>3?(c(),O(le,{key:0,text:`+${l.assignedTo.length-3} more`,location:"top"},{activator:s(({props:b})=>[t(M,te(b,{size:"30",class:"avatar-group-item curser-pointer",color:"primary"}),{default:s(()=>[_(" +1 ")]),_:2},1040)]),_:2},1032,["text"])):N("",!0)])]),a("td",null,T(l.ticketTitle),1),a("td",null,T(l.clientName),1),a("td",null,T(U(ae)(l.createDate)),1),a("td",null,T(U(ae)(l.dueDate)),1),a("td",null,[t(se,{status:l.priority,variant:"elevated"},null,8,["status"])]),a("td",null,[t(se,{status:l.status},null,8,["status"])]),a("td",null,[t(Ce,{onOnView:n,onOnEdit:b=>v(l),onOnDelete:b=>R(l.id)},null,8,["onOnEdit","onOnDelete"])])]))),128))]),_:1},8,["modelValue","config","loading","headerItems"]),i.value.length?N("",!0):(c(),x("div",Le,[t(M,{size:"80",color:"primary",variant:"tonal",class:"mb-3"},{default:s(()=>[ze]),_:1}),Fe,Re]))]),_:1})]),_:1}),p.value?(c(),O(Ae,{key:0,data:p.value,modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=l=>h.value=l),onOnCreateUpdate:P},null,8,["data","modelValue"])):N("",!0),d.value?(c(),O(ge,{key:1,modelValue:D.value,"onUpdate:modelValue":o[4]||(o[4]=l=>D.value=l),onOnConfirm:G},null,8,["modelValue"])):N("",!0)],64)}}}),Me=W({__name:"index",setup(z){return(A,h)=>(c(),x(E,null,[t(xe),t(je)],64))}}),He=W({__name:"List",setup(z){return(A,h)=>{const p=B("Breadcrumb");return c(),x(E,null,[t(p,{title:"List View",items:U(ye)},null,8,["items"]),t(Me)],64)}}});export{He as default};
