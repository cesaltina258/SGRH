import{d as R,c as M,b as k,f as ee,x as t,w as d,G as p,O as z,Q as h,I as m,D,J as q,K as J,L as te,l as E,m as K,M as L,B,e as P,a0 as Q,a1 as X,h as F,C as H,i,g as o,a2 as T,a3 as le,a4 as ae,a5 as oe,a6 as se,a7 as W,Y as de,ad as ce,X as Y,af as fe,ag as be,aa as Z,F as ve}from"./index-1db35709.js";import{g as ge,m as ye,a as he,V as G,n as Ve,u as ne,c as re}from"./positionStore-89368d45.js";import{u as ie}from"./employeeStore-f577474d.js";import{u as _e,a as ue}from"./countryStore-b737b676.js";import{V as me}from"./VForm-e699bf82.js";import{u as pe}from"./institutionStore-ddfd69e4.js";const $e=[{title:"employee-list",disabled:!1},{title:"view-employee",disabled:!0}],we={class:"d-flex justify-space-between align-center"},Ce=R({__name:"ButtonNav",props:{modelValue:{type:Number,default:1}},emits:["update:modelValue"],setup(V,{emit:U}){const c=U,C=V,g=M({get(){return C.modelValue},set(y){c("update:modelValue",y)}});return(y,_)=>(k(),ee("div",we,[t(D,{"no-gutters":""},{default:d(()=>[t(p,{cols:"6"},{default:d(()=>[t(z,{rounded:"0",color:"primary",block:"",variant:g.value===1?"elevated":"tonal",onClick:_[0]||(_[0]=w=>g.value=1)},{default:d(()=>[h(m(y.$t("t-general-information")),1)]),_:1},8,["variant"])]),_:1}),t(p,{cols:"6"},{default:d(()=>[t(z,{rounded:"0",color:"primary",block:"",variant:g.value===2?"elevated":"tonal",onClick:_[1]||(_[1]=w=>g.value=2)},{default:d(()=>[h(m(y.$t("t-institution-and-classification")),1)]),_:1},8,["variant"])]),_:1})]),_:1})]))}}),I=V=>(oe("data-v-cd5afa65"),V=V(),se(),V),Se={class:"font-weight-bold mb-2 mt-5"},De=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ne={class:"font-weight-bold mb-2"},ke=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ue={class:"font-weight-bold mb-2"},Ie={class:"font-weight-bold mb-2"},Te=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Pe={class:"font-weight-bold mb-2"},Ee=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Me={class:"font-weight-bold mb-2"},Be={class:"font-weight-bold mb-2"},Oe={class:"font-weight-bold mb-2"},xe=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Fe={class:"font-weight-bold mb-2"},Ae={class:"font-weight-bold mb-2"},Ge={class:"font-weight-bold mb-2"},Re={class:"font-weight-bold mb-2"},je={class:"font-weight-bold mb-2"},ze={class:"font-weight-bold mb-2"},qe={class:"font-weight-bold mb-2"},Ye={class:"font-weight-bold mb-2"},Le={class:"font-weight-bold mb-2"},Je={class:"font-weight-bold mb-2"},Ke={class:"font-weight-bold mb-2"},Qe={class:"font-weight-bold mb-2"},Xe={class:"font-weight-bold mb-2"},He={class:"font-weight-bold mb-2"},We=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ze={class:"font-weight-bold mb-2"},et=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),tt={class:"font-weight-bold mb-2"},lt=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),at={class:"font-weight-bold mb-2"},ot=I(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),st={class:"font-weight-bold mb-2"},dt={class:"font-weight-bold mb-2"},nt={class:"font-weight-bold mb-2"},rt={class:"font-weight-bold mb-2"},it=I(()=>i("i",{class:"ph-arrow-left ms-2"},null,-1)),ut=R({__name:"TabGeneralInfo",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(V,{emit:U}){const{t:c}=q();J();const C=te(),g=U,y=V;ie();const _=_e(),w=ue(),N=E(null);let l=M({get(){return y.modelValue},set(e){g("update:modelValue",e)}});const f=E("");E(!0);const v={employeeNumber:[e=>!!e||c("t-please-enter-employee-number"),e=>e&&e.length<=20||c("t-please-enter-maximum-20-characters")],firstName:[e=>!!e||c("t-please-enter-employee-firstname")],lastName:[e=>!!e||c("t-please-enter-lastname")],idCardNumber:[e=>!!e||c("t-please-enter-id-card-number"),e=>e&&e.length<=30||c("t-maximum-30-characters")],gender:[e=>!!e||c("t-please-select-gender")],maritalStatus:[e=>!!e||c("t-please-select-marital-status")],birthDate:[e=>!!e||c("t-please-enter-birth-date"),e=>{if(!e)return!0;const a=new Date(e),r=new Date;return r.setFullYear(r.getFullYear()-120),a>=r||c("t-invalid-birth-date")}],idCardIssuer:[e=>!!e||c("t-please-enter-id-card-issuer"),e=>e&&e.length<=50||c("t-maximum-50-characters")],idCardExpiryDate:[e=>!!e||c("t-please-enter-id-card-expiry-date"),e=>e?new Date(e)>=new Date||c("t-invalid-id-card-expiry-date"):!0],idCardIssuanceDate:[e=>!!e||c("t-please-enter-id-card-issuance-date"),e=>e?new Date(e)<=new Date||c("t-invalid-id-card-issuance-date"):!0]},S=M(()=>_.countries.map(e=>({value:e.id,label:e.name,meta:{code:e.iso2Code,phoneCode:e.phoneCode}}))),b=M(()=>{const e=w.provincesbyCountry;return Array.isArray(e)?e.map(a=>({value:a.id,label:a.name,meta:{code:a.code,country:a.country}})):[]});K(async()=>{try{await _.fetchCountries(),l.value.country&&await w.fetchProvincesbyCountry(l.value.country)}catch(e){console.error("Failed to load countries:",e),f.value="Falha ao carregar países",setTimeout(()=>{f.value=""},5e3)}}),L(()=>l.value.country,async(e,a)=>{if(e!==a)if(e)try{await w.fetchProvincesbyCountry(e),l.value.province&&w.provincesbyCountry.find(n=>n.id===l.value.province)||(l.value.province=void 0)}catch(r){console.error("Failed to load provinces:",r),w.provincesbyCountry=[],l.value.province=void 0,f.value="Falha ao carregar províncias",setTimeout(()=>{f.value=""},5e3)}else w.clearProvinces(),l.value.province=void 0});const A=()=>{C.push({path:"/employee/list"})},O=async()=>{if(!N.value)return;const{valid:e}=await N.value.validate();if(!e){f.value=c("t-please-correct-errors"),setTimeout(()=>{f.value=""},5e3);return}g("save")};return(e,a)=>{const r=B("TextField"),n=B("MazPhoneNumberInput"),u=B("Card");return k(),P(me,{ref_key:"form",ref:N,onSubmit:ae(O,["prevent"])},{default:d(()=>[t(u,{title:e.$t("t-general-information"),elevation:"0","title-class":"pb-0"},{default:d(()=>[t(Q,{name:"fade"},{default:d(()=>[f.value?(k(),P(X,{key:0,text:f.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:a[0]||(a[0]=s=>f.value=""),style:{cursor:"pointer"}},null,8,["text"])):F("",!0)]),_:1}),t(H,{class:"pt-0"},{default:d(()=>[i("div",Se,[h(m(e.$t("t-employeeNumber"))+" ",1),De]),t(r,{modelValue:o(l).employeeNumber,"onUpdate:modelValue":a[1]||(a[1]=s=>o(l).employeeNumber=s),placeholder:e.$t("t-enter-employee-number"),rules:v.employeeNumber,disabled:""},null,8,["modelValue","placeholder","rules"]),t(D,{class:"mt-n3"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ne,[h(m(e.$t("t-firstname"))+" ",1),ke]),t(r,{modelValue:o(l).firstName,"onUpdate:modelValue":a[2]||(a[2]=s=>o(l).firstName=s),placeholder:e.$t("t-enter-employee-number"),rules:v.firstName,disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ue,m(e.$t("t-middle-name")),1),t(r,{modelValue:o(l).middleName,"onUpdate:modelValue":a[3]||(a[3]=s=>o(l).middleName=s),placeholder:e.$t("t-enter-middle-name"),disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ie,[h(m(e.$t("t-lastname"))+" ",1),Te]),t(r,{modelValue:o(l).lastName,"onUpdate:modelValue":a[4]||(a[4]=s=>o(l).lastName=s),placeholder:e.$t("t-enter-lastname"),rules:v.lastName,disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Pe,[h(m(e.$t("t-gender"))+" ",1),Ee]),t(T,{modelValue:o(l).gender,"onUpdate:modelValue":a[5]||(a[5]=s=>o(l).gender=s),items:o(ge),rules:v.gender,disabled:""},null,8,["modelValue","items","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Me,m(e.$t("t-marital-status")),1),t(T,{modelValue:o(l).maritalStatus,"onUpdate:modelValue":a[6]||(a[6]=s=>o(l).maritalStatus=s),items:o(ye),disabled:""},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Be,m(e.$t("t-blood-group")),1),t(T,{modelValue:o(l).bloodGroup,"onUpdate:modelValue":a[7]||(a[7]=s=>o(l).bloodGroup=s),items:o(he),disabled:""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(D,{class:"mt-n3"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Oe,[h(m(e.$t("t-birth-date"))+" ",1),xe]),t(G,{modelValue:o(l).birthDate,"onUpdate:modelValue":a[8]||(a[8]=s=>o(l).birthDate=s),teleport:!0,placeholder:"Select date",rules:v.birthDate,format:"dd/MM/yyyy",disabled:""},null,8,["modelValue","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Fe,m(e.$t("t-place-of-birth")),1),t(r,{modelValue:o(l).placeOfBirth,"onUpdate:modelValue":a[9]||(a[9]=s=>o(l).placeOfBirth=s),placeholder:e.$t("t-enter-place-of-birth"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ae,m(e.$t("t-nacionality")),1),t(T,{modelValue:o(l).nationality,"onUpdate:modelValue":a[10]||(a[10]=s=>o(l).nationality=s),items:o(Ve),disabled:""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(D,{class:"mt-n3"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ge,m(e.$t("t-nuit")),1),t(r,{modelValue:o(l).incomeTaxNumber,"onUpdate:modelValue":a[11]||(a[11]=s=>o(l).incomeTaxNumber=s),placeholder:e.$t("t-enter-nuit"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Re,m(e.$t("t-social-security-number")),1),t(r,{modelValue:o(l).socialSecurityNumber,"onUpdate:modelValue":a[12]||(a[12]=s=>o(l).socialSecurityNumber=s),placeholder:e.$t("t-enter-social-security-number"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",je,m(e.$t("t-address")),1),t(r,{modelValue:o(l).address,"onUpdate:modelValue":a[13]||(a[13]=s=>o(l).address=s),placeholder:e.$t("t-enter-address"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:d(()=>[t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",ze,m(e.$t("t-country")),1),t(T,{modelValue:o(l).country,"onUpdate:modelValue":a[14]||(a[14]=s=>o(l).country=s),items:S.value,loading:o(_).loading,disabled:""},null,8,["modelValue","items","loading"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",qe,m(e.$t("t-province")),1),t(T,{modelValue:o(l).province,"onUpdate:modelValue":a[15]||(a[15]=s=>o(l).province=s),items:b.value,loading:o(w).loading,disabled:""},null,8,["modelValue","items","loading"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ye,m(e.$t("t-postal-code")),1),t(r,{modelValue:o(l).postalCode,"onUpdate:modelValue":a[16]||(a[16]=s=>o(l).postalCode=s),placeholder:e.$t("t-enter-postal-code"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Le,m(e.$t("t-email")),1),t(r,{modelValue:o(l).email,"onUpdate:modelValue":a[17]||(a[17]=s=>o(l).email=s),placeholder:e.$t("t-enter-email"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Je,m(e.$t("t-phone")),1),t(n,{modelValue:o(l).phone,"onUpdate:modelValue":a[18]||(a[18]=s=>o(l).phone=s),size:"sm",fetchCountry:"",placeholder:e.$t("t-enter-phone-number"),class:"custom-phone-input",disabled:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ke,m(e.$t("t-mobile")),1),t(n,{modelValue:o(l).mobile,"onUpdate:modelValue":a[19]||(a[19]=s=>o(l).mobile=s),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Qe,m(e.$t("t-emergency-contact-name")),1),t(r,{modelValue:o(l).emergencyContactName,"onUpdate:modelValue":a[20]||(a[20]=s=>o(l).emergencyContactName=s),placeholder:e.$t("t-enter-phone-number"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Xe,m(e.$t("t-emergency-contact-phone")),1),t(n,{modelValue:o(l).emergencyContactPhone,"onUpdate:modelValue":a[21]||(a[21]=s=>o(l).emergencyContactPhone=s),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input",disabled:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",He,[h(m(e.$t("t-id-card-number"))+" ",1),We]),t(r,{modelValue:o(l).idCardNumber,"onUpdate:modelValue":a[22]||(a[22]=s=>o(l).idCardNumber=s),placeholder:e.$t("t-id-card-number"),rules:v.idCardNumber,disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",Ze,[h(m(e.$t("t-id-card-issuer"))+" ",1),et]),t(r,{modelValue:o(l).idCardIssuer,"onUpdate:modelValue":a[23]||(a[23]=s=>o(l).idCardIssuer=s),placeholder:e.$t("t-enter-id-card-issuer"),rules:v.idCardIssuer,disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",tt,[h(m(e.$t("t-id-card-expiry-date"))+" ",1),lt]),t(G,{modelValue:o(l).idCardExpiryDate,"onUpdate:modelValue":a[24]||(a[24]=s=>o(l).idCardExpiryDate=s),teleport:!0,rules:v.idCardExpiryDate,placeholder:e.$t("t-enter-id-card-expiry-date"),format:"dd/MM/yyyy",disabled:""},null,8,["modelValue","rules","placeholder"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:d(()=>[t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",at,[h(m(e.$t("t-id-card-issuance-date"))+" ",1),ot]),t(G,{modelValue:o(l).idCardIssuanceDate,"onUpdate:modelValue":a[25]||(a[25]=s=>o(l).idCardIssuanceDate=s),teleport:!0,rules:v.idCardIssuanceDate,placeholder:e.$t("t-enter-id-card-issuance-date"),format:"dd/MM/yyyy",disabled:""},null,8,["modelValue","rules","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",st,m(e.$t("t-passport-number")),1),t(r,{modelValue:o(l).passportNumber,"onUpdate:modelValue":a[26]||(a[26]=s=>o(l).passportNumber=s),placeholder:e.$t("t-enter-passport-number"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:d(()=>[i("div",dt,m(e.$t("t-passport-issuer")),1),t(r,{modelValue:o(l).passportIssuer,"onUpdate:modelValue":a[27]||(a[27]=s=>o(l).passportIssuer=s),placeholder:e.$t("t-enter-passport-issuer"),"hide-details":"",disabled:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:d(()=>[t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",nt,m(e.$t("t-passport-issuance-date")),1),t(G,{modelValue:o(l).passportIssuanceDate,"onUpdate:modelValue":a[28]||(a[28]=s=>o(l).passportIssuanceDate=s),teleport:!0,placeholder:e.$t("t-enter-passport-issuance-date"),"enable-time-picker":!1,format:"dd/MM/yyyy",disabled:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",rt,m(e.$t("t-id-passport-expiry-date")),1),t(G,{modelValue:o(l).passportExpiryDate,"onUpdate:modelValue":a[29]||(a[29]=s=>o(l).passportExpiryDate=s),teleport:!0,placeholder:e.$t("t-enter-id-passport-expiry-date"),"enable-time-picker":!1,format:"dd/MM/yyyy",disabled:!0},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),t(le,{class:"d-flex justify-space-between mt-3"},{default:d(()=>[t(z,{color:"secondary",variant:"outlined",class:"me-2",onClick:a[30]||(a[30]=s=>A()),disabled:V.loading},{default:d(()=>[h(m(e.$t("t-back"))+" ",1),it]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const mt=W(ut,[["__scopeId","data-v-cd5afa65"]]),j=V=>(oe("data-v-55c8656f"),V=V(),se(),V),pt={class:"font-weight-bold mb-2"},ct=j(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),ft={class:"font-weight-bold mb-2"},bt=j(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),vt={class:"font-weight-bold mb-2"},gt=j(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),yt={class:"font-weight-bold mb-2"},ht=j(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Vt=j(()=>i("i",{class:"ph-arrow-left ms-2"},null,-1)),_t=R({__name:"TabInstitution&Classification",props:{modelValue:{},loading:{type:Boolean}},emits:["onStepChange","save","update:modelValue"],setup(V,{emit:U}){const{t:c}=q();J();const C=pe(),g=ne(),y=re(),_=E(null),w=U,N=V;let l=M({get(){return N.modelValue},set(n){w("update:modelValue",n)}});const f=E(""),v={institution:[n=>!!n||c("t-please-select-institution")],department:[n=>!!n||c("t-please-select-department")],position:[n=>!!n||c("t-please-select-position")],salary:[n=>!!n||c("t-please-enter-salary"),n=>n>0||c("t-please-enter-a-valid-salary")]},S=M(()=>C.institutions.map(n=>({value:n.id,label:n.name}))),b=M(()=>g.departments.map(n=>({value:n.id,label:n.name}))),A=M(()=>y.positions.map(n=>({value:n.id,label:n.name})));K(async()=>{try{await C.fetchInstitutions()}catch(n){a("Falha ao carregar instituições",n)}}),L(()=>l.value.company,n=>{n?(g.fetchDepartments(n),l.value.department=void 0,l.value.position=void 0):(g.departments=[],y.positions=[])}),L(()=>l.value.department,n=>{n?(y.fetchPositions(n),l.value.position=void 0):y.positions=[]});const O=()=>{l.value.company&&g.pagination.currentPage<g.pagination.totalPages-1&&g.fetchDepartments(l.value.company,g.pagination.currentPage+1)},e=()=>{l.value.department&&y.pagination.currentPage<y.pagination.totalPages-1&&y.fetchPositions(l.value.department,y.pagination.currentPage+1)},a=(n,u)=>{console.error(n,u),f.value=n,setTimeout(()=>{f.value=""},5e3)},r=async()=>{if(!_.value)return;const{valid:n}=await _.value.validate();if(!n){f.value=c("t-please-correct-errors"),setTimeout(()=>{f.value=""},5e3);return}w("save")};return(n,u)=>{const s=B("TextField"),x=B("Card");return k(),P(me,{ref_key:"form2",ref:_,onSubmit:ae(r,["prevent"])},{default:d(()=>[t(x,{title:n.$t("t-institution-and-classification"),elevation:"0","title-class":"pb-0"},{default:d(()=>[t(Q,{name:"fade"},{default:d(()=>[f.value?(k(),P(X,{key:0,text:f.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:u[0]||(u[0]=$=>f.value=""),style:{cursor:"pointer"}},null,8,["text"])):F("",!0)]),_:1}),t(H,{class:"pt-0 mt-6"},{default:d(()=>[t(D,null,{default:d(()=>[t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",pt,[h(m(n.$t("t-institution"))+" ",1),ct]),t(T,{modelValue:o(l).company,"onUpdate:modelValue":u[1]||(u[1]=$=>o(l).company=$),items:S.value,loading:o(C).loading,placeholder:o(c)("t-select-institution"),clearable:"",rules:v.institution,disabled:""},null,8,["modelValue","items","loading","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",ft,[h(m(n.$t("t-department"))+" ",1),bt]),t(T,{modelValue:o(l).department,"onUpdate:modelValue":u[2]||(u[2]=$=>o(l).department=$),items:b.value,loading:o(g).loading,placeholder:o(c)("t-select-department"),rules:v.department,onScrollEnd:O,clearable:"",disabled:""},null,8,["modelValue","items","loading","placeholder","rules"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:d(()=>[t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",vt,[h(m(n.$t("t-position"))+" ",1),gt]),t(T,{modelValue:o(l).position,"onUpdate:modelValue":u[3]||(u[3]=$=>o(l).position=$),items:A.value,loading:o(y).loading,rules:v.position,placeholder:o(c)("t-select-position"),disabled:"",onScrollEnd:e,clearable:""},null,8,["modelValue","items","loading","rules","placeholder"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:d(()=>[i("div",yt,[h(m(n.$t("t-base-salary"))+" ",1),ht]),t(s,{modelValue:o(l).salary,"onUpdate:modelValue":u[4]||(u[4]=$=>o(l).salary=$),isRequired:"",placeholder:o(c)("t-enter-the-employee-base-salary"),rules:v.salary,class:"mb-2",disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),t(le,{class:"d-flex justify-space-between mt-5"},{default:d(()=>[t(z,{color:"secondary",variant:"outlined",class:"me-2",onClick:u[5]||(u[5]=$=>w("onStepChange",1)),disabled:n.loading},{default:d(()=>[h(m(n.$t("t-back-to-general-info"))+" ",1),Vt]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const $t=W(_t,[["__scopeId","data-v-55c8656f"]]),wt=R({__name:"index",props:{cardTitle:{type:String,default:""}},setup(V){ue(),pe();const U=ne(),c=re(),{t:C}=q(),g=de(),y=te(),_=J(),w=ie(),N=E(1),l=E(typeof g.params.id=="string"?g.params.id:Array.isArray(g.params.id)?g.params.id[0]:null),f=E(!1),v=E("");let S=null,b=ce({employeeNumber:"",firstName:"",middleName:"",lastName:"",gender:"",maritalStatus:void 0,birthDate:new Date().toISOString().split("T")[0],bloodGroup:"",placeOfBirth:"",nationality:"",incomeTaxNumber:null,socialSecurityNumber:null,address:"",country:void 0,province:void 0,postalCode:"",email:"",phone:"",mobile:"",emergencyContactName:"",emergencyContactPhone:"",idCardNumber:null,idCardIssuer:"",idCardExpiryDate:new Date().toISOString().split("T")[0],idCardIssuanceDate:new Date().toISOString().split("T")[0],passportNumber:null,passportIssuer:"",passportIssuanceDate:new Date().toISOString().split("T")[0],passportExpiryDate:new Date().toISOString().split("T")[0],enabled:!0,salary:null,company:void 0,department:void 0,position:void 0});const A=a=>{var n;S&&(clearTimeout(S),S=null);let r=C("t-error-saving-employee");(n=a==null?void 0:a.response)!=null&&n.data?(a.response.data.error&&(v.value=a.response.data.message,S=setTimeout(()=>{v.value="",S=null},5e3)),r=a.response.data.message||r):a.message&&(r=a.message),_.error(r),v.value=r,S=setTimeout(()=>{v.value="",S=null},5e3)};K(async()=>{var a,r,n,u,s;if(l.value)try{f.value=!0;const x=await Y.getEmployeeById(l.value);if(!x.data)throw new Error("Dados do funcionário não disponíveis.");const $=x.data;Object.assign(b,$),b.country=(a=$.country)==null?void 0:a.id,b.province=(r=$.province)==null?void 0:r.id,b.company=(n=$.company)==null?void 0:n.id,b.department=(u=$.department)==null?void 0:u.id,b.position=(s=$.position)==null?void 0:s.id,b.company&&await U.fetchDepartments(b.company),b.department&&await c.fetchPositions(b.department)}catch(x){_.error(C("t-error-loading-employee")),console.error("Error loading employee:",x)}finally{f.value=!1}});const O=a=>{N.value=a},e=async(a=!1)=>{var r,n;try{f.value=!0,v.value="";let u;if(l.value)u=await Y.updateEmployee(l.value,b);else if(u=await Y.createEmployee(b),(r=u==null?void 0:u.data)!=null&&r.id)l.value=u.data.id;else throw new Error(((n=u==null?void 0:u.error)==null?void 0:n.message)||C("t-error-creating-employee"));_.success(l.value?C("t-employee-updated-success"):C("t-employee-created-success")),a?(await w.fetchEmployees(),y.push("/employee/list")):N.value++}catch(u){console.error("Error saving employee:",u),A(u)}finally{f.value=!1}};return fe(()=>{S&&(clearTimeout(S),S=null)}),(a,r)=>{const n=B("Card");return k(),P(n,null,{default:d(()=>[t(H,null,{default:d(()=>[t(Ce,{modelValue:N.value,"onUpdate:modelValue":r[0]||(r[0]=u=>N.value=u),class:"mb-2"},null,8,["modelValue"]),f.value?(k(),P(be,{key:0,indeterminate:"",color:"primary",class:"mb-4"})):F("",!0),t(Q,{name:"fade"},{default:d(()=>[v.value?(k(),P(X,{key:0,text:v.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:r[1]||(r[1]=u=>v.value=""),style:{cursor:"pointer","white-space":"pre-line"}},null,8,["text"])):F("",!0)]),_:1}),N.value===1?(k(),P(mt,{key:1,onOnStepChange:O,modelValue:o(b),"onUpdate:modelValue":r[2]||(r[2]=u=>Z(b)?b.value=u:b=u),onSave:r[3]||(r[3]=u=>e(!1)),loading:f.value},null,8,["modelValue","loading"])):F("",!0),N.value===2?(k(),P($t,{key:2,onOnStepChange:O,modelValue:o(b),"onUpdate:modelValue":r[4]||(r[4]=u=>Z(b)?b.value=u:b=u),onSave:r[5]||(r[5]=u=>e(!0)),loading:f.value},null,8,["modelValue","loading"])):F("",!0)]),_:1})]),_:1})}}});const Ct=W(wt,[["__scopeId","data-v-98939d19"]]),Tt=R({__name:"View",setup(V){const{t:U}=q();return de().params.id,(C,g)=>{const y=B("Breadcrumb");return k(),ee(ve,null,[t(y,{title:o(U)("view-employee"),items:o($e)},null,8,["title","items"]),t(Ct,{"card-title":o(U)("t-view-employee")},null,8,["card-title"])],64)}}});export{Tt as default};
