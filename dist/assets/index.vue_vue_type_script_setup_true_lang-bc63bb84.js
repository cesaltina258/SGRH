import{d as F,c as S,b as x,f as R,x as e,w as l,G as k,S as D,T as _,I as v,V as O,Z as he,$ as be,J as K,K as Z,L as Q,l as y,m as oe,B as N,e as I,a0 as ne,a1 as W,h as E,D as j,i as m,g as f,a2 as z,a3 as Y,a4 as se,a5 as Ve,a6 as _e,a7 as ye,R as ie,C as ue,a8 as $e,a9 as Ce,aa as J,ab as ke,M,F as re,X as B,ac as de,s as te,Y as we,ad as De,ae as H,af as Te}from"./index-96068b83.js";import{u as ee}from"./institutionStore-a77edb62.js";import{V as me}from"./VForm-3a5f117e.js";import{s as ce,f as pe,c as le,h as xe,a as Pe,i as ae}from"./utils-8990985e.js";const Se={class:"d-flex justify-space-between align-center"},Ue=F({__name:"ButtonNav",props:{modelValue:{type:Number,default:1},institutionId:{type:[String],default:null},basicDataValidated:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(T,{emit:w}){const i=w,u=T,g=S({get(){return u.modelValue},set(n){i("update:modelValue",n)}}),h=n=>u.institutionId?!1:n>1&&!u.basicDataValidated;return(n,a)=>(x(),R("div",Se,[e(O,{"no-gutters":""},{default:l(()=>[e(k,{cols:"3"},{default:l(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===1?"elevated":"tonal",onClick:a[0]||(a[0]=p=>g.value=1),disabled:h(1)},{default:l(()=>[_(v(n.$t("t-general-information")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(k,{cols:"3"},{default:l(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===2?"elevated":"tonal",onClick:a[1]||(a[1]=p=>g.value=2),disabled:h(2)},{default:l(()=>[_(v(n.$t("t-health-plan")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(k,{cols:"3"},{default:l(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===3?"elevated":"tonal",onClick:a[2]||(a[2]=p=>g.value=3),disabled:h(3)},{default:l(()=>[_(v(n.$t("t-organizational-structure")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(k,{cols:"3"},{default:l(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===4?"elevated":"tonal",onClick:a[3]||(a[3]=p=>g.value=4),disabled:h(4)},{default:l(()=>[_(v(n.$t("t-contact")),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]))}}),Ae=he("institutiontypes",{state:()=>({institutiontypes:[],pagination:{totalElements:0,currentPage:0,itemsPerPage:10,totalPages:0},loading:!1,error:null}),actions:{async fetchInstitutionTypes(T,w,i="createdAt",u="asc",g,h){this.loading=!0,this.error=null;const n=T??this.pagination.currentPage,a=w??this.pagination.itemsPerPage;try{const{content:p,meta:V}=await be.getInstitutionTypes(n,a,i,u,g,h);this.institutiontypes=p,this.pagination={totalElements:V.totalElements,currentPage:V.page,itemsPerPage:V.size,totalPages:V.totalPages||Math.ceil(V.totalElements/V.size)},console.log("Instituicoes:",this.institutiontypes),console.log("Meta:",this.pagination)}catch(p){this.error=p.message||"Erro ao buscar instituições",console.error("❌ Erro ao buscar instituicões:",p),this.institutiontypes=[],this.pagination.totalElements=0}finally{this.loading=!1}}}}),q=T=>(Ve("data-v-6bbc3b65"),T=T(),_e(),T),Ie={class:"font-weight-bold mb-2 mt-5"},Le=q(()=>m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ne={class:"font-weight-bold mb-2"},Oe=q(()=>m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ee=q(()=>m("div",{class:"font-weight-bold mb-2"},[_(" NUIT "),m("i",{class:"ph-asterisk ph-xs text-danger"})],-1)),Me={class:"font-weight-bold mb-2"},Fe=q(()=>m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Be={class:"font-weight-bold mb-2"},qe=q(()=>m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),je={class:"font-weight-bold mb-2"},Re=q(()=>m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),ze={class:"font-weight-bold mb-2"},Ye={class:"font-weight-bold mb-2"},Ge=q(()=>m("i",{class:"ph-arrow-left ms-2"},null,-1)),Xe=q(()=>m("i",{class:"ph-arrow-right ms-2"},null,-1)),He=F({__name:"TabGeneralInfo",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(T,{emit:w}){const{t:i}=K(),u=Z(),g=Q(),h=w,n=T,a=ee(),p=Ae(),V=y(null);let c=S({get(){return n.modelValue},set(t){h("update:modelValue",t)}});const $=y(""),s={name:[t=>!!t||i("t-please-enter-institution-name")],institutionType:[t=>!!t||i("t-please-enter-institution-type")],incomeTaxNumber:[t=>!!t||i("t-please-enter-income-tax-number"),t=>t&&t.length==9||i("t-lenght-must-be-9")],address:[t=>!!t||i("t-please-enter-address")],phone:[t=>!!t||i("t-please-enter-phone-number"),t=>/^[0-9+() -]*$/.test(t)||i("t-invalid-phone-numebr")],email:[t=>!!t||i("t-please-enter-email-address"),t=>/.+@.+\..+/.test(t)||i("t-invalid-email")]},o=S(()=>p.institutiontypes.map(t=>({value:t.id,label:t.name})));oe(async()=>{try{await p.fetchInstitutionTypes()}catch(t){console.error("Failed to load tipos de instituicao:",t),$.value="Falha ao carregar  tipos de instituicao",setTimeout(()=>{$.value=""},5e3)}});const r=()=>{a.clearDraft(),g.push("/institution/list")},P=async()=>{if(!V.value)return;const{valid:t}=await V.value.validate();if(!t){u.error(i("t-validation-error")),$.value=i("t-please-correct-errors"),setTimeout(()=>{$.value=""},5e3);return}h("onStepChange",2)};return(t,d)=>{const U=N("TextField"),C=N("TextArea"),G=N("Card");return x(),I(me,{ref_key:"form",ref:V,onSubmit:se(P,["prevent"])},{default:l(()=>[e(G,{title:t.$t("t-general-information"),elevation:"0","title-class":"pb-0"},{default:l(()=>[e(ne,{name:"fade"},{default:l(()=>[$.value?(x(),I(W,{key:0,text:$.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:d[0]||(d[0]=b=>$.value=""),style:{cursor:"pointer"}},null,8,["text"])):E("",!0)]),_:1}),e(j,{class:"pt-0"},{default:l(()=>[m("div",Ie,[_(v(t.$t("t-institution-name"))+" ",1),Le]),e(U,{modelValue:f(c).name,"onUpdate:modelValue":d[1]||(d[1]=b=>f(c).name=b),placeholder:t.$t("t-enter-institution-name"),rules:s.name},null,8,["modelValue","placeholder","rules"]),e(O,{class:""},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",Ne,[_(v(t.$t("t-institution-type"))+" ",1),Oe]),e(z,{modelValue:f(c).institutionType,"onUpdate:modelValue":d[2]||(d[2]=b=>f(c).institutionType=b),items:o.value,loading:f(p).loading,rules:s.institutionType},null,8,["modelValue","items","loading","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[Ee,e(U,{modelValue:f(c).incomeTaxNumber,"onUpdate:modelValue":d[3]||(d[3]=b=>f(c).incomeTaxNumber=b),placeholder:t.$t("t-enter-nuit"),rules:s.incomeTaxNumber},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(O,{class:"mt-n6"},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",Me,[_(v(t.$t("t-address"))+" ",1),Fe]),e(U,{modelValue:f(c).address,"onUpdate:modelValue":d[4]||(d[4]=b=>f(c).address=b),placeholder:t.$t("t-enter-address"),rules:s.address},null,8,["modelValue","placeholder","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",Be,[_(v(t.$t("t-phone-number"))+" ",1),qe]),e(U,{modelValue:f(c).phone,"onUpdate:modelValue":d[5]||(d[5]=b=>f(c).phone=b),placeholder:t.$t("t-enter-phone-number"),rules:s.phone},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(O,{class:"mt-n6"},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",je,[_(v(t.$t("t-email"))+" ",1),Re]),e(U,{modelValue:f(c).email,"onUpdate:modelValue":d[6]||(d[6]=b=>f(c).email=b),placeholder:t.$t("t-enter-email-address"),rules:s.email},null,8,["modelValue","placeholder","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",ze,v(t.$t("t-website")),1),e(U,{modelValue:f(c).website,"onUpdate:modelValue":d[7]||(d[7]=b=>f(c).website=b),placeholder:t.$t("t-enter-website"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(O,{class:"mt-n6"},{default:l(()=>[e(k,{cols:"12",lg:"12"},{default:l(()=>[m("div",Ye,v(t.$t("t-description")),1),e(C,{modelValue:f(c).description,"onUpdate:modelValue":d[8]||(d[8]=b=>f(c).description=b),placeholder:t.$t("t-enter-description")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(Y,{class:"d-flex justify-space-between mt-3"},{default:l(()=>[e(D,{color:"secondary",variant:"outlined",class:"me-2",onClick:d[9]||(d[9]=b=>r())},{default:l(()=>[_(v(t.$t("t-back"))+" ",1),Ge]),_:1}),e(D,{color:"success",variant:"elevated",onClick:P,loading:T.loading},{default:l(()=>[_(v(t.$t("t-save-and-proceed"))+" ",1),Xe]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const Je=ye(He,[["__scopeId","data-v-6bbc3b65"]]),Ke=m("i",{class:"ph-funnel me-1"},null,-1),Ze={class:"font-weight-bold"},Qe=F({__name:"ContactFilters",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(T,{emit:w}){const i=w,u=T,g=S({get(){return u.modelValue.query||""},set(a){i("update:modelValue",{...u.modelValue,query:a})}}),h=S({get(){return u.modelValue.status||""},set(a){i("update:modelValue",{...u.modelValue,status:a})}}),n=S({get(){return u.modelValue.date||""},set(a){i("update:modelValue",{...u.modelValue,date:a})}});return(a,p)=>{const V=N("VueDatePicker");return x(),I(ue,null,{default:l(()=>[e(j,null,{default:l(()=>[e(O,null,{default:l(()=>[e(k,{cols:"12",lg:"4"},{default:l(()=>[e(ie,{modelValue:g.value,"onUpdate:modelValue":p[0]||(p[0]=c=>g.value=c),placeholder:a.$t("t-search-for-contact")},null,8,["modelValue","placeholder"])]),_:1}),e(k,{cols:"12",sm:"6",lg:"lg"},{default:l(()=>[e(z,{modelValue:h.value,"onUpdate:modelValue":p[1]||(p[1]=c=>h.value=c),items:f(ce),placeholder:a.$t("t-select-status")},null,8,["modelValue","items","placeholder"])]),_:1}),e(k,{cols:"12",sm:"6",lg:"lg"},{default:l(()=>[e(V,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=c=>n.value=c),teleport:!0,placeholder:a.$t("t-select-date"),"month-change-on-scroll":!1,"enable-time-picker":!1},null,8,["modelValue","placeholder"])]),_:1}),e(k,{cols:"12",lg:"2"},{default:l(()=>[e(D,{variant:"tonal",class:"",color:"primary",block:""},{default:l(()=>[Ke,m("span",Ze,v(a.$t("t-filter")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),We={class:"font-weight-bold mb-2"},et={class:"font-weight-bold mb-2"},tt={class:"font-weight-bold mb-2"},lt={class:"font-weight-bold mb-2"},at={class:"font-weight-bold mb-2"},fe=F({__name:"CreateEditContactDialog",props:{modelValue:{type:Boolean,default:!1},customerDetail:{type:Object,default:()=>{}}},emits:["update:modelValue","onConfirm"],setup(T,{emit:w}){var r,P,t,d,U,C,G;const i=w,u=T,g=((r=u.customerDetail)==null?void 0:r.id)===-1,h=y(((P=u.customerDetail)==null?void 0:P.name)||""),n=y(((t=u.customerDetail)==null?void 0:t.email)||""),a=y(((d=u.customerDetail)==null?void 0:d.phone)||""),p=(U=u.customerDetail)!=null&&U.create_date?y(new Date((C=u.customerDetail)==null?void 0:C.create_date)):y(new Date),V=y(((G=u.customerDetail)==null?void 0:G.status)||""),c=y(u.customerDetail.img?[u.customerDetail.img]:[]),$=y(""),s=S({get(){return u.modelValue},set(b){i("update:modelValue",b)}}),o=()=>{if(h.value?n.value?a.value?p.value?V.value||($.value="Select status"):$.value="Select date":$.value="Enter contact number":$.value="Enter Email":$.value="Enter customer name",setTimeout(()=>{$.value=""},3e3),!h.value||!n.value||!a.value||!p.value||!V.value)return;const b={...u.customerDetail,name:h.value,email:n.value,phone:a.value,create_date:p.value,status:V.value,img:c.value[0]};i("onConfirm",b)};return(b,A)=>{const X=N("TextField"),ve=N("VueDatePicker"),ge=N("Card");return x(),I(ke,{modelValue:s.value,"onUpdate:modelValue":A[7]||(A[7]=L=>s.value=L),width:"600",persistent:"",scrollable:""},{default:l(()=>[e(ge,{title:g?b.$t("t-add-contact"):b.$t("t-edit-contact"),"title-class":"bg-light"},{"title-action":l(()=>[e(D,{icon:"ph-x",variant:"plain",density:"compact",onClick:A[0]||(A[0]=L=>s.value=!1)})]),default:l(()=>[e(j,{"data-simplebar":"",style:{"max-height":"calc(100vh - 400px)"}},{default:l(()=>[$e(e(W,{text:$.value,variant:"tonal",color:"danger",density:"compact",class:"mb-3"},null,8,["text"]),[[Ce,$.value]]),m("div",We,v(b.$t("t-name")),1),e(X,{modelValue:h.value,"onUpdate:modelValue":A[1]||(A[1]=L=>h.value=L),placeholder:b.$t("t-enter-name")},null,8,["modelValue","placeholder"]),m("div",et,v(b.$t("t-email")),1),e(X,{modelValue:n.value,"onUpdate:modelValue":A[2]||(A[2]=L=>n.value=L),placeholder:b.$t("t-enter-email-address")},null,8,["modelValue","placeholder"]),m("div",tt,v(b.$t("t-phone-number")),1),e(X,{modelValue:a.value,"onUpdate:modelValue":A[3]||(A[3]=L=>a.value=L),placeholder:b.$t("t-enter-phone-number")},null,8,["modelValue","placeholder"]),m("div",lt,v(b.$t("t-created-date")),1),e(ve,{modelValue:f(p),"onUpdate:modelValue":A[4]||(A[4]=L=>J(p)?p.value=L:null),class:"mb-4",teleport:!0,"enable-time-picker":!1,clearable:!1},null,8,["modelValue"]),m("div",at,v(b.$t("t-status")),1),e(z,{modelValue:V.value,"onUpdate:modelValue":A[5]||(A[5]=L=>V.value=L),items:f(ce)},null,8,["modelValue","items"])]),_:1}),e(Y,{class:"d-flex justify-end px-5 pb-3"},{default:l(()=>[e(D,{class:"",color:"light",elevation:"0",variant:"elevated",onClick:A[6]||(A[6]=L=>s.value=!1)},{default:l(()=>[_(v(b.$t("t-cancel")),1)]),_:1}),e(D,{class:"",color:"success",elevation:"0",variant:"elevated",onClick:o},{default:l(()=>[_(v(b.$t("t-save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),ot=m("i",{class:"ph-plus-circle me-1"},null,-1),nt=m("i",{class:"ph-download-simple me-1"},null,-1),st=m("i",{class:"ph-upload-simple me-1"},null,-1),it=m("i",{class:"ph-arrow-left me-2"},null,-1),ut=m("i",{class:"ph-arrow-right ms-2"},null,-1),rt=F({__name:"TabContacts",emits:["onStepChange"],setup(T,{emit:w}){const i=w,u=y(pe);y(le[0]);const g=y(!1),h=y(null),n=y(le),a=y(n.value);M(g,o=>{o||(h.value=null)});const p=S(()=>u.value.query);M(p,o=>{n.value=a.value.filter(r=>{const P=o.toLowerCase();if(r.name.toLowerCase().includes(P))return r})});const V=S(()=>u.value.date);M(V,o=>{o?n.value=a.value.filter(r=>B(r.create_date)===B(o)):n.value=a.value});const c=S(()=>u.value.status);M(c,o=>{o?n.value=a.value.filter(r=>r.status===o):n.value=a.value});const $=()=>{h.value={id:-1,name:"",email:"",phone:"",create_date:new Date().toString(),status:""},g.value=!0},s=o=>{o.id===-1?n.value.unshift({...o,id:de(),create_date:B(o.create_date)}):n.value=n.value.map(r=>r.id===o.id?{...r,...o,create_date:B(o.create_date)}:r),g.value=!1};return(o,r)=>{const P=N("Card");return x(),R(re,null,[e(P,{title:o.$t("t-contact-person-list"),"title-class":"py-5"},{"title-action":l(()=>[m("div",null,[e(D,{color:"primary",class:"mx-1",onClick:$},{default:l(()=>[ot,_(" "+v(o.$t("t-add-contact-person")),1)]),_:1}),e(D,{color:"secondary",class:"mx-1"},{default:l(()=>[nt,_(" "+v(o.$t("t-import")),1)]),_:1}),e(D,{color:"info",class:"mx-1",variant:"tonal"},{default:l(()=>[st,_(" "+v(o.$t("t-export")),1)]),_:1})])]),_:1},8,["title"]),e(O,{class:"mt-5"},{default:l(()=>[e(k,{cols:"12",lg:"12"},{default:l(()=>[e(Qe,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=t=>u.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),h.value?(x(),I(fe,{key:0,modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=t=>g.value=t),customerDetail:h.value,onOnConfirm:s},null,8,["modelValue","customerDetail"])):E("",!0),e(Y,{class:"d-flex justify-space-between mt-5"},{default:l(()=>[e(D,{color:"primary",variant:"text",onClick:r[2]||(r[2]=t=>i("onStepChange",1))},{default:l(()=>[it,_(" "+v(o.$t("t-back-to-general-info")),1)]),_:1}),e(D,{color:"success",variant:"elevated",onClick:r[3]||(r[3]=t=>i("onStepChange",3))},{default:l(()=>[_(v(o.$t("t-save-and-proceed"))+" ",1),ut]),_:1})]),_:1})],64)}}}),dt={class:"font-weight-bold mb-2"},mt=m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),ct={class:"font-weight-bold mb-2"},pt=m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),ft={class:"font-weight-bold mb-2"},vt=m("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),gt={class:"font-weight-bold mb-2"},ht={key:0,class:"ph-asterisk ph-xs text-danger"},bt={class:"font-weight-bold mb-2"},Vt={key:0,class:"ph-asterisk ph-xs text-danger"},_t={class:"font-weight-bold mb-2"},yt=m("i",{class:"ph-arrow-left me-2"},null,-1),$t=m("i",{class:"ph-arrow-right ms-2"},null,-1),Ct=F({__name:"TabHealthPlan",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1},enabled:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(T,{emit:w}){const{t:i}=K(),u=Z();Q();const g=w,h=T;ee();const n=y(null);let a=S({get(){return h.modelValue},set(s){g("update:modelValue",s)}});const p=y(""),V=S({get:()=>a.value.healthPlanLimit,set:s=>{a.value.healthPlanLimit=s,te(()=>{var o;(o=n.value)==null||o.validate()})}});M(V,()=>{a.value.healthPlanLimit!=="FIXED_AMOUNT"&&(a.value.fixedAmount=null),a.value.healthPlanLimit!=="ANUAL_SALARY"&&(a.value.salaryComponent=void 0,a.value.companyContributionPercentage=null),te(()=>{var s;(s=n.value)==null||s.validate()})});const c={maxNumberOfDependents:[s=>!!s||i("t-please-enter-max-dependents"),s=>s&&s>=0||i("t-min-zero-dependents")],childrenMaxAge:[s=>!!s||i("t-please-enter-max-age"),s=>s&&s>=0||i("t-min-zero-age")],healthPlanLimit:[s=>!!s||i("t-please-select-plan-limit")],fixedAmount:[s=>a.value.healthPlanLimit!=="FIXED_AMOUNT"||!!s||i("t-please-enter-fixed-amount")],salaryComponent:[s=>a.value.healthPlanLimit!=="ANUAL_SALARY"||!!s||i("t-please-select-salary-component")],companyContributionPercentage:[s=>a.value.healthPlanLimit!=="ANUAL_SALARY"||!!s||i("t-please-enter-company-contribution-percentage")]},$=async()=>{if(!n.value)return;const{valid:s}=await n.value.validate();if(!s){u.error(i("t-validation-error")),p.value=i("t-please-correct-errors"),setTimeout(()=>{p.value=""},5e3);return}g("save",!1)};return(s,o)=>{const r=N("TextField"),P=N("Card");return x(),I(me,{ref_key:"form1",ref:n,onSubmit:se($,["prevent"])},{default:l(()=>[e(P,{title:s.$t("t-health-plan"),elevation:"0","title-class":"pb-0"},{default:l(()=>[e(ne,{name:"fade"},{default:l(()=>[p.value?(x(),I(W,{key:0,text:p.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:o[0]||(o[0]=t=>p.value=""),style:{cursor:"pointer"}},null,8,["text"])):E("",!0)]),_:1}),e(j,{class:"pt-0 mt-3"},{default:l(()=>[e(O,{class:"mt-3"},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",dt,[_(v(s.$t("t-maximum-number-of-dependents")),1),mt]),e(r,{modelValue:f(a).maxNumberOfDependents,"onUpdate:modelValue":o[1]||(o[1]=t=>f(a).maxNumberOfDependents=t),modelModifiers:{number:!0},placeholder:f(i)("t-enter-maximum-number-of-dependents"),rules:c.maxNumberOfDependents,type:"number",class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",ct,[_(v(s.$t("t-maximum-age-of-dependents"))+" ",1),pt]),e(r,{modelValue:f(a).childrenMaxAge,"onUpdate:modelValue":o[2]||(o[2]=t=>f(a).childrenMaxAge=t),modelModifiers:{number:!0},placeholder:f(i)("t-enter-maximum-age-of-dependents"),type:"number",rules:c.childrenMaxAge,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(O,{class:"mt-n6"},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",ft,[_(v(s.$t("t-health-plan-limit")),1),vt]),e(z,{modelValue:f(a).healthPlanLimit,"onUpdate:modelValue":o[3]||(o[3]=t=>f(a).healthPlanLimit=t),items:f(xe),rules:c.healthPlanLimit},null,8,["modelValue","items","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",gt,[_(v(s.$t("t-fixed-amount"))+" ",1),f(a).healthPlanLimit==="FIXED_AMOUNT"?(x(),R("i",ht)):E("",!0)]),e(r,{modelValue:f(a).fixedAmount,"onUpdate:modelValue":o[4]||(o[4]=t=>f(a).fixedAmount=t),modelModifiers:{number:!0},type:"number",placeholder:f(i)("t-enter-fixed-amount"),rules:c.fixedAmount,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(O,{class:"mt-n5"},{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",bt,[_(v(s.$t("t-salary-component"))+" ",1),f(a).healthPlanLimit==="ANUAL_SALARY"?(x(),R("i",Vt)):E("",!0)]),e(z,{modelValue:f(a).salaryComponent,"onUpdate:modelValue":o[5]||(o[5]=t=>f(a).salaryComponent=t),items:f(Pe),rules:c.salaryComponent},null,8,["modelValue","items","rules"])]),_:1}),e(k,{cols:"12",lg:"6"},{default:l(()=>[m("div",_t,v(s.$t("t-company-contribuition-percentage")),1),e(r,{modelValue:f(a).companyContributionPercentage,"onUpdate:modelValue":o[6]||(o[6]=t=>f(a).companyContributionPercentage=t),placeholder:f(i)("t-enter-company-contribuition-percentage"),type:"number",class:"mb-2",rules:c.companyContributionPercentage},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),e(Y,{class:"d-flex justify-space-between mt-5"},{default:l(()=>[e(D,{color:"primary",variant:"text",onClick:o[7]||(o[7]=t=>g("onStepChange",1))},{default:l(()=>[yt,_(" "+v(s.$t("t-back-to-general-info")),1)]),_:1}),e(D,{color:"success",variant:"elevated",onClick:$},{default:l(()=>[_(v(s.$t("t-save-and-proceed"))+" ",1),$t]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}}),kt=m("i",{class:"ph-funnel me-1"},null,-1),wt={class:"font-weight-bold"},Dt=F({__name:"HistoryFilters",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(T,{emit:w}){const i=w,u=T,g=S({get(){return u.modelValue.query||""},set(n){i("update:modelValue",{...u.modelValue,query:n})}});S({get(){return u.modelValue.status||""},set(n){i("update:modelValue",{...u.modelValue,status:n})}});const h=S({get(){return u.modelValue.date||""},set(n){i("update:modelValue",{...u.modelValue,date:n})}});return(n,a)=>{const p=N("VueDatePicker");return x(),I(ue,null,{default:l(()=>[e(j,null,{default:l(()=>[e(O,null,{default:l(()=>[e(k,{cols:"12",lg:"6"},{default:l(()=>[e(ie,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=V=>g.value=V),placeholder:n.$t("t-search-for-interaction")},null,8,["modelValue","placeholder"])]),_:1}),e(k,{cols:"12",sm:"12",lg:"lg"},{default:l(()=>[e(p,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=V=>h.value=V),teleport:!0,placeholder:n.$t("t-select-date"),"month-change-on-scroll":!1,"enable-time-picker":!1},null,8,["modelValue","placeholder"])]),_:1}),e(k,{cols:"12",lg:"2"},{default:l(()=>[e(D,{variant:"tonal",class:"",color:"primary",block:""},{default:l(()=>[kt,m("span",wt,v(n.$t("t-filter")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Tt=m("i",{class:"ph-plus-circle me-1"},null,-1),xt=m("i",{class:"ph-download-simple me-1"},null,-1),Pt=m("i",{class:"ph-upload-simple me-1"},null,-1),St=m("i",{class:"ph-arrow-left me-2"},null,-1),Ut=F({__name:"TabOrganizationalStructure",emits:["onStepChange"],setup(T,{emit:w}){const i=w,u=y(pe);y(ae[0]);const g=y(!1),h=y(null),n=y(ae),a=y(n.value);M(g,o=>{o||(h.value=null)});const p=S(()=>u.value.query);M(p,o=>{n.value=a.value.filter(r=>{const P=o.toLowerCase();if(r.name.toLowerCase().includes(P))return r})});const V=S(()=>u.value.date);M(V,o=>{o?n.value=a.value.filter(r=>B(r.create_date)===B(o)):n.value=a.value});const c=S(()=>u.value.status);M(c,o=>{o?n.value=a.value.filter(r=>r.status===o):n.value=a.value});const $=()=>{h.value={id:-1,name:"",email:"",create_date:new Date().toString(),status:""},g.value=!0},s=o=>{o.id===-1?n.value.unshift({...o,id:de(),create_date:B(o.create_date)}):n.value=n.value.map(r=>r.id===o.id?{...r,...o,create_date:B(o.create_date)}:r),g.value=!1};return(o,r)=>{const P=N("Card");return x(),R(re,null,[e(P,{title:o.$t("t-interaction-history"),"title-class":"py-5"},{"title-action":l(()=>[m("div",null,[e(D,{color:"primary",class:"mx-1",onClick:$},{default:l(()=>[Tt,_(" "+v(o.$t("t-add-interaction")),1)]),_:1}),e(D,{color:"secondary",class:"mx-1"},{default:l(()=>[xt,_(" "+v(o.$t("t-import")),1)]),_:1}),e(D,{color:"info",class:"mx-1",variant:"tonal"},{default:l(()=>[Pt,_(" "+v(o.$t("t-export")),1)]),_:1})])]),_:1},8,["title"]),e(O,{class:"mt-5"},{default:l(()=>[e(k,{cols:"12",lg:"12"},{default:l(()=>[e(Dt,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=t=>u.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),h.value?(x(),I(fe,{key:0,modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=t=>g.value=t),customerDetail:h.value,onOnConfirm:s},null,8,["modelValue","customerDetail"])):E("",!0),e(Y,{class:"d-flex justify-space-between"},{default:l(()=>[e(D,{color:"primary",variant:"text",onClick:r[2]||(r[2]=t=>i("onStepChange",1))},{default:l(()=>[St,_(" "+v(o.$t("t-back-to-health-plan")),1)]),_:1}),e(D,{color:"success",variant:"elevated"},{default:l(()=>[_(v(o.$t("t-save")),1)]),_:1})]),_:1})],64)}}}),Ot=F({__name:"index",setup(T){const w=ee(),{t:i}=K(),u=we(),g=Q(),h=Z(),n=y(1),a=y(typeof u.params.id=="string"?u.params.id:Array.isArray(u.params.id)?u.params.id[0]:null),p=y(!1),V=y("");let c=null;const $=y(!1);let s=De({name:"",address:"",phone:"",email:"",website:null,description:null,incomeTaxNumber:"",institutionType:void 0,maxNumberOfDependents:null,childrenMaxAge:null,healthPlanLimit:"",fixedAmount:null,salaryComponent:void 0,companyContributionPercentage:null});const o=t=>{var U;c&&(clearTimeout(c),c=null);let d=i("t-error-saving-employee");(U=t==null?void 0:t.response)!=null&&U.data?(t.response.data.error&&(V.value=t.response.data.message,c=setTimeout(()=>{V.value="",c=null},5e3)),d=t.response.data.message||d):t.message&&(d=t.message),h.error(d),V.value=d,c=setTimeout(()=>{V.value="",c=null},5e3)};oe(async()=>{var t;if(w.loadFromStorage(),w.currentInstitutionId&&(a.value=w.currentInstitutionId,$.value=!0),a.value)try{p.value=!0;const d=await H.getInstitutionById(a.value);d&&d.data&&(Object.assign(s,d.data),s.institutionType=((t=d.data.institutionType)==null?void 0:t.id)||void 0)}catch(d){h.error(i("t-error-loading-institution")),console.error("Error loading institution:",d)}finally{p.value=!1}});const r=t=>{if(t<n.value){n.value=t;return}if(a.value||$.value){n.value=t;return}t===n.value+1&&(n.value=t)},P=async(t=!1)=>{var d,U;try{p.value=!0,V.value="";let C;if(a.value)C=await H.updateInstitution(a.value,s);else if(C=await H.createInstitution(s),(d=C==null?void 0:C.data)!=null&&d.id)a.value=C.data.id,w.setCurrentInstitutionId(C.data.id),$.value=!0;else throw new Error(((U=C==null?void 0:C.error)==null?void 0:U.message)||i("t-error-creating-employee"));w.setDraftInstitution(s),h.success(a.value?i("t-institution-updated-success"):i("t-institution-created-success")),t?(await w.fetchInstitutions(),g.push("/institution/list")):n.value++}catch(C){console.error("Error saving institution:",C),o(C)}finally{p.value=!1}};return Te(()=>{c&&(clearTimeout(c),c=null)}),(t,d)=>{const U=N("Card");return x(),I(U,{title:""},{default:l(()=>[e(j,null,{default:l(()=>[e(Ue,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=C=>n.value=C),class:"mb-2","institution-id":a.value,"basic-data-validated":$.value},null,8,["modelValue","institution-id","basic-data-validated"]),n.value===1?(x(),I(Je,{key:0,onOnStepChange:r,modelValue:f(s),"onUpdate:modelValue":d[1]||(d[1]=C=>J(s)?s.value=C:s=C),onSave:d[2]||(d[2]=C=>P(!1)),loading:p.value},null,8,["modelValue","loading"])):E("",!0),n.value===2?(x(),I(Ct,{key:1,onOnStepChange:r,modelValue:f(s),"onUpdate:modelValue":d[3]||(d[3]=C=>J(s)?s.value=C:s=C),onSave:d[4]||(d[4]=C=>P(!1)),loading:p.value},null,8,["modelValue","loading"])):E("",!0),n.value===3?(x(),I(Ut,{key:2,onOnStepChange:r})):E("",!0),n.value===4?(x(),I(rt,{key:3,onOnStepChange:r})):E("",!0)]),_:1})]),_:1})}}});export{Ot as _};
