import{d as j,c as P,b as U,f as me,x as t,w as n,G as p,S as A,T as b,I as m,V as D,J as L,K as J,L as ee,l as E,m as K,M as Y,B as O,e as T,a0 as Q,a1 as H,h as x,D as W,i,g as o,a2 as I,a3 as te,a4 as le,a5 as ae,a6 as oe,a7 as X,Y as pe,ad as ce,Q as z,af as fe,aj as ve,aa as Z}from"./index-96068b83.js";import{g as ge,m as ye,a as be,V as q,n as he,u as se,c as ne}from"./positionStore-cfa6a77a.js";import{u as de}from"./employeeStore-53656523.js";import{u as Ve}from"./countryStore-b6395f06.js";import{u as re}from"./provinceStore-27778dcc.js";import{V as ie}from"./VForm-3a5f117e.js";import{u as ue}from"./institutionStore-a77edb62.js";const _e={class:"d-flex justify-space-between align-center"},$e=j({__name:"ButtonNav",props:{modelValue:{type:Number,default:1}},emits:["update:modelValue"],setup(C,{emit:M}){const c=M,S=C,y=P({get(){return S.modelValue},set(h){c("update:modelValue",h)}});return(h,_)=>(U(),me("div",_e,[t(D,{"no-gutters":""},{default:n(()=>[t(p,{cols:"6"},{default:n(()=>[t(A,{rounded:"0",color:"primary",block:"",variant:y.value===1?"elevated":"tonal",onClick:_[0]||(_[0]=V=>y.value=1)},{default:n(()=>[b(m(h.$t("t-general-information")),1)]),_:1},8,["variant"])]),_:1}),t(p,{cols:"6"},{default:n(()=>[t(A,{rounded:"0",color:"primary",block:"",variant:y.value===2?"elevated":"tonal",onClick:_[1]||(_[1]=V=>y.value=2)},{default:n(()=>[b(m(h.$t("t-institution-and-classification")),1)]),_:1},8,["variant"])]),_:1})]),_:1})]))}}),k=C=>(ae("data-v-607b1c27"),C=C(),oe(),C),Ce={class:"font-weight-bold mb-2 mt-5"},we=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Se={class:"font-weight-bold mb-2"},De=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ne={class:"font-weight-bold mb-2"},ke={class:"font-weight-bold mb-2"},Ue=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ie={class:"font-weight-bold mb-2"},Te=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Pe={class:"font-weight-bold mb-2"},Ee={class:"font-weight-bold mb-2"},Me={class:"font-weight-bold mb-2"},Be=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Oe={class:"font-weight-bold mb-2"},Fe={class:"font-weight-bold mb-2"},xe={class:"font-weight-bold mb-2"},Ae={class:"font-weight-bold mb-2"},Ge={class:"font-weight-bold mb-2"},Re={class:"font-weight-bold mb-2"},je={class:"font-weight-bold mb-2"},ze={class:"font-weight-bold mb-2"},qe={class:"font-weight-bold mb-2"},Ye={class:"font-weight-bold mb-2"},Le={class:"font-weight-bold mb-2"},Je={class:"font-weight-bold mb-2"},Ke={class:"font-weight-bold mb-2"},Qe={class:"font-weight-bold mb-2"},He=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),We={class:"font-weight-bold mb-2"},Xe=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ze={class:"font-weight-bold mb-2"},et=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),tt={class:"font-weight-bold mb-2"},lt=k(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),at={class:"font-weight-bold mb-2"},ot={class:"font-weight-bold mb-2"},st={class:"font-weight-bold mb-2"},nt={class:"font-weight-bold mb-2"},dt=k(()=>i("i",{class:"ph-arrow-left ms-2"},null,-1)),rt=k(()=>i("i",{class:"ph-arrow-right ms-2"},null,-1)),it=j({__name:"TabGeneralInfo",props:{modelValue:{},loading:{type:Boolean}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:M}){const{t:c}=L();J();const S=ee(),y=M,h=C;de();const _=Ve(),V=re(),N=E(null);let l=P({get(){return h.modelValue},set(e){y("update:modelValue",e)}});const f=E(""),v={employeeNumber:[e=>!!e||c("t-please-enter-employee-number"),e=>e&&e.length<=20||c("t-please-enter-maximum-20-characters")],firstName:[e=>!!e||c("t-please-enter-employee-firstname")],lastName:[e=>!!e||c("t-please-enter-lastname")],idCardNumber:[e=>!!e||c("t-please-enter-id-card-number"),e=>e&&e.length<=30||c("t-maximum-30-characters")],gender:[e=>!!e||c("t-please-select-gender")],maritalStatus:[e=>!!e||c("t-please-select-marital-status")],birthDate:[e=>!!e||c("t-please-enter-birth-date"),e=>{if(!e)return!0;const a=new Date(e),r=new Date;return r.setFullYear(r.getFullYear()-120),a>=r||c("t-invalid-birth-date")}],idCardIssuer:[e=>!!e||c("t-please-enter-id-card-issuer"),e=>e&&e.length<=50||c("t-maximum-50-characters")],idCardExpiryDate:[e=>!!e||c("t-please-enter-id-card-expiry-date"),e=>e?new Date(e)>=new Date||c("t-invalid-id-card-expiry-date"):!0],idCardIssuanceDate:[e=>!!e||c("t-please-enter-id-card-issuance-date"),e=>e?new Date(e)<=new Date||c("t-invalid-id-card-issuance-date"):!0],email:[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||c("t-invalid-email")]},w=P(()=>_.countries.map(e=>({value:e.id,label:e.name,meta:{code:e.iso2Code,phoneCode:e.phoneCode}}))),g=P(()=>Array.isArray(V.provincesbyCountry)?V.provincesbyCountry.map(e=>({value:e.id,label:e.name,meta:{code:e.code,country:e.country}})):[]);K(async()=>{try{await _.fetchCountries(),l.value.country&&await V.fetchProvincesbyCountry(l.value.country)}catch(e){console.error("Failed to load countries:",e),f.value="Falha ao carregar países",setTimeout(()=>{f.value=""},5e3)}}),Y(()=>l.value.country,async(e,a)=>{if(e!==a)if(e)try{await V.fetchProvincesbyCountry(e),l.value.province&&V.provincesbyCountry.find(d=>d.id===l.value.province)||(l.value.province=void 0)}catch(r){console.error("Failed to load provinces:",r),V.provincesbyCountry=[],l.value.province=void 0,f.value="Falha ao carregar províncias",setTimeout(()=>{f.value=""},5e3)}else V.clearProvinces(),l.value.province=void 0});const G=()=>{S.push({path:"/employee/list"})},B=async()=>{if(!N.value)return;const{valid:e}=await N.value.validate();if(!e){f.value=c("t-please-correct-errors"),setTimeout(()=>{f.value=""},5e3);return}y("save")};return(e,a)=>{const r=O("TextField"),d=O("MazPhoneNumberInput"),u=O("VueDatePicker"),F=O("Card");return U(),T(ie,{ref_key:"form",ref:N,onSubmit:le(B,["prevent"])},{default:n(()=>[t(F,{title:e.$t("t-general-information"),elevation:"0","title-class":"pb-0"},{default:n(()=>[t(Q,{name:"fade"},{default:n(()=>[f.value?(U(),T(H,{key:0,text:f.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:a[0]||(a[0]=s=>f.value=""),style:{cursor:"pointer"}},null,8,["text"])):x("",!0)]),_:1}),t(W,{class:"pt-0"},{default:n(()=>[i("div",Ce,[b(m(e.$t("t-employeeNumber"))+" ",1),we]),t(r,{modelValue:o(l).employeeNumber,"onUpdate:modelValue":a[1]||(a[1]=s=>o(l).employeeNumber=s),placeholder:e.$t("t-enter-employee-number"),rules:v.employeeNumber},null,8,["modelValue","placeholder","rules"]),t(D,{class:"mt-n3"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Se,[b(m(e.$t("t-firstname"))+" ",1),De]),t(r,{modelValue:o(l).firstName,"onUpdate:modelValue":a[2]||(a[2]=s=>o(l).firstName=s),placeholder:e.$t("t-enter-employee-number"),rules:v.firstName},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ne,m(e.$t("t-middle-name")),1),t(r,{modelValue:o(l).middleName,"onUpdate:modelValue":a[3]||(a[3]=s=>o(l).middleName=s),placeholder:e.$t("t-enter-middle-name")},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",ke,[b(m(e.$t("t-lastname"))+" ",1),Ue]),t(r,{modelValue:o(l).lastName,"onUpdate:modelValue":a[4]||(a[4]=s=>o(l).lastName=s),placeholder:e.$t("t-enter-lastname"),rules:v.lastName},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ie,[b(m(e.$t("t-gender"))+" ",1),Te]),t(I,{modelValue:o(l).gender,"onUpdate:modelValue":a[5]||(a[5]=s=>o(l).gender=s),items:o(ge),rules:v.gender},null,8,["modelValue","items","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Pe,m(e.$t("t-marital-status")),1),t(I,{modelValue:o(l).maritalStatus,"onUpdate:modelValue":a[6]||(a[6]=s=>o(l).maritalStatus=s),items:o(ye)},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ee,m(e.$t("t-blood-group")),1),t(I,{modelValue:o(l).bloodGroup,"onUpdate:modelValue":a[7]||(a[7]=s=>o(l).bloodGroup=s),items:o(be)},null,8,["modelValue","items"])]),_:1})]),_:1}),t(D,{class:"mt-n3"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Me,[b(m(e.$t("t-birth-date"))+" ",1),Be]),t(q,{modelValue:o(l).birthDate,"onUpdate:modelValue":a[8]||(a[8]=s=>o(l).birthDate=s),teleport:!0,placeholder:"Select date",rules:v.birthDate,format:"dd/MM/yyyy"},null,8,["modelValue","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Oe,m(e.$t("t-place-of-birth")),1),t(r,{modelValue:o(l).placeOfBirth,"onUpdate:modelValue":a[9]||(a[9]=s=>o(l).placeOfBirth=s),placeholder:e.$t("t-enter-place-of-birth"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Fe,m(e.$t("t-nacionality")),1),t(I,{modelValue:o(l).nationality,"onUpdate:modelValue":a[10]||(a[10]=s=>o(l).nationality=s),items:o(he)},null,8,["modelValue","items"])]),_:1})]),_:1}),t(D,{class:"mt-n3"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",xe,m(e.$t("t-nuit")),1),t(r,{modelValue:o(l).incomeTaxNumber,"onUpdate:modelValue":a[11]||(a[11]=s=>o(l).incomeTaxNumber=s),placeholder:e.$t("t-enter-nuit"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ae,m(e.$t("t-social-security-number")),1),t(r,{modelValue:o(l).socialSecurityNumber,"onUpdate:modelValue":a[12]||(a[12]=s=>o(l).socialSecurityNumber=s),placeholder:e.$t("t-enter-social-security-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ge,m(e.$t("t-address")),1),t(r,{modelValue:o(l).address,"onUpdate:modelValue":a[13]||(a[13]=s=>o(l).address=s),placeholder:e.$t("t-enter-address"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:n(()=>[t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",Re,m(e.$t("t-country")),1),t(I,{modelValue:o(l).country,"onUpdate:modelValue":a[14]||(a[14]=s=>o(l).country=s),items:w.value,loading:o(_).loading},null,8,["modelValue","items","loading"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",je,m(e.$t("t-province")),1),t(I,{modelValue:o(l).province,"onUpdate:modelValue":a[15]||(a[15]=s=>o(l).province=s),items:g.value,loading:o(V).loading,disabled:!o(l).country||!Array.isArray(o(V).provincesbyCountry)},null,8,["modelValue","items","loading","disabled"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",ze,m(e.$t("t-postal-code")),1),t(r,{modelValue:o(l).postalCode,"onUpdate:modelValue":a[16]||(a[16]=s=>o(l).postalCode=s),placeholder:e.$t("t-enter-postal-code"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",qe,m(e.$t("t-email")),1),t(r,{modelValue:o(l).email,"onUpdate:modelValue":a[17]||(a[17]=s=>o(l).email=s),placeholder:e.$t("t-enter-email"),"hide-details":"",rules:v.email},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ye,m(e.$t("t-phone")),1),t(d,{modelValue:o(l).phone,"onUpdate:modelValue":a[18]||(a[18]=s=>o(l).phone=s),size:"sm",fetchCountry:"",placeholder:e.$t("t-enter-phone-number"),class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Le,m(e.$t("t-mobile")),1),t(d,{modelValue:o(l).mobile,"onUpdate:modelValue":a[19]||(a[19]=s=>o(l).mobile=s),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Je,m(e.$t("t-emergency-contact-name")),1),t(r,{modelValue:o(l).emergencyContactName,"onUpdate:modelValue":a[20]||(a[20]=s=>o(l).emergencyContactName=s),placeholder:e.$t("t-enter-phone-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ke,m(e.$t("t-emergency-contact-phone")),1),t(d,{modelValue:o(l).emergencyContactPhone,"onUpdate:modelValue":a[21]||(a[21]=s=>o(l).emergencyContactPhone=s),size:"sm",placeholder:e.$t("t-enter-phone-number"),fetchCountry:"",class:"custom-phone-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Qe,[b(m(e.$t("t-id-card-number"))+" ",1),He]),t(r,{modelValue:o(l).idCardNumber,"onUpdate:modelValue":a[22]||(a[22]=s=>o(l).idCardNumber=s),placeholder:e.$t("t-id-card-number"),rules:v.idCardNumber},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",We,[b(m(e.$t("t-id-card-issuer"))+" ",1),Xe]),t(r,{modelValue:o(l).idCardIssuer,"onUpdate:modelValue":a[23]||(a[23]=s=>o(l).idCardIssuer=s),placeholder:e.$t("t-enter-id-card-issuer"),rules:v.idCardIssuer},null,8,["modelValue","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",Ze,[b(m(e.$t("t-id-card-expiry-date"))+" ",1),et]),t(q,{modelValue:o(l).idCardExpiryDate,"onUpdate:modelValue":a[24]||(a[24]=s=>o(l).idCardExpiryDate=s),teleport:!0,rules:v.idCardExpiryDate,placeholder:e.$t("t-enter-id-card-expiry-date"),format:"dd/MM/yyyy"},null,8,["modelValue","rules","placeholder"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:n(()=>[t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",tt,[b(m(e.$t("t-id-card-issuance-date"))+" ",1),lt]),t(q,{modelValue:o(l).idCardIssuanceDate,"onUpdate:modelValue":a[25]||(a[25]=s=>o(l).idCardIssuanceDate=s),teleport:!0,rules:v.idCardIssuanceDate,placeholder:e.$t("t-enter-id-card-issuance-date"),format:"dd/MM/yyyy"},null,8,["modelValue","rules","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",at,m(e.$t("t-passport-number")),1),t(r,{modelValue:o(l).passportNumber,"onUpdate:modelValue":a[26]||(a[26]=s=>o(l).passportNumber=s),placeholder:e.$t("t-enter-passport-number"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"4"},{default:n(()=>[i("div",ot,m(e.$t("t-passport-issuer")),1),t(r,{modelValue:o(l).passportIssuer,"onUpdate:modelValue":a[27]||(a[27]=s=>o(l).passportIssuer=s),placeholder:e.$t("t-enter-passport-issuer"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(D,{class:""},{default:n(()=>[t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",st,m(e.$t("t-passport-issuance-date")),1),t(u,{modelValue:o(l).passportIssuanceDate,"onUpdate:modelValue":a[28]||(a[28]=s=>o(l).passportIssuanceDate=s),teleport:!0,placeholder:e.$t("t-enter-passport-issuance-date"),"enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue","placeholder"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",nt,m(e.$t("t-id-passport-expiry-date")),1),t(u,{modelValue:o(l).passportExpiryDate,"onUpdate:modelValue":a[29]||(a[29]=s=>o(l).passportExpiryDate=s),teleport:!0,placeholder:e.$t("t-enter-id-passport-expiry-date"),"enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),t(te,{class:"d-flex justify-space-between mt-3"},{default:n(()=>[t(A,{color:"secondary",variant:"outlined",class:"me-2",onClick:a[30]||(a[30]=s=>G()),disabled:e.loading},{default:n(()=>[b(m(e.$t("t-back"))+" ",1),dt]),_:1},8,["disabled"]),t(A,{color:"success",variant:"elevated",onClick:B,loading:e.loading},{default:n(()=>[b(m(e.$t("t-save-and-proceed"))+" ",1),rt]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const ut=X(it,[["__scopeId","data-v-607b1c27"]]),R=C=>(ae("data-v-299d4a78"),C=C(),oe(),C),mt={class:"font-weight-bold mb-2"},pt=R(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),ct={class:"font-weight-bold mb-2"},ft=R(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),vt={class:"font-weight-bold mb-2"},gt=R(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),yt={class:"font-weight-bold mb-2"},bt=R(()=>i("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),ht=R(()=>i("i",{class:"ph-arrow-left ms-2"},null,-1)),Vt=j({__name:"TabInstitution&Classification",props:{modelValue:{},loading:{type:Boolean}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:M}){const{t:c}=L();J();const S=ue(),y=se(),h=ne(),_=E(null),V=M,N=C;let l=P({get(){return N.modelValue},set(d){V("update:modelValue",d)}});const f=E(""),v={institution:[d=>!!d||c("t-please-select-institution")],department:[d=>!!d||c("t-please-select-department")],position:[d=>!!d||c("t-please-select-position")],salary:[d=>!!d||c("t-please-enter-salary"),d=>d>0||c("t-please-enter-a-valid-salary")]},w=P(()=>S.institutions.map(d=>({value:d.id,label:d.name}))),g=P(()=>y.departments.map(d=>({value:d.id,label:d.name}))),G=P(()=>h.positions.map(d=>({value:d.id,label:d.name})));K(async()=>{try{await S.fetchInstitutions()}catch(d){a("Falha ao carregar instituições",d)}}),Y(()=>l.value.company,d=>{d?(y.fetchDepartments(d),l.value.department=void 0,l.value.position=void 0):(y.departments=[],h.positions=[])}),Y(()=>l.value.department,d=>{d?(h.fetchPositions(d),l.value.position=void 0):h.positions=[]});const B=()=>{l.value.company&&y.pagination.currentPage<y.pagination.totalPages-1&&y.fetchDepartments(l.value.company,y.pagination.currentPage+1)},e=()=>{l.value.department&&h.pagination.currentPage<h.pagination.totalPages-1&&h.fetchPositions(l.value.department,h.pagination.currentPage+1)},a=(d,u)=>{console.error(d,u),f.value=d,setTimeout(()=>{f.value=""},5e3)},r=async()=>{if(!_.value)return;const{valid:d}=await _.value.validate();if(!d){f.value=c("t-please-correct-errors"),setTimeout(()=>{f.value=""},5e3);return}V("save")};return(d,u)=>{const F=O("TextField"),s=O("Card");return U(),T(ie,{ref_key:"form2",ref:_,onSubmit:le(r,["prevent"])},{default:n(()=>[t(s,{title:d.$t("t-institution-and-classification"),elevation:"0","title-class":"pb-0"},{default:n(()=>[t(Q,{name:"fade"},{default:n(()=>[f.value?(U(),T(H,{key:0,text:f.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:u[0]||(u[0]=$=>f.value=""),style:{cursor:"pointer"}},null,8,["text"])):x("",!0)]),_:1}),t(W,{class:"pt-0 mt-6"},{default:n(()=>[t(D,null,{default:n(()=>[t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",mt,[b(m(d.$t("t-institution"))+" ",1),pt]),t(I,{modelValue:o(l).company,"onUpdate:modelValue":u[1]||(u[1]=$=>o(l).company=$),items:w.value,loading:o(S).loading,placeholder:o(c)("t-select-institution"),clearable:"",rules:v.institution},null,8,["modelValue","items","loading","placeholder","rules"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",ct,[b(m(d.$t("t-department"))+" ",1),ft]),t(I,{modelValue:o(l).department,"onUpdate:modelValue":u[2]||(u[2]=$=>o(l).department=$),items:g.value,loading:o(y).loading,placeholder:o(c)("t-select-department"),disabled:!o(l).company,rules:v.department,onScrollEnd:B,clearable:""},null,8,["modelValue","items","loading","placeholder","disabled","rules"])]),_:1})]),_:1}),t(D,{class:"mt-n6"},{default:n(()=>[t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",vt,[b(m(d.$t("t-position"))+" ",1),gt]),t(I,{modelValue:o(l).position,"onUpdate:modelValue":u[3]||(u[3]=$=>o(l).position=$),items:G.value,loading:o(h).loading,rules:v.position,placeholder:o(c)("t-select-position"),disabled:!o(l).department,onScrollEnd:e,clearable:""},null,8,["modelValue","items","loading","rules","placeholder","disabled"])]),_:1}),t(p,{cols:"12",lg:"6"},{default:n(()=>[i("div",yt,[b(m(d.$t("t-base-salary"))+" ",1),bt]),t(F,{modelValue:o(l).salary,"onUpdate:modelValue":u[4]||(u[4]=$=>o(l).salary=$),modelModifiers:{number:!0},isRequired:"",placeholder:o(c)("t-enter-the-employee-base-salary"),rules:v.salary,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),t(te,{class:"d-flex justify-space-between mt-5"},{default:n(()=>[t(A,{color:"secondary",variant:"outlined",class:"me-2",onClick:u[5]||(u[5]=$=>V("onStepChange",1)),disabled:d.loading},{default:n(()=>[b(m(d.$t("t-back-to-general-info"))+" ",1),ht]),_:1},8,["disabled"]),t(A,{color:"success",variant:"elevated",onClick:r,loading:d.loading},{default:n(()=>[b(m(d.$t("t-save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const _t=X(Vt,[["__scopeId","data-v-299d4a78"]]),$t=j({__name:"index",props:{cardTitle:{type:String,default:""}},setup(C){re(),ue();const M=se(),c=ne(),{t:S}=L(),y=pe(),h=ee(),_=J(),V=de(),N=E(1),l=E(typeof y.params.id=="string"?y.params.id:Array.isArray(y.params.id)?y.params.id[0]:null),f=E(!1),v=E("");let w=null,g=ce({employeeNumber:"",firstName:"",middleName:"",lastName:"",gender:"",maritalStatus:void 0,birthDate:new Date().toISOString().split("T")[0],bloodGroup:"",placeOfBirth:"",nationality:"",incomeTaxNumber:null,socialSecurityNumber:null,address:"",country:void 0,province:void 0,postalCode:"",email:"",phone:"",mobile:"",emergencyContactName:"",emergencyContactPhone:"",idCardNumber:null,idCardIssuer:"",idCardExpiryDate:new Date().toISOString().split("T")[0],idCardIssuanceDate:new Date().toISOString().split("T")[0],passportNumber:null,passportIssuer:"",passportIssuanceDate:new Date().toISOString().split("T")[0],passportExpiryDate:new Date().toISOString().split("T")[0],enabled:!0,salary:null,company:void 0,department:void 0,position:void 0});const G=a=>{var d;w&&(clearTimeout(w),w=null);let r=S("t-error-saving-employee");(d=a==null?void 0:a.response)!=null&&d.data?(a.response.data.error&&(v.value=a.response.data.message,w=setTimeout(()=>{v.value="",w=null},5e3)),r=a.response.data.message||r):a.message&&(r=a.message),_.error(r),v.value=r,w=setTimeout(()=>{v.value="",w=null},5e3)};K(async()=>{var a,r,d,u,F;if(l.value)try{f.value=!0;const s=await z.getEmployeeById(l.value);if(!s.data)throw new Error("Dados do funcionário não disponíveis.");const $=s.data;Object.assign(g,$),g.country=(a=$.country)==null?void 0:a.id,g.province=(r=$.province)==null?void 0:r.id,g.company=(d=$.company)==null?void 0:d.id,g.department=(u=$.department)==null?void 0:u.id,g.position=(F=$.position)==null?void 0:F.id,g.company&&await M.fetchDepartments(g.company),g.department&&await c.fetchPositions(g.department)}catch(s){_.error(S("t-error-loading-employee")),console.error("Error loading employee:",s)}finally{f.value=!1}});const B=a=>{N.value=a},e=async(a=!1)=>{var r,d;try{f.value=!0,v.value="";let u;if(l.value)u=await z.updateEmployee(l.value,g);else if(u=await z.createEmployee(g),(r=u==null?void 0:u.data)!=null&&r.id)l.value=u.data.id;else throw new Error(((d=u==null?void 0:u.error)==null?void 0:d.message)||S("t-error-creating-employee"));_.success(l.value?S("t-employee-updated-success"):S("t-employee-created-success")),a?(await V.fetchEmployees(),h.push("/employee/list")):N.value++}catch(u){console.error("Error saving employee:",u),G(u)}finally{f.value=!1}};return fe(()=>{w&&(clearTimeout(w),w=null)}),(a,r)=>{const d=O("Card");return U(),T(d,null,{default:n(()=>[t(W,null,{default:n(()=>[t($e,{modelValue:N.value,"onUpdate:modelValue":r[0]||(r[0]=u=>N.value=u),class:"mb-2"},null,8,["modelValue"]),f.value?(U(),T(ve,{key:0,indeterminate:"",color:"primary",class:"mb-4"})):x("",!0),t(Q,{name:"fade"},{default:n(()=>[v.value?(U(),T(H,{key:0,text:v.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:r[1]||(r[1]=u=>v.value=""),style:{cursor:"pointer","white-space":"pre-line"}},null,8,["text"])):x("",!0)]),_:1}),N.value===1?(U(),T(ut,{key:1,onOnStepChange:B,modelValue:o(g),"onUpdate:modelValue":r[2]||(r[2]=u=>Z(g)?g.value=u:g=u),onSave:r[3]||(r[3]=u=>e(!1)),loading:f.value},null,8,["modelValue","loading"])):x("",!0),N.value===2?(U(),T(_t,{key:2,onOnStepChange:B,modelValue:o(g),"onUpdate:modelValue":r[4]||(r[4]=u=>Z(g)?g.value=u:g=u),onSave:r[5]||(r[5]=u=>e(!0)),loading:f.value},null,8,["modelValue","loading"])):x("",!0)]),_:1})]),_:1})}}});const It=X($t,[["__scopeId","data-v-ca21831a"]]);export{It as C};
