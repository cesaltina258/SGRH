import{d as k,B as O,b as d,e as D,w as l,V as I,x as e,C as j,D as S,f as g,E as B,G as $,n as L,g as u,H as E,i as a,I as c,F as V,J as G,K as J,L as K,l as v,c as P,M,N as W,O as X,Q as Y,R as Z,S as ee,T as te,U as se,W as le,X as ae}from"./index-96068b83.js";import{u as ne}from"./institutionStore-a77edb62.js";import{D as oe}from"./DataTableServer-2cbbaf48.js";import{_ as ie}from"./TableAction.vue_vue_type_script_setup_true_lang-c138a469.js";import{_ as re}from"./Status.vue_vue_type_script_setup_true_lang-2b6dfc24.js";const ue=[{title:"institutions",disabled:!1},{title:"list-view",disabled:!0}],T=[{title:"total-institution",endVal:8956,color:"primary",percent:"12.09%",isProgress:!0,icon:"ph-buildings"},{title:"total-active-institution",endVal:4519,color:"success",percent:"6.57%",isProgress:!0,icon:"ph-check"},{title:"total-inactive-institution",endVal:2648,color:"danger",percent:"4.07%",isProgress:!0,icon:"ph-x-circle"},{title:"new-institution-registed",endVal:871,color:"primary",percent:"3.49%",isProgress:!1,icon:"ph-clock"}],A=[{title:"institution-name",key:"employeeNumber",sortable:!0},{title:"institution-type",key:"firstName",sortable:!0},{title:"email",key:"phone",sortable:!0},{title:"phone-number",key:"email",sortable:!0},{title:"created-date",key:"email",sortable:!0},{title:"status",key:"email",sortable:!0},{title:"action",sortable:!1}],ce={class:"text-muted"},de={class:"mt-3"},me=k({__name:"Overview",setup(w){return(m,h)=>{const p=O("CountTo");return d(),D(I,null,{default:l(()=>[e($,{cols:"12",lg:"12"},{default:l(()=>[e(j,null,{default:l(()=>[e(S,{class:"d-flex pa-6"},{default:l(()=>[e(I,null,{default:l(()=>[(d(!0),g(V,null,B(u(T),(o,_)=>(d(),D($,{cols:"12",sm:"6",lg:"3",key:"invoice-list-"+_,class:L(["ps-10",_<u(T).length-1?"right-border":""])},{default:l(()=>[e(E,{color:o.color,density:"compact",variant:"outlined",class:"me-2"},{default:l(()=>[a("i",{class:L(o.icon)},null,2)]),_:2},1032,["color"]),a("span",ce,c(m.$t("t-"+o.title)),1),a("div",de,[e(p,{endVal:o.endVal,class:"text-h6 font-weight-bold me-4"},null,8,["endVal"])])]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),pe=a("i",{class:"ph-plus-circle"},null,-1),_e=["onClick"],fe=["colspan"],ve=a("i",{class:"ph-magnifying-glass",style:{"font-size":"30px"}},null,-1),ge={class:"text-subtitle-1 font-weight-bold mt-3"},he="name,description,address,phone,email,website,incomeTaxNumber",ye=k({__name:"Listing",setup(w){const{t:m}=G(),h=J(),p=K(),o=ne(),_=v(""),b=v(!1),x=v(null),C=v(!1),N=v(10),i=v([]),U=P(()=>o.loading),z=P(()=>o.pagination.totalElements);M(i,t=>{console.log("Instituicoes selecionadas:",t)},{deep:!0});const R=async({page:t,itemsPerPage:r,sortBy:s,search:n})=>{var y,f;await o.fetchInstitutionsforListing(t-1,r,((y=s[0])==null?void 0:y.key)||"createdAt",((f=s[0])==null?void 0:f.order)||"asc",he,n)},q=t=>{p.push(`/institution/view/${t}`)},F=t=>{x.value=t,b.value=!0},H=async()=>{if(x.value){C.value=!0;try{await Y.deleteEmployee(x.value),h.success(m("t-toast-message-deleted")),await o.fetchInstitutionsforListing(0,N.value)}catch{h.error(m("t-toast-message-deleted-error"))}finally{C.value=!1,b.value=!1}}},Q=t=>{i.value.findIndex(s=>s.id===t.id)===-1?i.value=[...i.value,t]:i.value=i.value.filter(s=>s.id!==t.id)};return(t,r)=>(d(),g(V,null,[e(W,{title:t.$t("t-institution-list"),class:"mt-7"},{"title-action":l(()=>[e(I,{justify:"end",align:"center","no-gutters":""},{default:l(()=>[e($,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(Z,{modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=s=>_.value=s),placeholder:t.$t("t-search-institution")},null,8,["modelValue","placeholder"])]),_:1}),e($,{cols:"12",sm:"6",md:"auto",class:"ms-sm-3 mt-sm-0 mt-2"},{default:l(()=>[e(ee,{color:"secondary",to:"/institution/create",block:""},{default:l(()=>[pe,te(" "+c(t.$t("t-add-institution")),1)]),_:1})]),_:1})]),_:1})]),default:l(()=>[e(S,null,{default:l(()=>[e(oe,{modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=s=>i.value=s),headers:u(A).map(s=>({...s,title:t.$t(`t-${s.title}`)})),items:u(o).institutions,"items-per-page":N.value,"total-items":z.value,loading:U.value,"search-query":_.value,onLoadItems:R,"item-value":"id","show-select":""},se({body:l(({items:s})=>[(d(!0),g(V,null,B(s,n=>{var y;return d(),g("tr",{key:n.id},[a("td",null,[e(le,{"model-value":i.value.some(f=>f.id===n.id),"onUpdate:modelValue":f=>Q(n),"hide-details":"",density:"compact"},null,8,["model-value","onUpdate:modelValue"])]),a("td",{class:"text-primary cursor-pointer",onClick:f=>q(n.id)},c(n.name||"N/A"),9,_e),a("td",null,c(((y=n.institutionType)==null?void 0:y.name)||"N/A"),1),a("td",null,c(n.email||"N/A"),1),a("td",null,c(n.phone||"N/A"),1),a("td",null,c(u(ae)(n.createdAt)||"N/A"),1),a("td",null,[e(re,{status:n.enable?"active":"unactive"},null,8,["status"])]),a("td",null,[e(ie,{onOnEdit:()=>u(p).push(`/institution/edit/${n.id}`),onOnDelete:()=>F(n.id)},null,8,["onOnEdit","onOnDelete"])])])}),128))]),_:2},[u(o).institutions.length===0?{name:"body",fn:l(()=>[a("tr",null,[a("td",{colspan:u(A).length,class:"text-center py-10"},[e(E,{size:"80",color:"primary",variant:"tonal"},{default:l(()=>[ve]),_:1}),a("div",ge,c(t.$t("t-search-not-found-message")),1)],8,fe)])]),key:"0"}:void 0]),1032,["modelValue","headers","items","items-per-page","total-items","loading","search-query"])]),_:1})]),_:1},8,["title"]),e(X,{modelValue:b.value,"onUpdate:modelValue":r[2]||(r[2]=s=>b.value=s),onOnConfirm:H,loading:C.value},null,8,["modelValue","loading"])],64))}}),Ve=k({__name:"index",setup(w){return(m,h)=>(d(),g(V,null,[e(me),e(ye,{class:"mt-5"})],64))}}),Ce=k({__name:"List",setup(w){return(m,h)=>{const p=O("Breadcrumb");return d(),g(V,null,[e(p,{title:"institution-list",items:u(ue)},null,8,["items"]),e(Ve)],64)}}});export{Ce as default};
