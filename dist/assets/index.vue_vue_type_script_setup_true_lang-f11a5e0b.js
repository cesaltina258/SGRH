import{d as B,c as P,b as S,f as z,x as e,w as t,G as w,O as D,Q as $,I as v,D as M,Z as he,$ as ye,J as Q,K as Z,L as W,l as I,m as ne,B as N,e as A,a0 as ee,a1 as H,h as E,C as R,i as d,g as p,a2 as Y,a3 as G,a4 as se,a5 as be,a6 as Ve,a7 as _e,N as ie,V as ue,a8 as $e,a9 as Ce,aa as K,ab as Ie,M as F,F as re,T as q,ac as de,s as le,Y as Te,ad as ke,ae as X,af as we,ag as De}from"./index-1db35709.js";import{u as te}from"./institutionStore-ddfd69e4.js";import{V as me}from"./VForm-e699bf82.js";import{s as ce,f as pe,c as ae,h as Se,a as xe,i as oe}from"./utils-8990985e.js";const Pe={class:"d-flex justify-space-between align-center"},Ue=B({__name:"ButtonNav",props:{modelValue:{type:Number,default:1},institutionId:{type:[String],default:null},basicDataValidated:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(C,{emit:k}){const i=k,u=C,g=P({get(){return u.modelValue},set(n){i("update:modelValue",n)}}),y=n=>u.institutionId?!1:n>1&&!u.basicDataValidated;return(n,a)=>(S(),z("div",Pe,[e(M,{"no-gutters":""},{default:t(()=>[e(w,{cols:"3"},{default:t(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===1?"elevated":"tonal",onClick:a[0]||(a[0]=f=>g.value=1),disabled:y(1)},{default:t(()=>[$(v(n.$t("t-general-information")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(w,{cols:"3"},{default:t(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===2?"elevated":"tonal",onClick:a[1]||(a[1]=f=>g.value=2),disabled:y(2)},{default:t(()=>[$(v(n.$t("t-health-plan")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(w,{cols:"3"},{default:t(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===3?"elevated":"tonal",onClick:a[2]||(a[2]=f=>g.value=3),disabled:y(3)},{default:t(()=>[$(v(n.$t("t-organizational-structure")),1)]),_:1},8,["variant","disabled"])]),_:1}),e(w,{cols:"3"},{default:t(()=>[e(D,{rounded:"0",color:"primary",block:"",variant:g.value===4?"elevated":"tonal",onClick:a[3]||(a[3]=f=>g.value=4),disabled:y(4)},{default:t(()=>[$(v(n.$t("t-contact")),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]))}}),Ae=he("institutiontypes",{state:()=>({institutiontypes:[],pagination:{totalElements:0,currentPage:0,itemsPerPage:10,totalPages:0},loading:!1,error:null,draftInstitutionType:null,currentInstitutionTypeId:null}),actions:{async fetchInstitutionTypes(C,k,i="createdAt",u="asc",g,y){this.loading=!0,this.error=null;const n=C??this.pagination.currentPage,a=k??this.pagination.itemsPerPage;try{const{content:f,meta:b}=await ye.getInstitutionTypes(n,a,i,u,g,y);this.institutiontypes=f,this.pagination={totalElements:b.totalElements,currentPage:b.page,itemsPerPage:b.size,totalPages:b.totalPages||Math.ceil(b.totalElements/b.size)},console.log("ðŸ›ï¸ Tipos de InstituiÃ§Ãµes:",this.institutiontypes),console.log("ðŸ“Š Meta:",this.pagination)}catch(f){this.error=f.message||"Erro ao buscar os tipos de instituiÃ§Ãµes",this.institutiontypes=[],this.pagination.totalElements=0,console.error("âŒ Erro ao buscar institution types:",f)}finally{this.loading=!1}},setDraftInstitutionType(C){this.draftInstitutionType=C,localStorage.setItem("draftInstitutionType",JSON.stringify(C)),console.log("ðŸ“‹ Draft salvo:",this.draftInstitutionType)},setCurrentInstitutionTypeId(C){this.currentInstitutionTypeId=C,localStorage.setItem("currentInstitutionTypeId",C),console.log("ðŸ†” ID atual salvo:",this.currentInstitutionTypeId)},clearDraft(){this.draftInstitutionType=null,this.currentInstitutionTypeId=null,localStorage.removeItem("draftInstitutionType"),localStorage.removeItem("currentInstitutionTypeId"),console.log("ðŸ§¹ Draft e ID atual limpos")},loadFromStorage(){const C=localStorage.getItem("draftInstitutionType"),k=localStorage.getItem("currentInstitutionTypeId");C&&(this.draftInstitutionType=JSON.parse(C)),k&&(this.currentInstitutionTypeId=k),console.log("ðŸ“¦ Carregado do armazenamento:",this.draftInstitutionType,this.currentInstitutionTypeId)}}}),j=C=>(be("data-v-3fb94034"),C=C(),Ve(),C),Le={class:"font-weight-bold mb-2 mt-5"},Ne=j(()=>d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Oe={class:"font-weight-bold mb-2"},Ee=j(()=>d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Me=j(()=>d("div",{class:"font-weight-bold mb-2"},[$(" NUIT "),d("i",{class:"ph-asterisk ph-xs text-danger"})],-1)),Fe={class:"font-weight-bold mb-2"},Be=j(()=>d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),qe={class:"font-weight-bold mb-2"},je=j(()=>d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Re={class:"font-weight-bold mb-2"},ze=j(()=>d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1)),Ye={class:"font-weight-bold mb-2"},Ge={class:"font-weight-bold mb-2"},He=j(()=>d("i",{class:"ph-arrow-left ms-2"},null,-1)),Je=j(()=>d("i",{class:"ph-arrow-right ms-2"},null,-1)),Xe=B({__name:"TabGeneralInfo",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:k}){const{t:i}=Q(),u=Z(),g=W(),y=k,n=C,a=te(),f=Ae(),b=I(null);let m=P({get(){return n.modelValue},set(o){y("update:modelValue",o)}});const _=I(""),s={name:[o=>!!o||i("t-please-enter-institution-name")],institutionType:[o=>!!o||i("t-please-enter-institution-type")],incomeTaxNumber:[o=>!!o||i("t-please-enter-income-tax-number"),o=>o&&o.length==9||i("t-lenght-must-be-9")],address:[o=>!!o||i("t-please-enter-address")],phone:[o=>!!o||i("t-please-enter-phone-number"),o=>/^[0-9+() -]*$/.test(o)||i("t-invalid-phone-numebr")],email:[o=>!!o||i("t-please-enter-email-address"),o=>/.+@.+\..+/.test(o)||i("t-invalid-email")]},l=P(()=>f.institutiontypes.map(o=>({value:o.id,label:o.name})));ne(async()=>{try{await f.fetchInstitutionTypes()}catch(o){console.error("Failed to load tipos de instituicao:",o),_.value="Falha ao carregar  tipos de instituicao",setTimeout(()=>{_.value=""},5e3)}});const r=()=>{a.clearDraft(),g.push("/institution/list")},x=async()=>{if(!b.value)return;const{valid:o}=await b.value.validate();if(!o){u.error(i("t-validation-error")),_.value=i("t-please-correct-errors"),setTimeout(()=>{_.value=""},5e3);return}y("onStepChange",2)};return(o,c)=>{const h=N("TextField"),O=N("TextArea"),T=N("Card");return S(),A(me,{ref_key:"form",ref:b,onSubmit:se(x,["prevent"])},{default:t(()=>[e(T,{title:o.$t("t-general-information"),elevation:"0","title-class":"pb-0"},{default:t(()=>[e(ee,{name:"fade"},{default:t(()=>[_.value?(S(),A(H,{key:0,text:_.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:c[0]||(c[0]=V=>_.value=""),style:{cursor:"pointer"}},null,8,["text"])):E("",!0)]),_:1}),e(R,{class:"pt-0"},{default:t(()=>[d("div",Le,[$(v(o.$t("t-institution-name"))+" ",1),Ne]),e(h,{modelValue:p(m).name,"onUpdate:modelValue":c[1]||(c[1]=V=>p(m).name=V),placeholder:o.$t("t-enter-institution-name"),rules:s.name},null,8,["modelValue","placeholder","rules"]),e(M,{class:""},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",Oe,[$(v(o.$t("t-institution-type"))+" ",1),Ee]),e(Y,{modelValue:p(m).institutionType,"onUpdate:modelValue":c[2]||(c[2]=V=>p(m).institutionType=V),items:l.value,loading:p(f).loading,rules:s.institutionType},null,8,["modelValue","items","loading","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[Me,e(h,{modelValue:p(m).incomeTaxNumber,"onUpdate:modelValue":c[3]||(c[3]=V=>p(m).incomeTaxNumber=V),placeholder:o.$t("t-enter-nuit"),rules:s.incomeTaxNumber},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(M,{class:"mt-n6"},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",Fe,[$(v(o.$t("t-address"))+" ",1),Be]),e(h,{modelValue:p(m).address,"onUpdate:modelValue":c[4]||(c[4]=V=>p(m).address=V),placeholder:o.$t("t-enter-address"),rules:s.address},null,8,["modelValue","placeholder","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",qe,[$(v(o.$t("t-phone-number"))+" ",1),je]),e(h,{modelValue:p(m).phone,"onUpdate:modelValue":c[5]||(c[5]=V=>p(m).phone=V),placeholder:o.$t("t-enter-phone-number"),rules:s.phone},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(M,{class:"mt-n6"},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",Re,[$(v(o.$t("t-email"))+" ",1),ze]),e(h,{modelValue:p(m).email,"onUpdate:modelValue":c[6]||(c[6]=V=>p(m).email=V),placeholder:o.$t("t-enter-email-address"),rules:s.email},null,8,["modelValue","placeholder","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",Ye,v(o.$t("t-website")),1),e(h,{modelValue:p(m).website,"onUpdate:modelValue":c[7]||(c[7]=V=>p(m).website=V),placeholder:o.$t("t-enter-website"),"hide-details":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(M,{class:"mt-n6"},{default:t(()=>[e(w,{cols:"12",lg:"12"},{default:t(()=>[d("div",Ge,v(o.$t("t-description")),1),e(O,{modelValue:p(m).description,"onUpdate:modelValue":c[8]||(c[8]=V=>p(m).description=V),placeholder:o.$t("t-enter-description")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(G,{class:"d-flex justify-space-between mt-3"},{default:t(()=>[e(D,{color:"secondary",variant:"outlined",class:"me-2",onClick:c[9]||(c[9]=V=>r())},{default:t(()=>[$(v(o.$t("t-back"))+" ",1),He]),_:1}),e(D,{color:"success",variant:"elevated",onClick:x,loading:C.loading},{default:t(()=>[$(v(o.$t("t-proceed"))+" ",1),Je]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}});const Ke=_e(Xe,[["__scopeId","data-v-3fb94034"]]),Qe=d("i",{class:"ph-funnel me-1"},null,-1),Ze={class:"font-weight-bold"},We=B({__name:"ContactFilters",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(C,{emit:k}){const i=k,u=C,g=P({get(){return u.modelValue.query||""},set(a){i("update:modelValue",{...u.modelValue,query:a})}}),y=P({get(){return u.modelValue.status||""},set(a){i("update:modelValue",{...u.modelValue,status:a})}}),n=P({get(){return u.modelValue.date||""},set(a){i("update:modelValue",{...u.modelValue,date:a})}});return(a,f)=>{const b=N("VueDatePicker");return S(),A(ue,null,{default:t(()=>[e(R,null,{default:t(()=>[e(M,null,{default:t(()=>[e(w,{cols:"12",lg:"4"},{default:t(()=>[e(ie,{modelValue:g.value,"onUpdate:modelValue":f[0]||(f[0]=m=>g.value=m),placeholder:a.$t("t-search-for-contact")},null,8,["modelValue","placeholder"])]),_:1}),e(w,{cols:"12",sm:"6",lg:"lg"},{default:t(()=>[e(Y,{modelValue:y.value,"onUpdate:modelValue":f[1]||(f[1]=m=>y.value=m),items:p(ce),placeholder:a.$t("t-select-status")},null,8,["modelValue","items","placeholder"])]),_:1}),e(w,{cols:"12",sm:"6",lg:"lg"},{default:t(()=>[e(b,{modelValue:n.value,"onUpdate:modelValue":f[2]||(f[2]=m=>n.value=m),teleport:!0,placeholder:a.$t("t-select-date"),"month-change-on-scroll":!1,"enable-time-picker":!1},null,8,["modelValue","placeholder"])]),_:1}),e(w,{cols:"12",lg:"2"},{default:t(()=>[e(D,{variant:"tonal",class:"",color:"primary",block:""},{default:t(()=>[Qe,d("span",Ze,v(a.$t("t-filter")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),et={class:"font-weight-bold mb-2"},tt={class:"font-weight-bold mb-2"},lt={class:"font-weight-bold mb-2"},at={class:"font-weight-bold mb-2"},ot={class:"font-weight-bold mb-2"},fe=B({__name:"CreateEditContactDialog",props:{modelValue:{type:Boolean,default:!1},customerDetail:{type:Object,default:()=>{}}},emits:["update:modelValue","onConfirm"],setup(C,{emit:k}){var r,x,o,c,h,O,T;const i=k,u=C,g=((r=u.customerDetail)==null?void 0:r.id)===-1,y=I(((x=u.customerDetail)==null?void 0:x.name)||""),n=I(((o=u.customerDetail)==null?void 0:o.email)||""),a=I(((c=u.customerDetail)==null?void 0:c.phone)||""),f=(h=u.customerDetail)!=null&&h.create_date?I(new Date((O=u.customerDetail)==null?void 0:O.create_date)):I(new Date),b=I(((T=u.customerDetail)==null?void 0:T.status)||""),m=I(u.customerDetail.img?[u.customerDetail.img]:[]),_=I(""),s=P({get(){return u.modelValue},set(V){i("update:modelValue",V)}}),l=()=>{if(y.value?n.value?a.value?f.value?b.value||(_.value="Select status"):_.value="Select date":_.value="Enter contact number":_.value="Enter Email":_.value="Enter customer name",setTimeout(()=>{_.value=""},3e3),!y.value||!n.value||!a.value||!f.value||!b.value)return;const V={...u.customerDetail,name:y.value,email:n.value,phone:a.value,create_date:f.value,status:b.value,img:m.value[0]};i("onConfirm",V)};return(V,U)=>{const J=N("TextField"),ve=N("VueDatePicker"),ge=N("Card");return S(),A(Ie,{modelValue:s.value,"onUpdate:modelValue":U[7]||(U[7]=L=>s.value=L),width:"600",persistent:"",scrollable:""},{default:t(()=>[e(ge,{title:g?V.$t("t-add-contact"):V.$t("t-edit-contact"),"title-class":"bg-light"},{"title-action":t(()=>[e(D,{icon:"ph-x",variant:"plain",density:"compact",onClick:U[0]||(U[0]=L=>s.value=!1)})]),default:t(()=>[e(R,{"data-simplebar":"",style:{"max-height":"calc(100vh - 400px)"}},{default:t(()=>[$e(e(H,{text:_.value,variant:"tonal",color:"danger",density:"compact",class:"mb-3"},null,8,["text"]),[[Ce,_.value]]),d("div",et,v(V.$t("t-name")),1),e(J,{modelValue:y.value,"onUpdate:modelValue":U[1]||(U[1]=L=>y.value=L),placeholder:V.$t("t-enter-name")},null,8,["modelValue","placeholder"]),d("div",tt,v(V.$t("t-email")),1),e(J,{modelValue:n.value,"onUpdate:modelValue":U[2]||(U[2]=L=>n.value=L),placeholder:V.$t("t-enter-email-address")},null,8,["modelValue","placeholder"]),d("div",lt,v(V.$t("t-phone-number")),1),e(J,{modelValue:a.value,"onUpdate:modelValue":U[3]||(U[3]=L=>a.value=L),placeholder:V.$t("t-enter-phone-number")},null,8,["modelValue","placeholder"]),d("div",at,v(V.$t("t-created-date")),1),e(ve,{modelValue:p(f),"onUpdate:modelValue":U[4]||(U[4]=L=>K(f)?f.value=L:null),class:"mb-4",teleport:!0,"enable-time-picker":!1,clearable:!1},null,8,["modelValue"]),d("div",ot,v(V.$t("t-status")),1),e(Y,{modelValue:b.value,"onUpdate:modelValue":U[5]||(U[5]=L=>b.value=L),items:p(ce)},null,8,["modelValue","items"])]),_:1}),e(G,{class:"d-flex justify-end px-5 pb-3"},{default:t(()=>[e(D,{class:"",color:"light",elevation:"0",variant:"elevated",onClick:U[6]||(U[6]=L=>s.value=!1)},{default:t(()=>[$(v(V.$t("t-cancel")),1)]),_:1}),e(D,{class:"",color:"success",elevation:"0",variant:"elevated",onClick:l},{default:t(()=>[$(v(V.$t("t-save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),nt=d("i",{class:"ph-plus-circle me-1"},null,-1),st=d("i",{class:"ph-download-simple me-1"},null,-1),it=d("i",{class:"ph-upload-simple me-1"},null,-1),ut=d("i",{class:"ph-arrow-left me-2"},null,-1),rt=d("i",{class:"ph-arrow-right ms-2"},null,-1),dt=B({__name:"TabContacts",emits:["onStepChange"],setup(C,{emit:k}){const i=k,u=I(pe);I(ae[0]);const g=I(!1),y=I(null),n=I(ae),a=I(n.value);F(g,l=>{l||(y.value=null)});const f=P(()=>u.value.query);F(f,l=>{n.value=a.value.filter(r=>{const x=l.toLowerCase();if(r.name.toLowerCase().includes(x))return r})});const b=P(()=>u.value.date);F(b,l=>{l?n.value=a.value.filter(r=>q(r.create_date)===q(l)):n.value=a.value});const m=P(()=>u.value.status);F(m,l=>{l?n.value=a.value.filter(r=>r.status===l):n.value=a.value});const _=()=>{y.value={id:-1,name:"",email:"",phone:"",create_date:new Date().toString(),status:""},g.value=!0},s=l=>{l.id===-1?n.value.unshift({...l,id:de(),create_date:q(l.create_date)}):n.value=n.value.map(r=>r.id===l.id?{...r,...l,create_date:q(l.create_date)}:r),g.value=!1};return(l,r)=>{const x=N("Card");return S(),z(re,null,[e(x,{title:l.$t("t-contact-person-list"),"title-class":"py-5"},{"title-action":t(()=>[d("div",null,[e(D,{color:"primary",class:"mx-1",onClick:_},{default:t(()=>[nt,$(" "+v(l.$t("t-add-contact-person")),1)]),_:1}),e(D,{color:"secondary",class:"mx-1"},{default:t(()=>[st,$(" "+v(l.$t("t-import")),1)]),_:1}),e(D,{color:"info",class:"mx-1",variant:"tonal"},{default:t(()=>[it,$(" "+v(l.$t("t-export")),1)]),_:1})])]),_:1},8,["title"]),e(M,{class:"mt-5"},{default:t(()=>[e(w,{cols:"12",lg:"12"},{default:t(()=>[e(We,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o)},null,8,["modelValue"])]),_:1})]),_:1}),y.value?(S(),A(fe,{key:0,modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=o=>g.value=o),customerDetail:y.value,onOnConfirm:s},null,8,["modelValue","customerDetail"])):E("",!0),e(G,{class:"d-flex justify-space-between mt-5"},{default:t(()=>[e(D,{color:"primary",variant:"text",onClick:r[2]||(r[2]=o=>i("onStepChange",1))},{default:t(()=>[ut,$(" "+v(l.$t("t-back-to-general-info")),1)]),_:1}),e(D,{color:"success",variant:"elevated",onClick:r[3]||(r[3]=o=>i("onStepChange",3))},{default:t(()=>[$(v(l.$t("t-save-and-proceed"))+" ",1),rt]),_:1})]),_:1})],64)}}}),mt={class:"font-weight-bold mb-2"},ct=d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),pt={class:"font-weight-bold mb-2"},ft=d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),vt={class:"font-weight-bold mb-2"},gt=d("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),ht={class:"font-weight-bold mb-2"},yt={key:0,class:"ph-asterisk ph-xs text-danger"},bt={class:"font-weight-bold mb-2"},Vt={key:0,class:"ph-asterisk ph-xs text-danger"},_t={class:"font-weight-bold mb-2"},$t=d("i",{class:"ph-arrow-left me-2"},null,-1),Ct=d("i",{class:"ph-arrow-right ms-2"},null,-1),It=B({__name:"TabHealthPlan",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1},enabled:{type:Boolean,default:!1}},emits:["onStepChange","save","update:modelValue"],setup(C,{emit:k}){const{t:i}=Q(),u=Z();W();const g=k,y=C;te();const n=I(null);let a=P({get(){return y.modelValue},set(s){g("update:modelValue",s)}});const f=I(""),b=P({get:()=>a.value.healthPlanLimit,set:s=>{a.value.healthPlanLimit=s,le(()=>{var l;(l=n.value)==null||l.validate()})}});F(b,()=>{a.value.healthPlanLimit!=="FIXED_AMOUNT"&&(a.value.fixedAmount=null),a.value.healthPlanLimit!=="ANUAL_SALARY"&&(a.value.salaryComponent=void 0,a.value.companyContributionPercentage=null),le(()=>{var s;(s=n.value)==null||s.validate()})});const m={maxNumberOfDependents:[s=>!!s||i("t-please-enter-max-dependents"),s=>s&&s>=0||i("t-min-zero-dependents")],childrenMaxAge:[s=>!!s||i("t-please-enter-max-age"),s=>s&&s>=0||i("t-min-zero-age")],healthPlanLimit:[s=>!!s||i("t-please-select-plan-limit")],fixedAmount:[s=>a.value.healthPlanLimit!=="FIXED_AMOUNT"||!!s||i("t-please-enter-fixed-amount")],salaryComponent:[s=>a.value.healthPlanLimit!=="ANUAL_SALARY"||!!s||i("t-please-select-salary-component")],companyContributionPercentage:[s=>a.value.healthPlanLimit!=="ANUAL_SALARY"||!!s||i("t-please-enter-company-contribution-percentage")]},_=async()=>{if(!n.value)return;const{valid:s}=await n.value.validate();if(!s){u.error(i("t-validation-error")),f.value=i("t-please-correct-errors"),setTimeout(()=>{f.value=""},5e3);return}g("save",!1)};return(s,l)=>{const r=N("TextField"),x=N("Card");return S(),A(me,{ref_key:"form1",ref:n,onSubmit:se(_,["prevent"])},{default:t(()=>[e(x,{title:s.$t("t-health-plan"),elevation:"0","title-class":"pb-0"},{default:t(()=>[e(ee,{name:"fade"},{default:t(()=>[f.value?(S(),A(H,{key:0,text:f.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:l[0]||(l[0]=o=>f.value=""),style:{cursor:"pointer"}},null,8,["text"])):E("",!0)]),_:1}),e(R,{class:"pt-0 mt-3"},{default:t(()=>[e(M,{class:"mt-3"},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",mt,[$(v(s.$t("t-maximum-number-of-dependents")),1),ct]),e(r,{modelValue:p(a).maxNumberOfDependents,"onUpdate:modelValue":l[1]||(l[1]=o=>p(a).maxNumberOfDependents=o),modelModifiers:{number:!0},placeholder:p(i)("t-enter-maximum-number-of-dependents"),rules:m.maxNumberOfDependents,type:"number",class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",pt,[$(v(s.$t("t-maximum-age-of-dependents"))+" ",1),ft]),e(r,{modelValue:p(a).childrenMaxAge,"onUpdate:modelValue":l[2]||(l[2]=o=>p(a).childrenMaxAge=o),modelModifiers:{number:!0},placeholder:p(i)("t-enter-maximum-age-of-dependents"),type:"number",rules:m.childrenMaxAge,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(M,{class:"mt-n6"},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",vt,[$(v(s.$t("t-health-plan-limit")),1),gt]),e(Y,{modelValue:p(a).healthPlanLimit,"onUpdate:modelValue":l[3]||(l[3]=o=>p(a).healthPlanLimit=o),items:p(Se),rules:m.healthPlanLimit},null,8,["modelValue","items","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",ht,[$(v(s.$t("t-fixed-amount"))+" ",1),p(a).healthPlanLimit==="FIXED_AMOUNT"?(S(),z("i",yt)):E("",!0)]),e(r,{modelValue:p(a).fixedAmount,"onUpdate:modelValue":l[4]||(l[4]=o=>p(a).fixedAmount=o),modelModifiers:{number:!0},type:"number",placeholder:p(i)("t-enter-fixed-amount"),rules:m.fixedAmount,class:"mb-2"},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1}),e(M,{class:"mt-n5"},{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",bt,[$(v(s.$t("t-salary-component"))+" ",1),p(a).healthPlanLimit==="ANUAL_SALARY"?(S(),z("i",Vt)):E("",!0)]),e(Y,{modelValue:p(a).salaryComponent,"onUpdate:modelValue":l[5]||(l[5]=o=>p(a).salaryComponent=o),items:p(xe),rules:m.salaryComponent},null,8,["modelValue","items","rules"])]),_:1}),e(w,{cols:"12",lg:"6"},{default:t(()=>[d("div",_t,v(s.$t("t-company-contribuition-percentage")),1),e(r,{modelValue:p(a).companyContributionPercentage,"onUpdate:modelValue":l[6]||(l[6]=o=>p(a).companyContributionPercentage=o),placeholder:p(i)("t-enter-company-contribuition-percentage"),type:"number",class:"mb-2",rules:m.companyContributionPercentage},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),e(G,{class:"d-flex justify-space-between mt-5"},{default:t(()=>[e(D,{color:"primary",variant:"text",onClick:l[7]||(l[7]=o=>g("onStepChange",1))},{default:t(()=>[$t,$(" "+v(s.$t("t-back-to-general-info")),1)]),_:1}),e(D,{color:"success",variant:"elevated",onClick:_},{default:t(()=>[$(v(s.$t("t-save-and-proceed"))+" ",1),Ct]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["onSubmit"])}}}),Tt=d("i",{class:"ph-funnel me-1"},null,-1),kt={class:"font-weight-bold"},wt=B({__name:"HistoryFilters",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(C,{emit:k}){const i=k,u=C,g=P({get(){return u.modelValue.query||""},set(n){i("update:modelValue",{...u.modelValue,query:n})}});P({get(){return u.modelValue.status||""},set(n){i("update:modelValue",{...u.modelValue,status:n})}});const y=P({get(){return u.modelValue.date||""},set(n){i("update:modelValue",{...u.modelValue,date:n})}});return(n,a)=>{const f=N("VueDatePicker");return S(),A(ue,null,{default:t(()=>[e(R,null,{default:t(()=>[e(M,null,{default:t(()=>[e(w,{cols:"12",lg:"6"},{default:t(()=>[e(ie,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=b=>g.value=b),placeholder:n.$t("t-search-for-interaction")},null,8,["modelValue","placeholder"])]),_:1}),e(w,{cols:"12",sm:"12",lg:"lg"},{default:t(()=>[e(f,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=b=>y.value=b),teleport:!0,placeholder:n.$t("t-select-date"),"month-change-on-scroll":!1,"enable-time-picker":!1},null,8,["modelValue","placeholder"])]),_:1}),e(w,{cols:"12",lg:"2"},{default:t(()=>[e(D,{variant:"tonal",class:"",color:"primary",block:""},{default:t(()=>[Tt,d("span",kt,v(n.$t("t-filter")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Dt=d("i",{class:"ph-plus-circle me-1"},null,-1),St=d("i",{class:"ph-download-simple me-1"},null,-1),xt=d("i",{class:"ph-upload-simple me-1"},null,-1),Pt=d("i",{class:"ph-arrow-left me-2"},null,-1),Ut=B({__name:"TabOrganizationalStructure",emits:["onStepChange"],setup(C,{emit:k}){const i=k,u=I(pe);I(oe[0]);const g=I(!1),y=I(null),n=I(oe),a=I(n.value);F(g,l=>{l||(y.value=null)});const f=P(()=>u.value.query);F(f,l=>{n.value=a.value.filter(r=>{const x=l.toLowerCase();if(r.name.toLowerCase().includes(x))return r})});const b=P(()=>u.value.date);F(b,l=>{l?n.value=a.value.filter(r=>q(r.create_date)===q(l)):n.value=a.value});const m=P(()=>u.value.status);F(m,l=>{l?n.value=a.value.filter(r=>r.status===l):n.value=a.value});const _=()=>{y.value={id:-1,name:"",email:"",create_date:new Date().toString(),status:""},g.value=!0},s=l=>{l.id===-1?n.value.unshift({...l,id:de(),create_date:q(l.create_date)}):n.value=n.value.map(r=>r.id===l.id?{...r,...l,create_date:q(l.create_date)}:r),g.value=!1};return(l,r)=>{const x=N("Card");return S(),z(re,null,[e(x,{title:l.$t("t-interaction-history"),"title-class":"py-5"},{"title-action":t(()=>[d("div",null,[e(D,{color:"primary",class:"mx-1",onClick:_},{default:t(()=>[Dt,$(" "+v(l.$t("t-add-interaction")),1)]),_:1}),e(D,{color:"secondary",class:"mx-1"},{default:t(()=>[St,$(" "+v(l.$t("t-import")),1)]),_:1}),e(D,{color:"info",class:"mx-1",variant:"tonal"},{default:t(()=>[xt,$(" "+v(l.$t("t-export")),1)]),_:1})])]),_:1},8,["title"]),e(M,{class:"mt-5"},{default:t(()=>[e(w,{cols:"12",lg:"12"},{default:t(()=>[e(wt,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o)},null,8,["modelValue"])]),_:1})]),_:1}),y.value?(S(),A(fe,{key:0,modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=o=>g.value=o),customerDetail:y.value,onOnConfirm:s},null,8,["modelValue","customerDetail"])):E("",!0),e(G,{class:"d-flex justify-space-between"},{default:t(()=>[e(D,{color:"primary",variant:"text",onClick:r[2]||(r[2]=o=>i("onStepChange",1))},{default:t(()=>[Pt,$(" "+v(l.$t("t-back-to-health-plan")),1)]),_:1}),e(D,{color:"success",variant:"elevated"},{default:t(()=>[$(v(l.$t("t-save")),1)]),_:1})]),_:1})],64)}}}),Et=B({__name:"index",setup(C){const k=te(),{t:i}=Q(),u=Te(),g=W(),y=Z(),n=I(1),a=I(typeof u.params.id=="string"?u.params.id:Array.isArray(u.params.id)?u.params.id[0]:null),f=I(!a.value),b=I(!1),m=I("");let _=null;const s=I(!1);let l=ke({name:"",address:"",phone:"",email:"",website:null,description:null,incomeTaxNumber:"",institutionType:void 0,maxNumberOfDependents:null,childrenMaxAge:null,healthPlanLimit:"",fixedAmount:null,salaryComponent:void 0,companyContributionPercentage:null});const r=c=>{var O;_&&(clearTimeout(_),_=null);let h=i("t-error-saving-employee");(O=c==null?void 0:c.response)!=null&&O.data?(c.response.data.error&&(m.value=c.response.data.message,_=setTimeout(()=>{m.value="",_=null},5e3)),h=c.response.data.message||h):c.message&&(h=c.message),y.error(h),m.value=h,_=setTimeout(()=>{m.value="",_=null},5e3)};ne(async()=>{var c;if(k.loadFromStorage(),k.currentInstitutionId&&(a.value=k.currentInstitutionId,s.value=!0),a.value)try{b.value=!0;const h=await X.getInstitutionById(a.value);h&&h.data&&(Object.assign(l,h.data),l.institutionType=((c=h.data.institutionType)==null?void 0:c.id)||void 0)}catch(h){y.error(i("t-error-loading-institution")),console.error("Error loading institution:",h)}finally{b.value=!1}});const x=c=>{if(c<n.value){n.value=c;return}if(a.value||s.value){n.value=c;return}c===n.value+1&&(n.value=c)},o=async(c=!1)=>{var h,O;try{b.value=!0,m.value="";let T;if(a.value)T=await X.updateInstitution(a.value,l);else if(T=await X.createInstitution(l),(h=T==null?void 0:T.data)!=null&&h.id)a.value=T.data.id,k.setCurrentInstitutionId(T.data.id),s.value=!0;else throw new Error(((O=T==null?void 0:T.error)==null?void 0:O.message)||i("t-error-creating-employee"));k.setDraftInstitution(l),y.success(f.value?i("t-institution-created-success"):i("t-institution-updated-success")),c?(await k.fetchInstitutions(),g.push("/institution/list")):n.value++}catch(T){console.error("Error saving institution:",T),r(T)}finally{b.value=!1}};return we(()=>{_&&(clearTimeout(_),_=null)}),(c,h)=>{const O=N("Card");return S(),A(O,{title:""},{default:t(()=>[e(R,null,{default:t(()=>[e(Ue,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=T=>n.value=T),class:"mb-2","institution-id":a.value,"basic-data-validated":s.value},null,8,["modelValue","institution-id","basic-data-validated"]),b.value?(S(),A(De,{key:0,indeterminate:"",color:"primary",class:"mb-4"})):E("",!0),e(ee,{name:"fade"},{default:t(()=>[m.value?(S(),A(H,{key:0,text:m.value,type:"error",class:"mb-4 mx-5 mt-3",variant:"tonal",color:"danger",density:"compact",onClick:h[1]||(h[1]=T=>m.value=""),style:{cursor:"pointer","white-space":"pre-line"}},null,8,["text"])):E("",!0)]),_:1}),n.value===1?(S(),A(Ke,{key:1,onOnStepChange:x,modelValue:p(l),"onUpdate:modelValue":h[2]||(h[2]=T=>K(l)?l.value=T:l=T),onSave:h[3]||(h[3]=T=>o(!1)),loading:b.value},null,8,["modelValue","loading"])):E("",!0),n.value===2?(S(),A(It,{key:2,onOnStepChange:x,modelValue:p(l),"onUpdate:modelValue":h[4]||(h[4]=T=>K(l)?l.value=T:l=T),onSave:h[5]||(h[5]=T=>o(!1)),loading:b.value},null,8,["modelValue","loading"])):E("",!0),n.value===3?(S(),A(Ut,{key:3,onOnStepChange:x})):E("",!0),n.value===4?(S(),A(dt,{key:4,onOnStepChange:x})):E("",!0)]),_:1})]),_:1})}}});export{Et as _};
