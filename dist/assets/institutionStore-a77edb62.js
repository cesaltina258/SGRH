import{Z as g,ae as c}from"./index-96068b83.js";const I=g("institutions",{state:()=>({institutions:[],pagination:{totalElements:0,currentPage:0,itemsPerPage:1e7,totalPages:0},loading:!1,error:null,draftInstitution:null,currentInstitutionId:null}),actions:{async fetchInstitutions(i,n,e="createdAt",a="asc",o,r){this.loading=!0,this.error=null;const l=i??this.pagination.currentPage,u=n??this.pagination.itemsPerPage;try{const{content:s,meta:t}=await c.getInstitutions(l,u,e,a,o,r);this.institutions=s,this.pagination={totalElements:t.totalElements,currentPage:t.page,itemsPerPage:t.size,totalPages:t.totalPages||Math.ceil(t.totalElements/t.size)},console.log("Instituições:",this.institutions),console.log("Meta:",this.pagination)}catch(s){this.error=s.message||"Erro ao buscar instituições",console.error("❌ Erro ao buscar instituições:",s),this.institutions=[],this.pagination.totalElements=0}finally{this.loading=!1}},async fetchInstitutionsforListing(i,n,e="createdAt",a="asc",o,r){this.loading=!0,this.error=null;const l=i??this.pagination.currentPage,u=n??this.pagination.itemsPerPage;try{const{content:s,meta:t}=await c.getInstitutionsForListing(l,u,e,a,o,r);this.institutions=s,this.pagination={totalElements:t.totalElements,currentPage:t.page,itemsPerPage:t.size,totalPages:t.totalPages||Math.ceil(t.totalElements/t.size)},console.log("Instituições:",this.institutions),console.log("Meta:",this.pagination)}catch(s){this.error=s.message||"Erro ao buscar instituições",console.error("❌ Erro ao buscar instituições:",s),this.institutions=[],this.pagination.totalElements=0}finally{this.loading=!1}},setDraftInstitution(i){this.draftInstitution=i,localStorage.setItem("institutionDraft",JSON.stringify(i))},setCurrentInstitutionId(i){this.currentInstitutionId=i,localStorage.setItem("currentInstitutionId",i)},clearDraft(){this.draftInstitution=null,this.currentInstitutionId=null,localStorage.removeItem("institutionDraft"),localStorage.removeItem("currentInstitutionId")},loadFromStorage(){const i=localStorage.getItem("institutionDraft"),n=localStorage.getItem("currentInstitutionId");i&&(this.draftInstitution=JSON.parse(i)),n&&(this.currentInstitutionId=n)}}});export{I as u};
