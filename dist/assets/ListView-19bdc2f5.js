import{d as W,b as n,f as w,F as E,E as A,i as o,e as U,w as t,I as s,ah as G,h as L,l as r,c as F,J as te,B as K,x as e,O as q,aD as Y,C as le,y as ne,a1 as ue,D as ee,G as P,Q as H,a2 as re,g as M,a3 as de,ab as ie,Z as me,aL as X,K as ve,L as pe,af as fe,m as he,M as Z,aF as ye,N as Ve,R as _e,H as $e,S as xe,V as be,W as we}from"./index-1db35709.js";import{_ as Le}from"./TableAction.vue_vue_type_script_setup_true_lang-6eb16471.js";import{D as Ce}from"./DataTableServer-f256364c.js";const Se=[{title:"languages",disabled:!1},{title:"view-languages-list",disabled:!0}],oe=[{title:"language",key:"language",sortable:!0},{title:"code",key:"code",sortable:!0},{title:"localized-name",key:"localized-name",sortable:!0},{title:"region",key:"region",sortable:!0},{title:"right-to-left",key:"right-to-left",sortable:!1},{title:"action",sortable:!1}],ge=[{value:void 0,label:"Selecione o RTL"},{label:"NÃ£o",value:!1},{label:"Sim",value:!0}],ke={class:"status-chip"},ze={class:"status-chip"},Pe={class:"status-chip"},Ne={class:"status-chip"},Ue={class:"status-chip"},Ie=W({__name:"Rtl",props:{rtl:{type:String,default:"pending"},variant:{type:String,default:"tonal"}},setup(i){const x=[{text:"Pending",value:"pending"}],b=[{text:"Open",value:"open"},{text:"Medium",value:"medium"}],_=[{value:"delivered",text:"Delivered"},{value:"true",text:"yes"},{value:"beginner",text:"Beginner"},{value:"advance",text:"Advance"},{value:"live",text:"Live"},{value:"paid",text:"Paid"},{value:"low",text:"Low"},{value:"Successful",text:"Successful"},{value:"unblock",text:"unblock"}],C=[{value:"ood",text:"Out of Delivery"},{value:"false",text:"no"},{value:"block",text:"Block"},{value:"close",text:"Close"},{value:"intermediate",text:"Intermediate"},{value:"cancel",text:"Cancel"},{value:"unPaid",text:"UnPaid"},{value:"refund",text:"Refund"},{value:"high",text:"High"}],y=[{value:"shipping",text:"Shipping"},{value:"new",text:"New"}];return(g,S)=>(n(),w(E,null,[(n(),w(E,null,A(C,(u,d)=>o("span",{key:"danger-chip-"+d},[i.rtl===u.value?(n(),U(G,{key:0,color:"danger",label:"",variant:i.variant,elevation:"0",density:"compact"},{default:t(()=>[o("span",ke,s(g.$t("t-"+u.text)),1)]),_:2},1032,["variant"])):L("",!0)])),64)),(n(),w(E,null,A(y,(u,d)=>o("span",{key:"primary-chip-"+d},[i.rtl===u.value?(n(),U(G,{key:0,color:"primary",label:"",variant:i.variant,elevation:"0",density:"compact"},{default:t(()=>[o("span",ze,s(u.text),1)]),_:2},1032,["variant"])):L("",!0)])),64)),(n(),w(E,null,A(x,(u,d)=>o("span",{key:"warning-chip-"+d},[i.rtl===u.value?(n(),U(G,{key:0,color:"warning",label:"",variant:i.variant,elevation:"0",density:"compact"},{default:t(()=>[o("span",Pe,s(u.text),1)]),_:2},1032,["variant"])):L("",!0)])),64)),(n(),w(E,null,A(_,(u,d)=>o("span",{key:"success-chip-"+d},[i.rtl===u.value?(n(),U(G,{key:0,color:"success",label:"",variant:i.variant,elevation:"0",density:"compact"},{default:t(()=>[o("span",Ne,s(g.$t("t-"+u.text)),1)]),_:2},1032,["variant"])):L("",!0)])),64)),(n(),w(E,null,A(b,(u,d)=>o("span",{key:"info-chip-"+d},[i.rtl===u.value?(n(),U(G,{key:0,color:"info",label:"",variant:i.variant,elevation:"0",density:"compact"},{default:t(()=>[o("span",Ue,s(u.text),1)]),_:2},1032,["variant"])):L("",!0)])),64))],64))}}),De={class:"font-weight-bold text-caption mb-1"},Ee=o("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),Oe={key:0,class:"text-red text-extra-small pt-1"},Be={class:"font-weight-bold text-caption mb-1"},Te={key:0,class:"text-red text-extra-small pt-1"},Fe={class:"font-weight-bold text-caption mb-1"},Me={key:0,class:"text-red text-extra-small pt-1"},je={class:"font-weight-bold text-caption mb-1"},Re={key:0,class:"text-red text-extra-small pt-1"},Ae={class:"font-weight-bold mb-2"},qe=o("i",{class:"ph-x me-1"},null,-1),He=W({__name:"CreateUpdateLanguagesModal",props:{modelValue:{type:Boolean,default:!1},data:{type:Object,required:!0},error:{type:String,default:""}},emits:["update:modelValue","onSubmit"],setup(i,{emit:x}){const b=r(!1),_=x,C=i,y=F(()=>C.data.id==="-1"),g=r(C.data),S=F({get(){return C.modelValue},set(p){_("update:modelValue",p)}}),u=r(g.value.id||""),d=r(g.value.name||""),N=r(g.value.code||""),I=r(g.value.localizedName||""),O=r(g.value.region||""),f=F(()=>C.error),m=r(y.value?null:g.value.rtl??!1),l=r({name:"",code:"",localizedName:"",region:"",rtl:""}),{t:k}=te(),j=()=>{let p=!0;return Object.keys(l.value).forEach(h=>{l.value[h]=""}),d.value||(l.value.name=k("t-please-enter-language"),p=!1),p},V=()=>{if(!j())return;b.value=!0;const p={...!y.value&&{id:u.value},name:d.value,code:N.value,localizedName:I.value,region:O.value,rtl:m.value};_("onSubmit",p,{onSuccess:()=>{S.value=!1},onFinally:()=>{b.value=!1}})};return(p,h)=>{const R=K("TextField"),ae=K("Card");return n(),U(ie,{modelValue:S.value,"onUpdate:modelValue":h[7]||(h[7]=z=>S.value=z),width:"500",scrollable:""},{default:t(()=>[e(ae,{title:y.value?p.$t("t-add-language"):p.$t("t-edit-language"),"title-class":"py-0",style:{overflow:"hidden"}},{"title-action":t(()=>[e(q,{icon:"ph-x",variant:"plain",onClick:h[0]||(h[0]=z=>S.value=!1)})]),default:t(()=>[e(Y),e(le,{class:"overflow-y-auto",style:ne({"max-height":y.value?"70vh":"45vh"})},{default:t(()=>[f.value?(n(),U(ue,{key:0,text:f.value,type:"error",class:"mb-4",variant:"tonal",color:"danger",density:"compact"},null,8,["text"])):L("",!0),e(ee,null,{default:t(()=>[e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",De,[H(s(p.$t("t-language"))+" ",1),Ee]),e(R,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=z=>d.value=z),placeholder:p.$t("t-enter-language"),"error-messages":l.value.name?[l.value.name]:[],"hide-details":""},null,8,["modelValue","placeholder","error-messages"]),l.value.name?(n(),w("div",Oe,s(l.value.name),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Be,s(p.$t("t-code")),1),e(R,{modelValue:N.value,"onUpdate:modelValue":h[2]||(h[2]=z=>N.value=z),placeholder:p.$t("t-enter-code"),"error-messages":l.value.code?[l.value.code]:[],"hide-details":""},null,8,["modelValue","placeholder","error-messages"]),l.value.code?(n(),w("div",Te,s(l.value.code),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Fe,s(p.$t("t-localized-name")),1),e(R,{modelValue:I.value,"onUpdate:modelValue":h[3]||(h[3]=z=>I.value=z),placeholder:p.$t("t-enter-localized-name"),"error-messages":l.value.localizedName?[l.value.localizedName]:[],"hide-details":""},null,8,["modelValue","placeholder","error-messages"]),l.value.localizedName?(n(),w("div",Me,s(l.value.localizedName),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",je,s(p.$t("t-region")),1),e(R,{modelValue:O.value,"onUpdate:modelValue":h[4]||(h[4]=z=>O.value=z),placeholder:p.$t("t-enter-region"),"error-messages":l.value.region?[l.value.region]:[],"hide-details":""},null,8,["modelValue","placeholder","error-messages"]),l.value.region?(n(),w("div",Re,s(l.value.region),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"12"},{default:t(()=>[o("div",Ae,s(p.$t("t-right-to-left")),1),e(re,{modelValue:m.value,"onUpdate:modelValue":h[5]||(h[5]=z=>m.value=z),items:M(ge)},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1},8,["style"]),e(Y),e(de,{class:"d-flex justify-end"},{default:t(()=>[o("div",null,[e(q,{color:"danger",class:"me-1",onClick:h[6]||(h[6]=z=>S.value=!1)},{default:t(()=>[qe,H(" "+s(p.$t("t-close")),1)]),_:1}),e(q,{color:"primary",variant:"elevated",onClick:V,loading:b.value,disabled:b.value},{default:t(()=>[H(s(b.value?p.$t("t-saving"):p.$t("t-save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const Je={class:"font-weight-bold text-caption mb-1"},Qe=o("i",{class:"ph-asterisk ph-xs text-danger"},null,-1),Ge={key:0,class:"text-red text-extra-small pt-1"},Ke={class:"font-weight-bold text-caption mb-1"},We={key:0,class:"text-red text-extra-small pt-1"},Ze={class:"font-weight-bold text-caption mb-1"},Xe={key:0,class:"text-red text-extra-small pt-1"},Ye={class:"font-weight-bold text-caption mb-1"},ea={key:0,class:"text-red text-extra-small pt-1"},aa={class:"font-weight-bold mb-2"},ta=o("i",{class:"ph-x me-1"},null,-1),la=W({__name:"ViewLanguagesModal",props:{modelValue:{type:Boolean,default:!1},data:{type:Object,required:!0},error:{type:String,default:""}},emits:["update:modelValue","onSubmit"],setup(i,{emit:x}){r(!1);const b=x,_=i,C=F(()=>_.data.id==="-1"),y=r(_.data),g=F({get(){return _.modelValue},set(m){b("update:modelValue",m)}});r(y.value.id||"");const S=r(y.value.name||""),u=r(y.value.code||""),d=r(y.value.localizedName||""),N=r(y.value.region||""),I=F(()=>_.error),O=r(C.value?null:y.value.rtl??!1),f=r({name:"",code:"",localizedName:"",region:""});return te(),(m,l)=>{const k=K("TextField"),j=K("Card");return n(),U(ie,{modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=V=>g.value=V),width:"500",scrollable:""},{default:t(()=>[e(j,{title:C.value?m.$t("t-add-language"):m.$t("t-edit-language"),"title-class":"py-0",style:{overflow:"hidden"}},{"title-action":t(()=>[e(q,{icon:"ph-x",variant:"plain",onClick:l[0]||(l[0]=V=>g.value=!1)})]),default:t(()=>[e(Y),e(le,{class:"overflow-y-auto",style:ne({"max-height":C.value?"70vh":"45vh"})},{default:t(()=>[I.value?(n(),U(ue,{key:0,text:I.value,type:"error",class:"mb-4",variant:"tonal",color:"danger",density:"compact"},null,8,["text"])):L("",!0),e(ee,null,{default:t(()=>[e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Je,[H(s(m.$t("t-language"))+" ",1),Qe]),e(k,{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=V=>S.value=V),placeholder:m.$t("t-enter-language"),"error-messages":f.value.name?[f.value.name]:[],"hide-details":"",disabled:""},null,8,["modelValue","placeholder","error-messages"]),f.value.name?(n(),w("div",Ge,s(f.value.name),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Ke,s(m.$t("t-code")),1),e(k,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=V=>u.value=V),placeholder:m.$t("t-enter-code"),"error-messages":f.value.code?[f.value.code]:[],"hide-details":"",disabled:""},null,8,["modelValue","placeholder","error-messages"]),f.value.code?(n(),w("div",We,s(f.value.code),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Ze,s(m.$t("t-localized-name")),1),e(k,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=V=>d.value=V),placeholder:m.$t("t-enter-localized-name"),"error-messages":f.value.localizedName?[f.value.localizedName]:[],"hide-details":"",disabled:""},null,8,["modelValue","placeholder","error-messages"]),f.value.localizedName?(n(),w("div",Xe,s(f.value.localizedName),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"6"},{default:t(()=>[o("div",Ye,s(m.$t("t-region")),1),e(k,{modelValue:N.value,"onUpdate:modelValue":l[4]||(l[4]=V=>N.value=V),placeholder:m.$t("t-enter-region"),"error-messages":f.value.region?[f.value.region]:[],"hide-details":"",disabled:""},null,8,["modelValue","placeholder","error-messages"]),f.value.region?(n(),w("div",ea,s(f.value.region),1)):L("",!0)]),_:1}),e(P,{cols:"12",lg:"12"},{default:t(()=>[o("div",aa,s(m.$t("t-right-to-left")),1),e(re,{modelValue:O.value,"onUpdate:modelValue":l[5]||(l[5]=V=>O.value=V),items:M(ge),disabled:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1},8,["style"]),e(Y),e(de,{class:"d-flex justify-end"},{default:t(()=>[o("div",null,[e(q,{color:"danger",class:"me-1",onClick:l[6]||(l[6]=V=>g.value=!1)},{default:t(()=>[ta,H(" "+s(m.$t("t-close")),1)]),_:1})])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const oa=me("languages",{state:()=>({languages:[],pagination:{totalElements:0,currentPage:0,itemsPerPage:10,totalPages:0},loading:!1,error:null,draftLanguage:null,currentLanguageId:null}),actions:{async fetchLanguages(i,x,b="name",_="asc",C,y){this.loading=!0,this.error=null;const g=i??this.pagination.currentPage,S=x??this.pagination.itemsPerPage;try{const{content:u,meta:d}=await X.getLanguages(g,S,b,_,C,y);this.languages=u,this.pagination={totalElements:d.totalElements,currentPage:d.page,itemsPerPage:d.size,totalPages:d.totalPages||Math.ceil(d.totalElements/d.size)},console.log("ðŸ—£ï¸ LÃ­nguas carregadas:",this.languages),console.log("ðŸ“Š PaginaÃ§Ã£o:",this.pagination)}catch(u){this.error=u.message||"Erro ao buscar lÃ­nguas",this.languages=[],this.pagination.totalElements=0,console.error("âŒ Erro ao buscar lÃ­nguas:",u)}finally{this.loading=!1}},setDraftLanguage(i){this.draftLanguage=i,localStorage.setItem("draftLanguage",JSON.stringify(i)),console.log("ðŸ“‹ Draft de lÃ­ngua salvo:",this.draftLanguage)},setCurrentLanguageId(i){this.currentLanguageId=i,localStorage.setItem("currentLanguageId",i),console.log("ðŸ†” ID da lÃ­ngua atual salvo:",this.currentLanguageId)},clearDraft(){this.draftLanguage=null,this.currentLanguageId=null,localStorage.removeItem("draftLanguage"),localStorage.removeItem("currentLanguageId"),console.log("ðŸ§¹ Draft e ID da lÃ­ngua atual limpos")},loadFromStorage(){const i=localStorage.getItem("draftLanguage"),x=localStorage.getItem("currentLanguageId");i&&(this.draftLanguage=JSON.parse(i)),x&&(this.currentLanguageId=x),console.log("ðŸ“¦ Carregado do armazenamento:",this.draftLanguage,this.currentLanguageId)}}}),sa={class:"text-body-1 font-weight-bold"},na=o("i",{class:"ph-plus-circle me-1"},null,-1),ua=["colspan"],ra=o("i",{class:"ph-magnifying-glass",style:{"font-size":"30px"}},null,-1),da={class:"text-subtitle-1 font-weight-bold mt-3"},se="name,region,code,localizedName",ia=W({__name:"index",setup(i){const{t:x}=te(),b=ve(),_=oa();pe();const C=r(!1),y=r(!1),g=r(null),S=r(!1),u=r(null),d=r(!1);r(!1);const N=r(""),I=r(10),O=F(()=>_.loading),f=F(()=>_.pagination.totalElements),m=r([]),l=r("");let k=null;const j=a=>{var v,$,D,B,J,Q,T;k&&(clearTimeout(k),k=null);const c=((J=(B=(D=($=(v=a==null?void 0:a.response)==null?void 0:v.data)==null?void 0:$.error)==null?void 0:D.errors)==null?void 0:B.name)==null?void 0:J[0])||((T=(Q=a==null?void 0:a.response)==null?void 0:Q.data)==null?void 0:T.message)||(a==null?void 0:a.message)||x("t-message-save-error");console.error("Erro:",c),l.value=c,k=setTimeout(()=>{l.value="",k=null},5e3)};fe(()=>{k&&(clearTimeout(k),k=null)}),he(()=>{V({page:1,itemsPerPage:I.value,sortBy:[],search:""})}),Z(m,a=>{console.log("FuncionÃ¡rios selecionados:",a)},{deep:!0});const V=async({page:a,itemsPerPage:c,sortBy:v,search:$})=>{var D,B;await _.fetchLanguages(a-1,c,((D=v[0])==null?void 0:D.key)||"name",((B=v[0])==null?void 0:B.order)||"asc",$,se)},p=a=>{m.value.findIndex(v=>v.id===a.id)===-1?m.value=[...m.value,a]:m.value=m.value.filter(v=>v.id!==a.id)};Z(C,a=>{a||(g.value=null)});const h=a=>{a?g.value=a:g.value={id:"-1",name:"",code:"",localizedName:"",region:"",rtl:!1},C.value=!0},R=async(a,c)=>{var v,$;try{a.id?(await X.updateLanguages(a.id,a),b.success(x("t-toast-message-update"))):(await X.createLanguages(a),b.success(x("t-toast-message-created"))),await V({page:1,itemsPerPage:I.value,sortBy:[],search:N.value}),(v=c==null?void 0:c.onSuccess)==null||v.call(c)}catch(D){b.error(x("t-message-save-error")),j(D)}finally{($=c==null?void 0:c.onFinally)==null||$.call(c)}};Z(y,a=>{a||(g.value=null)});const ae=a=>{a?g.value=a:g.value={id:"-1",name:"",code:"",localizedName:"",region:"",rtl:!1},y.value=!0};Z(S,a=>{a||(u.value=null)});const z=a=>{u.value=a,S.value=!0},ce=async()=>{d.value=!0;try{await X.deleteLanguages(u.value),await V({page:1,itemsPerPage:I.value,sortBy:[],search:N.value}),b.success(x("t-toast-message-deleted"))}catch(a){b.error(x("t-toast-message-deleted-erros")),j(a)}finally{d.value=!1,S.value=!1}};return(a,c)=>(n(),w(E,null,[e(be,null,{default:t(()=>[e(ye,{class:"mt-2"},{default:t(()=>[e(ee,{justify:"space-between",align:"center","no-gutters":""},{default:t(()=>[e(P,{lg:"auto",class:"d-flex align-center"},{default:t(()=>[o("span",sa,s(a.$t("t-language-list")),1)]),_:1}),e(P,{lg:"8",class:"d-flex justify-end"},{default:t(()=>[e(ee,{justify:"end",align:"center","no-gutters":""},{default:t(()=>[e(P,{lg:"4",class:"me-3"},{default:t(()=>[e(Ve,{modelValue:N.value,"onUpdate:modelValue":c[0]||(c[0]=v=>N.value=v),placeholder:a.$t("t-search-for-language")},null,8,["modelValue","placeholder"])]),_:1}),e(P,{lg:"auto"},{default:t(()=>[e(q,{color:"secondary",onClick:c[1]||(c[1]=v=>h(null))},{default:t(()=>[na,H(" "+s(a.$t("t-add-language")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(le,{class:"mt-2"},{default:t(()=>[e(Ce,{headers:M(oe).map(v=>({...v,title:a.$t(`t-${v.title}`)})),items:M(_).languages,"items-per-page":I.value,"total-items":f.value,loading:O.value,"search-query":N.value,"search-props":se,"item-value":"id",onLoadItems:V},_e({body:t(({items:v})=>[(n(!0),w(E,null,A(v,$=>{var D,B,J,Q;return n(),w("tr",{key:$.id,height:"50"},[o("td",null,[e(xe,{"model-value":m.value.some(T=>T.id===$.id),"onUpdate:modelValue":T=>p($),"hide-details":"",density:"compact"},null,8,["model-value","onUpdate:modelValue"])]),o("td",null,s((D=$.name)==null?void 0:D.toUpperCase()),1),o("td",null,s((B=$.code)==null?void 0:B.toUpperCase()),1),o("td",null,s((J=$.localizedName)==null?void 0:J.toUpperCase()),1),o("td",null,s((Q=$.region)==null?void 0:Q.toUpperCase()),1),o("td",null,[e(Ie,{rtl:$.rtl?"true":"false"},null,8,["rtl"])]),o("td",null,[e(Le,{onOnEdit:T=>h($),onOnView:T=>ae($),onOnDelete:T=>z($.id)},null,8,["onOnEdit","onOnView","onOnDelete"])])])}),128))]),_:2},[M(_).languages.length?void 0:{name:"body",fn:t(()=>[o("tr",null,[o("td",{colspan:M(oe).length+2,class:"text-center py-10"},[e($e,{size:"80",color:"primary",variant:"tonal"},{default:t(()=>[ra]),_:1}),o("div",da,s(a.$t("t-search-not-found-message")),1)],8,ua)])]),key:"0"}]),1032,["headers","items","items-per-page","total-items","loading","search-query"])]),_:1})]),_:1}),g.value?(n(),U(He,{key:0,modelValue:C.value,"onUpdate:modelValue":c[2]||(c[2]=v=>C.value=v),data:g.value,error:l.value,onOnSubmit:R},null,8,["modelValue","data","error"])):L("",!0),g.value?(n(),U(la,{key:1,modelValue:y.value,"onUpdate:modelValue":c[3]||(c[3]=v=>y.value=v),data:g.value},null,8,["modelValue","data"])):L("",!0),u.value?(n(),U(we,{key:2,modelValue:S.value,"onUpdate:modelValue":c[4]||(c[4]=v=>S.value=v),onOnConfirm:ce,loading:d.value},null,8,["modelValue","loading"])):L("",!0)],64))}}),va=W({__name:"ListView",setup(i){return(x,b)=>{const _=K("Breadcrumb");return n(),w(E,null,[e(_,{title:"language-list",items:M(Se)},null,8,["items"]),e(ia)],64)}}});export{va as default};
